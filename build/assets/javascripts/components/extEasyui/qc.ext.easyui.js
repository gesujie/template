$.fn.panel.defaults.onBeforeDestroy=function(){var e=$("iframe",this);try{if(e.length>0){for(var t=0;t<e.length;t++)e[t].contentWindow.document.write(""),e[t].contentWindow.close();e.remove(),$.browser.msie&&CollectGarbage()}}catch(n){}},$.fn.panel.defaults.loadingMessage="\u52a0\u8f7d\u4e2d....",$.fn.datagrid.defaults.loadMsg="\u52a0\u8f7d\u4e2d....",$.fn.dialog.defaults.onOpen=function(){$(this).parent().addClass("active")},$.fn.dialog.defaults.onClose=function(){$(this).parent().removeClass("active")};var easyuiErrorFunction=function(e){$.messager.progress("close"),$.messager.alert("\u9519\u8bef",e.responseText)};$.fn.datagrid.defaults.onLoadError=easyuiErrorFunction,$.fn.treegrid.defaults.onLoadError=easyuiErrorFunction,$.fn.tree.defaults.onLoadError=easyuiErrorFunction,$.fn.combogrid.defaults.onLoadError=easyuiErrorFunction,$.fn.combobox.defaults.onLoadError=easyuiErrorFunction,$.fn.form.defaults.onLoadError=easyuiErrorFunction;var createGridHeaderContextMenu=function(e,t){e.preventDefault();var n=$(this),a=this.headerContextMenu;if(!a){for(var o=$('<div class="col-12"></div>').appendTo("body"),i=n.datagrid("getColumnFields"),r=0;r<i.length;r++){var d=n.datagrid("getColumnOption",i[r]);d.hidden?$('<div iconCls="fa fa-circle" field="'+i[r]+'"/>').html(d.title).appendTo(o):$('<div iconCls="fa fa-chevron-circle-down" field="'+i[r]+'"/>').html(d.title).appendTo(o)}a=this.headerContextMenu=o.menu({onClick:function(e){var t=$(e.target).attr("field");"fa fa-chevron-circle-down"==e.iconCls?(n.datagrid("hideColumn",t),$(this).menu("setIcon",{target:e.target,iconCls:"fa fa-circle"})):(n.datagrid("showColumn",t),$(this).menu("setIcon",{target:e.target,iconCls:"fa fa-chevron-circle-down"}))}})}a.menu("show",{left:e.pageX,top:e.pageY})};$.fn.datagrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu,$.fn.treegrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu,$.extend($.fn.validatebox.defaults.rules,{idcard:{validator:function(e){return/^\d{15}(\d{2}[A-Za-z0-9])?$/i.test(e)},message:"\u8eab\u4efd\u8bc1\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},minLength:{validator:function(e,t){return e.length>=t[0]},message:"\u8bf7\u8f93\u5165\u81f3\u5c11\uff082\uff09\u4e2a\u5b57\u7b26."},length:{validator:function(e,t){var n=$.trim(e).length;return n>=t[0]&&n<=t[1]},message:"\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e{0}\u548c{1}\u4e4b\u95f4."},phone:{validator:function(e){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(e)},message:"\u683c\u5f0f\u4e0d\u6b63\u786e,\u8bf7\u4f7f\u7528\u4e0b\u9762\u683c\u5f0f:020-88888888"},mobile:{validator:function(e){return/^(13|15|18)\d{9}$/i.test(e)},message:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},intOrFloat:{validator:function(e){return/^\d+(\.\d+)?$/i.test(e)},message:"\u8bf7\u8f93\u5165\u6570\u5b57\uff0c\u5e76\u786e\u4fdd\u683c\u5f0f\u6b63\u786e"},currency:{validator:function(e){return/^\d+(\.\d+)?$/i.test(e)},message:"\u8d27\u5e01\u683c\u5f0f\u4e0d\u6b63\u786e"},qq:{validator:function(e){return/^[1-9]\d{4,9}$/i.test(e)},message:"QQ\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},integer:{validator:function(e){return/^[+]?[1-9]+\d*$/i.test(e)},message:"\u8bf7\u8f93\u5165\u6574\u6570"},age:{validator:function(e){return/^(?:[1-9][0-9]?|1[01][0-9]|120)$/i.test(e)},message:"\u5e74\u9f84\u5fc5\u987b\u662f0\u5230120\u4e4b\u95f4\u7684\u6574\u6570"},chinese:{validator:function(e){return/^[\u0391-\\uffe5]+$/i.test(e)},message:"\u8bf7\u8f93\u5165\u4e2d\u6587"},english:{validator:function(e){return/^[A-Za-z]+$/i.test(e)},message:"\u8bf7\u8f93\u5165\u82f1\u6587"},unnormal:{validator:function(e){return/.+/i.test(e)},message:"\u8f93\u5165\u503c\u4e0d\u80fd\u4e3a\u7a7a\u548c\u5305\u542b\u5176\u4ed6\u975e\u6cd5\u5b57\u7b26"},username:{validator:function(e){return/^[a-zA-Z][a-zA-Z0-9_]{5,15}$/i.test(e)},message:"\u7528\u6237\u540d\u4e0d\u5408\u6cd5\uff08\u5b57\u6bcd\u5f00\u5934\uff0c\u5141\u8bb86-16\u5b57\u8282\uff0c\u5141\u8bb8\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\uff09"},faxno:{validator:function(e){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(e)},message:"\u4f20\u771f\u53f7\u7801\u4e0d\u6b63\u786e"},zip:{validator:function(e){return/^[1-9]\d{5}$/i.test(e)},message:"\u90ae\u653f\u7f16\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},ip:{validator:function(e){return/d+.d+.d+.d+/i.test(e)},message:"IP\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"},name:{validator:function(e){return/^[\u0391-\\uffe5]+$/i.test(e)|/^\w+[\w\s]+\w+$/i.test(e)},message:"\u8bf7\u8f93\u5165\u59d3\u540d"},date:{validator:function(e){return/^(?:(?!0000)[0-9]{4}([-]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-]?)0?2\2(?:29))$/i.test(e)},message:"\u6e05\u8f93\u5165\u5408\u9002\u7684\u65e5\u671f\u683c\u5f0f"},msn:{validator:function(e){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)},message:"\u8bf7\u8f93\u5165\u6709\u6548\u7684msn\u8d26\u53f7(\u4f8b\uff1aabc@hotmail(msn/live).com)"},same:{validator:function(e,t){return void 0==e?!1:$(t[0]).val()==e},message:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"}}),$.extend($.fn.datagrid.methods,{doCellTip:function(e,t){function n(e,n,a,o){""!=$(n).text()&&(t=t||{},e.content='<div class="tipcontent">'+e.content+"</div>",$(n).tooltip({content:e.content,trackMouse:!0,position:t.position,onHide:function(){$(this).tooltip("destroy")},onShow:function(){var t=$(this).tooltip("tip");e.tipStyler&&t.css(e.tipStyler),e.contentStyler&&t.find("div.tipcontent").css(e.contentStyler)}}).tooltip("show"))}return e.each(function(){var e=$(this),a=$(this).data("datagrid");if(a&&!a.tooltip){var o=e.datagrid("getPanel").panel("panel");o.find(".datagrid-body").each(function(){var i=$(this).find("> div.datagrid-body-inner").length?$(this).find("> div.datagrid-body-inner")[0]:this;$(i).undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove").delegate("td[field]",{mouseover:function(i){var r=this,d=null;if(t.specialShowFields&&t.specialShowFields.sort)for(var s=0;s<t.specialShowFields.length;s++)t.specialShowFields[s].field==$(this).attr("field")&&(d=t.specialShowFields[s]);if(null==d){a.factContent=$(this).find(">div").clone().css({"margin-left":"-5000px",width:"auto",display:"inline",position:"absolute"}).appendTo("body");var l=a.factContent.width();t.content=$(this).text(),t.onlyShowInterrupt?l>$(this).width()&&n(t,this,i,e):n(t,this,i,e)}else o.find(".datagrid-body").each(function(){var e=$(this).find('tr[datagrid-row-index="'+$(r).parent().attr("datagrid-row-index")+'"]');e.each(function(){var e=$(this).find('> td[field="'+d.showField+'"]');e.length&&(t.content=e.text())})}),n(t,this,i,e)},mouseout:function(e){a.factContent&&(a.factContent.remove(),a.factContent=null)}})})}})},cancelCellTip:function(e){return e.each(function(){var e=$(this).data("datagrid");e.factContent&&(e.factContent.remove(),e.factContent=null);var t=$(this).datagrid("getPanel").panel("panel");t.find(".datagrid-body").undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove")})}}),$.extend(jQuery.fn.datagrid.defaults.editors,{combotree:{init:function(e,t){var n=jQuery('<input type="text"/>').appendTo(e);return cip.editor=n,cip.options=t,n.combotree&&n.combotree(t),n},destroy:function(e){$(e).combotree("destroy")},getValue:function(e){var t=$(e).combotree("getValues");return t.join(",")},setValue:function(e,t){if(t&&null!=t){var n=t.split(",");$(e).combotree("setValues",n)}},resize:function(e,t){$(e).combotree("resize",t)}}}),$.fn.treeDataFilterListToTree=function(e,t){if(t.parentField){var n,a,o=t.idField||"id",i=t.textField||t.treeField||"text",r=t.iconField||"iconCls",d=t.parentField||"parentField",s=[],l=[];for(n=0,a=e.length;a>n;n++)l[e[n][o]]=e[n];for(n=0,a=e.length;a>n;n++)l[e[n][d]]&&e[n][o]!=e[n][d]?(l[e[n][d]].children||(l[e[n][d]].children=[]),e[n].id=e[n][o],e[n].text=e[n][i],e[n].iconCls=e[n][r],l[e[n][d]].children.push(e[n])):(e[n].id=e[n][o],e[n].text=e[n][i],e[n].iconCls=e[n][r],s.push(e[n]));return s}return e},$.fn.tree.defaults.loadFilter=function(e){return $.fn.treeDataFilterListToTree(e,$(this).data().tree.options)},$.fn.treegrid.defaults.loadFilter=function(e){return $.fn.treeDataFilterListToTree(e,$(this).data().treegrid.options)},$.fn.combotree.defaults.loadFilter=$.fn.tree.defaults.loadFilter,$.extend($.fn.treegrid.methods,{cascadeCheck:function(e,t){function n(e,t,a,o){var i=$(e).treegrid("getParent",t);if(i){var r=i[a];o?$(e).treegrid("select",r):$(e).treegrid("unselect",r),n(e,r,a,o)}}function a(e,t,n,o,i){!i&&o&&$(e).treegrid("expand",t);for(var r=$(e).treegrid("getChildren",t),d=0;d<r.length;d++){var s=r[d][n];i?$(e).treegrid("select",s):$(e).treegrid("unselect",s),a(e,s,n,o,i)}}var o=$.data(e[0],"treegrid").options;if(!o.singleSelect){for(var i=o.idField,r=!1,d=$(e).treegrid("getSelections"),s=0;s<d.length;s++)d[s][i]==t.id&&(r=!0);n(e[0],t.id,i,r),a(e[0],t.id,i,t.deepCascade,r)}}}),$.extend($.fn.datagrid.defaults.editors.combobox,{getValue:function(e){var t=$(e).combobox("options");if(t.multiple){var n=$(e).combobox("getValues");return n.length>0&&(""==n[0]||" "==n[0])?n.join(",").substring(1):n.join(",")}return $(e).combobox("getValue")},setValue:function(e,t){var n=$(e).combobox("options");if(n.multiple&&null!=t&&-1!=(""+t).indexOf(n.separator)){var a=(""+t).split(n.separator);$(e).combobox("setValues",a)}else $(e).combobox("setValue",t)}}),$.extend($.fn.datagrid.defaults.editors,{combogrid:{init:function(e,t){var n=$('<input type="text" class="datagrid-editable-input"/>').appendTo(e);return n.combogrid(t),n},destroy:function(e){$(e).combogrid("destroy")},getValue:function(e){var t=$(e).combogrid("options");if(t.multiple){var n=$(e).combogrid("getValues");return n.length>0&&(""==n[0]||" "==n[0])?n.join(",").substring(1):n.join(",")}return $(e).combogrid("getValue")},setValue:function(e,t){var n=$(e).combogrid("options");if(n.multiple&&null!=t&&-1!=(""+t).indexOf(n.separator)){var a=(""+t).split(n.separator);$(e).combogrid("setValues",a)}else $(e).combogrid("setValue",t)},resize:function(e,t){$(e).combogrid("resize",t)}}}),$.extend($.fn.datagrid.defaults.editors,{datetimebox:{init:function(e,t){var n=$('<input type="text" />').appendTo(e);return t.editable=!1,n.datetimebox(t),n},getValue:function(e){return $(e).datetimebox("getValue")},setValue:function(e,t){$(e).datetimebox("setValue",t)},resize:function(e,t){$(e).datetimebox("resize",t)},destroy:function(e){$(e).datetimebox("destroy")}}}),$.extend($.fn.datagrid.methods,{addEditor:function(e,t){if(t instanceof Array)$.each(t,function(t,n){var a=$(e).datagrid("getColumnOption",n.field);a.editor=n.editor});else{var n=$(e).datagrid("getColumnOption",t.field);n.editor=t.editor}},removeEditor:function(e,t){if(t instanceof Array)$.each(t,function(t,n){var a=$(e).datagrid("getColumnOption",n);a.editor={}});else{var n=$(e).datagrid("getColumnOption",t);n.editor={}}},autoMergeCells:function(e,t){return e.each(function(){var e=$(this);t||(t=e.datagrid("getColumnFields"));var n=e.datagrid("getRows"),a=0,o=0,i={};for(a;a<n.length;a++){var r=n[a];for(o=0;o<t.length;o++){var d=t[o],s=i[d];if(s){var l=s[r[d]];l?l.push(a):l=s[r[d]]=[a]}else s=i[d]={},s[r[d]]=[a]}}$.each(i,function(t,n){$.each(n,function(){var n=this;if(n.length>1)for(var a,o,i=n[0],r=0;r<n.length;r++)if(a=n[r],o=n[r+1],!o||o-a!=1){var d=a-i+1;d>1&&e.datagrid("mergeCells",{index:i,field:t,rowspan:d}),o&&o-a!=1&&(i=o)}})})})}}),$.modalDialog=function(e){var t=$.extend({title:"\u6a21\u6001\u7a97\u53e3",width:840,height:680,modal:!0,closable:!0,onClose:function(){$(this).dialog("destroy")}},e);return t.modal=!0,$.modalDialog.handler=$("<div/>").dialog(t)},$.showMessage=function(e){var t=e&&e.msgType?e.msgType:"warning",n=$.extend({msg:"\u6b64\u51fd\u6570\u53ef\u4ee5\u5b8c\u5168\u4f7f\u7528easyuiMessage\u7684\u53c2\u6570<br/>\u4e00\u822c\u60c5\u51b5\u53ea\u7528\u4fee\u6539msg\u53c2\u6570\u5373\u53ef",showType:"slide",width:500,height:50,noheader:!0,onBeforeOpen:function(){e&&e.onBeforeOpen&&e.onBeforeOpen(),$(this).addClass("message-body-"+t),$(this).append("<a class='message-close' href='javascript:void(0);' onclick='$.closeMessage(this)'>\xd7</a>")}},e);return n.width=n.width<400?400:n.width,$.messager.show(n)},$.closeMessage=function(e){e&&$(e).parents(".panel.window").remove()};var easyuiPanelOnMove=function(e,t){var n=e,a=t;1>n&&(n=1),1>a&&(a=1);var o=parseInt($(this).parent().css("width"))+14,i=parseInt($(this).parent().css("height"))+14,r=n+o,d=a+i,s=$(window).width(),l=$(window).height();r>s&&(n=s-o),d>l&&(a=l-i),$(this).parent().css({left:n,top:a})};$.fn.dialog.defaults.onMove=easyuiPanelOnMove,$.fn.window.defaults.onMove=easyuiPanelOnMove,$.fn.panel.defaults.onMove=easyuiPanelOnMove,$.ajaxSetup({type:"POST",error:function(e,t,n){$.messager.progress("close"),$.messager.alert("\u9519\u8bef",e.responseText+"_"+n)}}),$.changeThemeFun=function(e){var t=$("#easyuiTheme"),n=t.attr("href"),a=n.substring(0,n.indexOf("themes"))+"themes/"+e+"/easyui.css";t.attr("href",a);var o=$("iframe");if(o.length>0)for(var i=0;i<o.length;i++){var r=o[i];$(r).contents().find("#easyuiTheme").attr("href",a)}$.cookie("easyuiThemeName",e,{expires:7})},$.fn.my97=function(e,t){return"string"==typeof e?$.fn.my97.methods[e](this,t):(e=e||{},WdatePicker?this.each(function(){var t,n=$.data(this,"my97");n?(t=$.extend(n.options,e),n.opts=t):(t=$.extend({},$.fn.my97.defaults,$.fn.my97.parseOptions(this),e),$.data(this,"my97",{options:t})),$(this).addClass("Wdate").click(function(){WdatePicker(t)})}):void alert("\u672a\u5f15\u5165My97js\u5305\uff01"))},$.fn.my97.methods={setValue:function(e,t){e.val(t)},getValue:function(e){return e.val()},clearValue:function(e){e.val("")}},$.fn.my97.parseOptions=function(e){return $.extend({},$.parser.parseOptions(e,["el","vel","weekMethod","lang","skin","dateFmt","realDateFmt","realTimeFmt","realFullFmt","minDate","maxDate","startDate",{doubleCalendar:"boolean",enableKeyboard:"boolean",enableInputMask:"boolean",autoUpdateOnChanged:"boolean",firstDayOfWeek:"number",isShowWeek:"boolean",highLineWeekDay:"boolean",isShowClear:"boolean",isShowToday:"boolean",isShowOthers:"boolean",readOnly:"boolean",errDealMode:"boolean",autoPickDate:"boolean",qsEnabled:"boolean",autoShowQS:"boolean",opposite:"boolean"}]))},$.fn.my97.defaults={dateFmt:"yyyy-MM-dd HH:mm:ss"},$.parser.plugins.push("my97");