Number.prototype.toPercent=function(){return(Math.round(1e4*this)/100).toFixed(2)+"%"},Array.prototype.inArray=function(t){var e=new RegExp(this.S+t+this.S);return e.test(this.S+this.join(this.S)+this.S)},Namespace=new Object,Namespace.register=function(fullNS){for(var nsArray=fullNS.split("."),sEval="",sNS="",i=0;i<nsArray.length;i++)0!=i&&(sNS+="."),sNS+=nsArray[i],sEval+=i==nsArray.length-1?sNS+" = new Object();":"if (typeof("+sNS+") == 'undefined') "+sNS+" = new Object();";""!=sEval&&eval(sEval)},$.formatString=function(t){for(var e=0;e<arguments.length-1;e++)t=t.replace("{"+e+"}",arguments[e+1]);return t},$.serializeObject=function(t){var e={};return $.each(t.serializeArray(),function(t){e[this.name]?e[this.name]=e[this.name]+","+this.value:e[this.name]=this.value}),e},$.stringToList=function(t){if(void 0!=t&&""!=t){for(var e=[],n=t.split(","),i=0;i<n.length;i++)e.push(""+n[i]);return e}return[]},$.getFrameContent=function(t,e){if(t&&null!=t){if(t.indexOf(".")>0||t.indexOf("/")>0||t.indexOf(":")>0)for(var n=1==e?parent.$("iframe"):$("iframe"),i=0;i<n.size();i++){var r=$(n[i]).attr("src");if(r==t)return n[i].contentWindow}else{var s=1==e?parent.$("iframe#"+t):$("iframe#"+t);if(0!=s.length)return s[0].contentWindow}return void 0}},$.setRadioBoxValue=function(t,e,n){for(var i=t&&""!=t?$("#"+t).find("[name="+e+"]"):$("[name="+e+"]"),r=0;r<i.length;r++)if(i[r].value==n)return i[r].checked=!0,!0},$.fn.panel.defaults.onBeforeDestroy=function(){var t=$("iframe",this);try{if(t.length>0){for(var e=0;e<t.length;e++)t[e].contentWindow.document.write(""),t[e].contentWindow.close();t.remove(),$.browser.msie&&CollectGarbage()}}catch(n){}},$.fn.panel.defaults.loadingMessage="\u52a0\u8f7d\u4e2d....",$.fn.datagrid.defaults.loadMsg="\u52a0\u8f7d\u4e2d....",$.fn.dialog.defaults.onOpen=function(){$(this).parent().addClass("active")},$.fn.dialog.defaults.onClose=function(){$(this).parent().removeClass("active")};var easyuiErrorFunction=function(t){$.messager.progress("close"),$.messager.alert("\u9519\u8bef",t.responseText)};$.fn.datagrid.defaults.onLoadError=easyuiErrorFunction,$.fn.treegrid.defaults.onLoadError=easyuiErrorFunction,$.fn.tree.defaults.onLoadError=easyuiErrorFunction,$.fn.combogrid.defaults.onLoadError=easyuiErrorFunction,$.fn.combobox.defaults.onLoadError=easyuiErrorFunction,$.fn.form.defaults.onLoadError=easyuiErrorFunction;var createGridHeaderContextMenu=function(t,e){t.preventDefault();var n=$(this),i=this.headerContextMenu;if(!i){for(var r=$('<div class="col-12"></div>').appendTo("body"),s=n.datagrid("getColumnFields"),o=0;o<s.length;o++){var a=n.datagrid("getColumnOption",s[o]);a.hidden?$('<div iconCls="fa fa-circle" field="'+s[o]+'"/>').html(a.title).appendTo(r):$('<div iconCls="fa fa-chevron-circle-down" field="'+s[o]+'"/>').html(a.title).appendTo(r)}i=this.headerContextMenu=r.menu({onClick:function(t){var e=$(t.target).attr("field");"fa fa-chevron-circle-down"==t.iconCls?(n.datagrid("hideColumn",e),$(this).menu("setIcon",{target:t.target,iconCls:"fa fa-circle"})):(n.datagrid("showColumn",e),$(this).menu("setIcon",{target:t.target,iconCls:"fa fa-chevron-circle-down"}))}})}i.menu("show",{left:t.pageX,top:t.pageY})};$.fn.datagrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu,$.fn.treegrid.defaults.onHeaderContextMenu=createGridHeaderContextMenu,$.extend($.fn.validatebox.defaults.rules,{idcard:{validator:function(t){return/^\d{15}(\d{2}[A-Za-z0-9])?$/i.test(t)},message:"\u8eab\u4efd\u8bc1\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},minLength:{validator:function(t,e){return t.length>=e[0]},message:"\u8bf7\u8f93\u5165\u81f3\u5c11\uff082\uff09\u4e2a\u5b57\u7b26."},length:{validator:function(t,e){var n=$.trim(t).length;return n>=e[0]&&n<=e[1]},message:"\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e{0}\u548c{1}\u4e4b\u95f4."},phone:{validator:function(t){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(t)},message:"\u683c\u5f0f\u4e0d\u6b63\u786e,\u8bf7\u4f7f\u7528\u4e0b\u9762\u683c\u5f0f:020-88888888"},mobile:{validator:function(t){return/^(13|15|18)\d{9}$/i.test(t)},message:"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},intOrFloat:{validator:function(t){return/^\d+(\.\d+)?$/i.test(t)},message:"\u8bf7\u8f93\u5165\u6570\u5b57\uff0c\u5e76\u786e\u4fdd\u683c\u5f0f\u6b63\u786e"},currency:{validator:function(t){return/^\d+(\.\d+)?$/i.test(t)},message:"\u8d27\u5e01\u683c\u5f0f\u4e0d\u6b63\u786e"},qq:{validator:function(t){return/^[1-9]\d{4,9}$/i.test(t)},message:"QQ\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},integer:{validator:function(t){return/^[+]?[1-9]+\d*$/i.test(t)},message:"\u8bf7\u8f93\u5165\u6574\u6570"},age:{validator:function(t){return/^(?:[1-9][0-9]?|1[01][0-9]|120)$/i.test(t)},message:"\u5e74\u9f84\u5fc5\u987b\u662f0\u5230120\u4e4b\u95f4\u7684\u6574\u6570"},chinese:{validator:function(t){return/^[\u0391-\\uffe5]+$/i.test(t)},message:"\u8bf7\u8f93\u5165\u4e2d\u6587"},english:{validator:function(t){return/^[A-Za-z]+$/i.test(t)},message:"\u8bf7\u8f93\u5165\u82f1\u6587"},unnormal:{validator:function(t){return/.+/i.test(t)},message:"\u8f93\u5165\u503c\u4e0d\u80fd\u4e3a\u7a7a\u548c\u5305\u542b\u5176\u4ed6\u975e\u6cd5\u5b57\u7b26"},username:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9_]{5,15}$/i.test(t)},message:"\u7528\u6237\u540d\u4e0d\u5408\u6cd5\uff08\u5b57\u6bcd\u5f00\u5934\uff0c\u5141\u8bb86-16\u5b57\u8282\uff0c\u5141\u8bb8\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\uff09"},faxno:{validator:function(t){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(t)},message:"\u4f20\u771f\u53f7\u7801\u4e0d\u6b63\u786e"},zip:{validator:function(t){return/^[1-9]\d{5}$/i.test(t)},message:"\u90ae\u653f\u7f16\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"},ip:{validator:function(t){return/d+.d+.d+.d+/i.test(t)},message:"IP\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"},name:{validator:function(t){return/^[\u0391-\\uffe5]+$/i.test(t)|/^\w+[\w\s]+\w+$/i.test(t)},message:"\u8bf7\u8f93\u5165\u59d3\u540d"},date:{validator:function(t){return/^(?:(?!0000)[0-9]{4}([-]?)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-]?)0?2\2(?:29))$/i.test(t)},message:"\u6e05\u8f93\u5165\u5408\u9002\u7684\u65e5\u671f\u683c\u5f0f"},msn:{validator:function(t){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)},message:"\u8bf7\u8f93\u5165\u6709\u6548\u7684msn\u8d26\u53f7(\u4f8b\uff1aabc@hotmail(msn/live).com)"},same:{validator:function(t,e){return void 0==t?!1:$(e[0]).val()==t},message:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"}}),$.extend($.fn.datagrid.methods,{doCellTip:function(t,e){function n(t,n,i,r){""!=$(n).text()&&(e=e||{},t.content='<div class="tipcontent">'+t.content+"</div>",$(n).tooltip({content:t.content,trackMouse:!0,position:e.position,onHide:function(){$(this).tooltip("destroy")},onShow:function(){var e=$(this).tooltip("tip");t.tipStyler&&e.css(t.tipStyler),t.contentStyler&&e.find("div.tipcontent").css(t.contentStyler)}}).tooltip("show"))}return t.each(function(){var t=$(this),i=$(this).data("datagrid");if(i&&!i.tooltip){var r=t.datagrid("getPanel").panel("panel");r.find(".datagrid-body").each(function(){var s=$(this).find("> div.datagrid-body-inner").length?$(this).find("> div.datagrid-body-inner")[0]:this;$(s).undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove").delegate("td[field]",{mouseover:function(s){var o=this,a=null;if(e.specialShowFields&&e.specialShowFields.sort)for(var l=0;l<e.specialShowFields.length;l++)e.specialShowFields[l].field==$(this).attr("field")&&(a=e.specialShowFields[l]);if(null==a){i.factContent=$(this).find(">div").clone().css({"margin-left":"-5000px",width:"auto",display:"inline",position:"absolute"}).appendTo("body");var u=i.factContent.width();e.content=$(this).text(),e.onlyShowInterrupt?u>$(this).width()&&n(e,this,s,t):n(e,this,s,t)}else r.find(".datagrid-body").each(function(){var t=$(this).find('tr[datagrid-row-index="'+$(o).parent().attr("datagrid-row-index")+'"]');t.each(function(){var t=$(this).find('> td[field="'+a.showField+'"]');t.length&&(e.content=t.text())})}),n(e,this,s,t)},mouseout:function(t){i.factContent&&(i.factContent.remove(),i.factContent=null)}})})}})},cancelCellTip:function(t){return t.each(function(){var t=$(this).data("datagrid");t.factContent&&(t.factContent.remove(),t.factContent=null);var e=$(this).datagrid("getPanel").panel("panel");e.find(".datagrid-body").undelegate("td","mouseover").undelegate("td","mouseout").undelegate("td","mousemove")})}}),$.extend(jQuery.fn.datagrid.defaults.editors,{combotree:{init:function(t,e){var n=jQuery('<input type="text"/>').appendTo(t);return cip.editor=n,cip.options=e,n.combotree&&n.combotree(e),n},destroy:function(t){$(t).combotree("destroy")},getValue:function(t){var e=$(t).combotree("getValues");return e.join(",")},setValue:function(t,e){if(e&&null!=e){var n=e.split(",");$(t).combotree("setValues",n)}},resize:function(t,e){$(t).combotree("resize",e)}}}),$.fn.treeDataFilterListToTree=function(t,e){if(e.parentField){var n,i,r=e.idField||"id",s=e.textField||e.treeField||"text",o=e.iconField||"iconCls",a=e.parentField||"parentField",l=[],u=[];for(n=0,i=t.length;i>n;n++)u[t[n][r]]=t[n];for(n=0,i=t.length;i>n;n++)u[t[n][a]]&&t[n][r]!=t[n][a]?(u[t[n][a]].children||(u[t[n][a]].children=[]),t[n].id=t[n][r],t[n].text=t[n][s],t[n].iconCls=t[n][o],u[t[n][a]].children.push(t[n])):(t[n].id=t[n][r],t[n].text=t[n][s],t[n].iconCls=t[n][o],l.push(t[n]));return l}return t},$.fn.tree.defaults.loadFilter=function(t){return $.fn.treeDataFilterListToTree(t,$(this).data().tree.options)},$.fn.treegrid.defaults.loadFilter=function(t){return $.fn.treeDataFilterListToTree(t,$(this).data().treegrid.options)},$.fn.combotree.defaults.loadFilter=$.fn.tree.defaults.loadFilter,$.extend($.fn.treegrid.methods,{cascadeCheck:function(t,e){function n(t,e,i,r){var s=$(t).treegrid("getParent",e);if(s){var o=s[i];r?$(t).treegrid("select",o):$(t).treegrid("unselect",o),n(t,o,i,r)}}function i(t,e,n,r,s){!s&&r&&$(t).treegrid("expand",e);for(var o=$(t).treegrid("getChildren",e),a=0;a<o.length;a++){var l=o[a][n];s?$(t).treegrid("select",l):$(t).treegrid("unselect",l),i(t,l,n,r,s)}}var r=$.data(t[0],"treegrid").options;if(!r.singleSelect){for(var s=r.idField,o=!1,a=$(t).treegrid("getSelections"),l=0;l<a.length;l++)a[l][s]==e.id&&(o=!0);n(t[0],e.id,s,o),i(t[0],e.id,s,e.deepCascade,o)}}}),$.extend($.fn.datagrid.defaults.editors.combobox,{getValue:function(t){var e=$(t).combobox("options");if(e.multiple){var n=$(t).combobox("getValues");return n.length>0&&(""==n[0]||" "==n[0])?n.join(",").substring(1):n.join(",")}return $(t).combobox("getValue")},setValue:function(t,e){var n=$(t).combobox("options");if(n.multiple&&null!=e&&-1!=(""+e).indexOf(n.separator)){var i=(""+e).split(n.separator);$(t).combobox("setValues",i)}else $(t).combobox("setValue",e)}}),$.extend($.fn.datagrid.defaults.editors,{combogrid:{init:function(t,e){var n=$('<input type="text" class="datagrid-editable-input"/>').appendTo(t);return n.combogrid(e),n},destroy:function(t){$(t).combogrid("destroy")},getValue:function(t){var e=$(t).combogrid("options");if(e.multiple){var n=$(t).combogrid("getValues");return n.length>0&&(""==n[0]||" "==n[0])?n.join(",").substring(1):n.join(",")}return $(t).combogrid("getValue")},setValue:function(t,e){var n=$(t).combogrid("options");if(n.multiple&&null!=e&&-1!=(""+e).indexOf(n.separator)){var i=(""+e).split(n.separator);$(t).combogrid("setValues",i)}else $(t).combogrid("setValue",e)},resize:function(t,e){$(t).combogrid("resize",e)}}}),$.extend($.fn.datagrid.defaults.editors,{datetimebox:{init:function(t,e){var n=$('<input type="text" />').appendTo(t);return e.editable=!1,n.datetimebox(e),n},getValue:function(t){return $(t).datetimebox("getValue")},setValue:function(t,e){$(t).datetimebox("setValue",e)},resize:function(t,e){$(t).datetimebox("resize",e)},destroy:function(t){$(t).datetimebox("destroy")}}}),$.extend($.fn.datagrid.methods,{addEditor:function(t,e){if(e instanceof Array)$.each(e,function(e,n){var i=$(t).datagrid("getColumnOption",n.field);i.editor=n.editor});else{var n=$(t).datagrid("getColumnOption",e.field);n.editor=e.editor}},removeEditor:function(t,e){if(e instanceof Array)$.each(e,function(e,n){var i=$(t).datagrid("getColumnOption",n);i.editor={}});else{var n=$(t).datagrid("getColumnOption",e);n.editor={}}},autoMergeCells:function(t,e){return t.each(function(){var t=$(this);e||(e=t.datagrid("getColumnFields"));var n=t.datagrid("getRows"),i=0,r=0,s={};for(i;i<n.length;i++){var o=n[i];for(r=0;r<e.length;r++){var a=e[r],l=s[a];if(l){var u=l[o[a]];u?u.push(i):u=l[o[a]]=[i]}else l=s[a]={},l[o[a]]=[i]}}$.each(s,function(e,n){$.each(n,function(){var n=this;if(n.length>1)for(var i,r,s=n[0],o=0;o<n.length;o++)if(i=n[o],r=n[o+1],!r||r-i!=1){var a=i-s+1;a>1&&t.datagrid("mergeCells",{index:s,field:e,rowspan:a}),r&&r-i!=1&&(s=r)}})})})}}),$.modalDialog=function(t){var e=$.extend({title:"\u6a21\u6001\u7a97\u53e3",width:840,height:680,modal:!0,closable:!0,onClose:function(){$(this).dialog("destroy")}},t);return e.modal=!0,$.modalDialog.handler=$("<div/>").dialog(e)},$.showMessage=function(t){var e=t&&t.msgType?t.msgType:"warning",n=$.extend({msg:"\u6b64\u51fd\u6570\u53ef\u4ee5\u5b8c\u5168\u4f7f\u7528easyuiMessage\u7684\u53c2\u6570<br/>\u4e00\u822c\u60c5\u51b5\u53ea\u7528\u4fee\u6539msg\u53c2\u6570\u5373\u53ef",showType:"slide",width:500,height:50,noheader:!0,onBeforeOpen:function(){t&&t.onBeforeOpen&&t.onBeforeOpen(),$(this).addClass("message-body-"+e),$(this).append("<a class='message-close' href='javascript:void(0);' onclick='$.closeMessage(this)'>\xd7</a>")}},t);return n.width=n.width<400?400:n.width,$.messager.show(n)},$.closeMessage=function(t){t&&$(t).parents(".panel.window").remove()};var easyuiPanelOnMove=function(t,e){var n=t,i=e;1>n&&(n=1),1>i&&(i=1);var r=parseInt($(this).parent().css("width"))+14,s=parseInt($(this).parent().css("height"))+14,o=n+r,a=i+s,l=$(window).width(),u=$(window).height();o>l&&(n=l-r),a>u&&(i=u-s),$(this).parent().css({left:n,top:i})};$.fn.dialog.defaults.onMove=easyuiPanelOnMove,$.fn.window.defaults.onMove=easyuiPanelOnMove,$.fn.panel.defaults.onMove=easyuiPanelOnMove,$.ajaxSetup({type:"POST",error:function(t,e,n){$.messager.progress("close"),$.messager.alert("\u9519\u8bef",t.responseText+"_"+n)}}),$.changeThemeFun=function(t){var e=$("#easyuiTheme"),n=e.attr("href"),i=n.substring(0,n.indexOf("themes"))+"themes/"+t+"/easyui.css";e.attr("href",i);var r=$("iframe");if(r.length>0)for(var s=0;s<r.length;s++){var o=r[s];$(o).contents().find("#easyuiTheme").attr("href",i)}$.cookie("easyuiThemeName",t,{expires:7})},$.fn.my97=function(t,e){return"string"==typeof t?$.fn.my97.methods[t](this,e):(t=t||{},WdatePicker?this.each(function(){var e,n=$.data(this,"my97");n?(e=$.extend(n.options,t),n.opts=e):(e=$.extend({},$.fn.my97.defaults,$.fn.my97.parseOptions(this),t),$.data(this,"my97",{options:e})),$(this).addClass("Wdate").click(function(){WdatePicker(e)})}):void alert("\u672a\u5f15\u5165My97js\u5305\uff01"))},$.fn.my97.methods={setValue:function(t,e){t.val(e)},getValue:function(t){return t.val()},clearValue:function(t){t.val("")}},$.fn.my97.parseOptions=function(t){return $.extend({},$.parser.parseOptions(t,["el","vel","weekMethod","lang","skin","dateFmt","realDateFmt","realTimeFmt","realFullFmt","minDate","maxDate","startDate",{doubleCalendar:"boolean",enableKeyboard:"boolean",enableInputMask:"boolean",autoUpdateOnChanged:"boolean",firstDayOfWeek:"number",isShowWeek:"boolean",highLineWeekDay:"boolean",isShowClear:"boolean",isShowToday:"boolean",isShowOthers:"boolean",readOnly:"boolean",errDealMode:"boolean",autoPickDate:"boolean",qsEnabled:"boolean",autoShowQS:"boolean",opposite:"boolean"}]))},$.fn.my97.defaults={dateFmt:"yyyy-MM-dd HH:mm:ss"},$.parser.plugins.push("my97"),$.fn.pagination&&($.fn.pagination.defaults.beforePageText="\u7b2c",$.fn.pagination.defaults.afterPageText="\u5171{pages}\u9875",$.fn.pagination.defaults.displayMsg="\u663e\u793a{from}\u5230{to},\u5171{total}\u8bb0\u5f55"),$.fn.datagrid&&($.fn.datagrid.defaults.loadMsg="\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u5f85\u3002\u3002\u3002"),$.fn.treegrid&&$.fn.datagrid&&($.fn.treegrid.defaults.loadMsg=$.fn.datagrid.defaults.loadMsg),$.messager&&($.messager.defaults.ok="\u786e\u5b9a",$.messager.defaults.cancel="\u53d6\u6d88"),$.map(["validatebox","textbox","filebox","searchbox","combo","combobox","combogrid","combotree","datebox","datetimebox","numberbox","spinner","numberspinner","timespinner","datetimespinner"],function(t){$.fn[t]&&($.fn[t].defaults.missingMessage="\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879")}),$.fn.validatebox&&($.fn.validatebox.defaults.rules.email.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740",$.fn.validatebox.defaults.rules.url.message="\u8bf7\u8f93\u5165\u6709\u6548\u7684URL\u5730\u5740",$.fn.validatebox.defaults.rules.length.message="\u8f93\u5165\u5185\u5bb9\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e{0}\u548c{1}\u4e4b\u95f4",$.fn.validatebox.defaults.rules.remote.message="\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5"),$.fn.calendar&&($.fn.calendar.defaults.weeks=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],$.fn.calendar.defaults.months=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]),$.fn.datebox&&($.fn.datebox.defaults.currentText="\u4eca\u5929",$.fn.datebox.defaults.closeText="\u5173\u95ed",$.fn.datebox.defaults.okText="\u786e\u5b9a",$.fn.datebox.defaults.formatter=function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return e+"-"+(10>n?"0"+n:n)+"-"+(10>i?"0"+i:i)},$.fn.datebox.defaults.parser=function(t){if(!t)return new Date;var e=t.split("-"),n=parseInt(e[0],10),i=parseInt(e[1],10),r=parseInt(e[2],10);return isNaN(n)||isNaN(i)||isNaN(r)?new Date:new Date(n,i-1,r)}),$.fn.datetimebox&&$.fn.datebox&&$.extend($.fn.datetimebox.defaults,{currentText:$.fn.datebox.defaults.currentText,closeText:$.fn.datebox.defaults.closeText,okText:$.fn.datebox.defaults.okText}),$.fn.datetimespinner&&($.fn.datetimespinner.defaults.selections=[[0,4],[5,7],[8,10],[11,13],[14,16],[17,19]]),Namespace.register("qc.combotree"),Namespace.register("qc.combobox"),Namespace.register("qc.datagrid"),Namespace.register("qc.treegrid"),Namespace.register("qc.dialog"),Namespace.register("qc.tree"),Namespace.register("qc.form"),Namespace.register("qc.tabs"),Namespace.register("qc.main"),qc.main.onlyOpenTitle="\u6b22\u8fce\u4f7f\u7528",qc.main.mainTabs=null,qc.main.windowStack=[],$(function(){qc.main.slideMenuUrl&&null!=qc.main.slideMenuUrl||(qc.main.slideMenuUrl="/assets/javascripts/json/sidebarNav/mainMenuTreeData.json"),qc.main.slideMenu=$("#mainSlideMenu").tree({url:qc.main.slideMenuUrl,method:"get",fit:!0,animate:!0,parentField:"parentId",onClick:function(t){t.children?qc.main.slideMenu.tree("toggle",t.target):t.url&&qc.main.addTab(t.text,t.url,t.iconCls,!!t.iframe)},formatter:function(t){var e=t.text;return t.children&&(e+="<span class='badge badge-fw badge-warning'>"+t.children.length+"</span>"),e}}),qc.main.mainTabs=$("#mainTabs").tabs({border:!1,fit:!0,tabHeight:40})}),qc.main.getIcon=function(t){var e="";return $.each(_menus,function(n,i){$.each(i.children,function(n,i){i.id==t&&(e=i.iconCls)})}),e},qc.main.find=function(t){var e=null;return $.each(_menus,function(n,i){$.each(i.children,function(n,i){i.id==t&&(e=i)})}),e},qc.main.addTab=function(t,e,n,i){var r=null;if(qc.main.mainTabs.tabs("exists",t)){qc.main.mainTabs.tabs("select",t);var s=qc.main.mainTabs.tabs("getTab",t).find("iframe").attr("src");r=qc.main.mainTabs.tabs("getSelected"),s!=e&&qc.main.mainTabs.tabs("update",{tab:r,options:{content:i?qc.main.createFrame(e):null,href:i?null:e}})}else qc.main.mainTabs.tabs("tabs").length>=6?$.messager.show({title:"\u63d0\u9192",msg:"\u6253\u5f00\u7a97\u53e3\u8fc7\u591a\uff0c\u8bf7\u5148\u5173\u95ed\u4e0d\u9700\u8981\u7684\u7a97\u53e3\u3002",showType:"slide"}):qc.main.mainTabs.tabs("add",{title:t,content:i?qc.main.createFrame(e):null,href:i?null:e,closable:!0}),r=qc.main.mainTabs.tabs("getSelected");i&&null!=r&&(r.addClass("overflow-hide"),r.iframe=i),qc.main.tabClose(),qc.main.tabCloseEven()},qc.main.createFrame=function(t){var e='<iframe class="iframe-fluid" src="'+t+'"></iframe>';return e};var mainTabMenu=$("#mainTabMenu");qc.main.tabClose=function(){var t=$(".tabs-inner"),e=$(".tabs-selected");t.dblclick(function(){var t=$(this).children(".tabs-closable").text();qc.main.mainTabs.tabs("close",t)}),t.mousedown(function(t){if(t.preventDefault(),2==t.which){var e=$(this).children(".tabs-closable").text();return qc.main.mainTabs.tabs("close",e),!1}}),e.mousedown(function(t){if(t.preventDefault(),2==t.which){var e=$(this).children().first().text();return qc.main.mainTabs.tabs("close",e),!1}return!1}),e.bind("contextmenu",function(t){mainTabMenu.menu("show",{left:t.pageX,top:t.pageY});var e=$(this).children().first().text();return mainTabMenu.data("currtab",e),qc.main.mainTabs.tabs("select",e),!1})},qc.main.tabCloseEven=function(){return mainTabMenu.menu({onClick:function(t){qc.main.closeTab(t.id)}}),!1},qc.main.pushWindowId=function(t){qc.main.windowStack.push({title:qc.main.mainTabs.tabs("getSelected").panel("options").title,windows:t.split(",")})},qc.main.destroyContainsWindow=function(t){var e=new Array,n=qc.main.windowStack;if(t&&t.length>0){for(var i=0;i<n.length;i++)if(t.indexOf(n[i].title)>-1)for(var r=n[i].windows,s=0;s<r.length;s++){var o=$("#"+r[s]);o&&(qc.main.destoryWindow=o,o.panel("destroy"))}else e.push(n[i]);qc.main.windowStack=e}},qc.main.closeTab=function(t){var e=qc.main.mainTabs.tabs("tabs"),n=qc.main.mainTabs.tabs("getSelected"),i=n.panel("options").title,r=[],s=[];switch($.each(e,function(t,e){r.push($(e).panel("options").title)}),t){case"refresh":var o;if(i!=qc.main.onlyOpenTitle)if(o=n.children("iframe").src,null!=o&&o.length>0)qc.main.mainTabs.tabs("update",{tab:n,options:{content:n.iframe?qc.main.createFrame(o):null}});else{var a=qc.main.mainTabs.tabs("getSelected");s.push(i),a.panel("refresh")}break;case"close":i!=qc.main.onlyOpenTitle&&(s.push(i),qc.main.mainTabs.tabs("close",i));break;case"closeall":$.each(r,function(t,e){e!=qc.main.onlyOpenTitle&&(qc.main.mainTabs.tabs("close",e),s.push(e))});break;case"closeother":$.each(r,function(t,e){e!=i&&e!=qc.main.onlyOpenTitle&&(qc.main.mainTabs.tabs("close",e),s.push(e))});break;case"closeright":var l=qc.main.mainTabs.tabs("getTabIndex",n);if(l==e.length-1)return $.messager.show({title:"\u63d0\u793a",msg:"\u53f3\u8fb9\u6ca1\u6709\u53ef\u5173\u95ed\u7684\u6807\u7b7e\uff01",timeout:5e3,showType:"slide"}),!1;$.each(r,function(t,e){t>l&&e!=qc.main.onlyOpenTitle&&(qc.main.mainTabs.tabs("close",e),s.push(e))});break;case"closeleft":var l=qc.main.mainTabs.tabs("getTabIndex",n);if(1==l)return $.messager.show({title:"\u63d0\u793a",msg:"\u5de6\u8fb9\u6ca1\u6709\u53ef\u5173\u95ed\u7684\u6807\u7b7e\uff01",timeout:5e3,showType:"slide"}),!1;$.each(r,function(t,e){l>t&&e!=qc.main.onlyOpenTitle&&(qc.main.mainTabs.tabs("close",e),s.push(e))})}qc.main.destroyContainsWindow(s)},qc.main.menushow=function(t){var e=$(".menu > li");$("#"+t.id).addClass("active"),$("div."+t.id).fadeIn();var n=$("div."+t.id+" > iframe").attr("src");(""==n||"#"==n)&&(durl=$("div."+t.id).attr("title"),$("div."+t.id+" > iframe").attr("src",durl));for(var i=0;i<e.length;i++){var r=e[i].id;t.id!=r&&($("#"+r).removeClass("active"),$("div."+r).add("hidden"))}},qc.main.closeThisAndsOpenOther=function(t,e,n){if(qc.main.mainTabs.tabs("exists",e)){qc.main.mainTabs.tabs("close",t),qc.main.mainTabs.tabs("select",e);var i=qc.main.mainTabs.tabs("getSelected"),r=$(i.panel("options").content);src=r.attr("src"),src!=n&&qc.main.mainTabs.tabs("update",{tab:i,options:{content:qc.main.createFrame(n)}})}else{var s=qc.main.mainTabs.tabs("getSelected");qc.main.mainTabs.tabs("update",{tab:s,options:{title:e,content:qc.main.createFrame(n)}})}},qc.main.getCurrentWindow=function(t){var e=t,n=t.lastIndexOf(".");return-1!=n&&(e=t.substring(0,n)),frames[e]},qc.main.msgShow=function(t,e,n){$.messager.alert(t,e,n)},
//! moment.js
//! version : 2.10.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Cn.apply(null,arguments)}function e(t){Cn=t}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function s(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)o(e,n)&&(t[n]=e[n]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,n,i){return Tt(t,e,n,i,!0).utc()}function u(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function c(t){var e=l(NaN);return null!=t?a(e._pf,t):e._pf.userInvalidated=!0,e}function d(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Mn.length>0)for(n in Mn)i=Mn[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function h(e){d(this,e),this._d=new Date(+e._d),Rn===!1&&(Rn=!0,t.updateOffset(this),Rn=!1)}function f(t){return t instanceof h||null!=t&&o(t,"_isAMomentObject")}function p(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function g(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&p(t[i])!==p(e[i]))&&o++;return o+s}function m(){}function v(t){return t?t.toLowerCase().replace("_","-"):t}function y(t){for(var e,n,i,r,s=0;s<t.length;){for(r=v(t[s]).split("-"),e=r.length,n=v(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=b(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&g(r,n,!0)>=e-1)break;e--}s++}return null}function b(t){var e=null;if(!Fn[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=kn._abbr,require("./locale/"+t),w(e)}catch(n){}return Fn[t]}function w(t,e){var n;return t&&(n="undefined"==typeof e?D(t):_(t,e),n&&(kn=n)),kn._abbr}function _(t,e){return null!==e?(e.abbr=t,Fn[t]||(Fn[t]=new m),Fn[t].set(e),w(t),Fn[t]):(delete Fn[t],null)}function D(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return kn;if(!i(t)){if(e=b(t))return e;t=[t]}return y(t)}function S(t,e){var n=t.toLowerCase();Hn[n]=Hn[n+"s"]=Hn[e]=t}function T(t){return"string"==typeof t?Hn[t]||Hn[t.toLowerCase()]:void 0}function E(t){var e,n,i={};for(n in t)o(t,n)&&(e=T(n),e&&(i[e]=t[n]));return i}function x(e,n){return function(i){return null!=i?(k(this,e,i),t.updateOffset(this,n),this):C(this,e)}}function C(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function k(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function M(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function R(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function F(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(An[t]=r),e&&(An[e[0]]=function(){return R(r.apply(this,arguments),e[1],e[2])}),n&&(An[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $(t){var e,n,i=t.match($n);for(e=0,n=i.length;n>e;e++)An[i[e]]?i[e]=An[i[e]]:i[e]=H(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function O(t,e){return t.isValid()?(e=Y(e,t.localeData()),Yn[e]||(Yn[e]=$(e)),Yn[e](t)):t.localeData().invalidDate()}function Y(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(On.lastIndex=0;i>=0&&On.test(t);)t=t.replace(On,n),On.lastIndex=0,i-=1;return t}function A(t,e,n){Xn[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function L(t,e){return o(Xn,t)?Xn[t](e._strict,e._locale):new RegExp(P(t))}function P(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=p(t)}),n=0;n<t.length;n++)Jn[t[n]]=i}function I(t,e){z(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function U(t,e,n){null!=e&&o(Jn,t)&&Jn[t](e,n._a,n,t)}function q(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function G(t){return this._months[t.month()]}function N(t){return this._monthsShort[t.month()]}function B(t,e,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=l([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function V(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),q(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function j(e){return null!=e?(V(this,e),t.updateOffset(this,!0),this):C(this,"Month")}function W(){return q(this.year(),this.month())}function Z(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[ti]<0||n[ti]>11?ti:n[ei]<1||n[ei]>q(n[Kn],n[ti])?ei:n[ni]<0||n[ni]>24||24===n[ni]&&(0!==n[ii]||0!==n[ri]||0!==n[si])?ni:n[ii]<0||n[ii]>59?ii:n[ri]<0||n[ri]>59?ri:n[si]<0||n[si]>999?si:-1,t._pf._overflowDayOfYear&&(Kn>e||e>ei)&&(e=ei),t._pf.overflow=e),t}function Q(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function X(t,e){var n=!0;return a(function(){return n&&(Q(t),n=!1),e.apply(this,arguments)},e)}function J(t,e){li[t]||(Q(e),li[t]=!0)}function K(t){var e,n,i=t._i,r=ui.exec(i);if(r){for(t._pf.iso=!0,e=0,n=ci.length;n>e;e++)if(ci[e][1].exec(i)){t._f=ci[e][0]+(r[6]||" ");break}for(e=0,n=di.length;n>e;e++)if(di[e][1].exec(i)){t._f+=di[e][0];break}i.match(Wn)&&(t._f+="Z"),yt(t)}else t._isValid=!1}function tt(e){var n=hi.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(K(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function et(t,e,n,i,r,s,o){var a=new Date(t,e,n,i,r,s,o);return 1970>t&&a.setFullYear(t),a}function nt(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function it(t){return rt(t)?366:365}function rt(t){return t%4===0&&t%100!==0||t%400===0}function st(){return rt(this.year())}function ot(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Et(t).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function at(t){return ot(t,this._week.dow,this._week.doy).week}function lt(){return this._week.dow}function ut(){return this._week.doy}function ct(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function dt(t){var e=ot(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function ht(t,e,n,i,r){var s,o,a=nt(t,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:r,s=r-a+(a>i?7:0)-(r>a?7:0),o=7*(e-1)+(n-r)+s+1,{year:o>0?t:t-1,dayOfYear:o>0?o:it(t-1)+o}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function pt(t,e,n){return null!=t?t:null!=e?e:n}function gt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function mt(t){var e,n,i,r,s=[];if(!t._d){for(i=gt(t),t._w&&null==t._a[ei]&&null==t._a[ti]&&vt(t),t._dayOfYear&&(r=pt(t._a[Kn],i[Kn]),t._dayOfYear>it(r)&&(t._pf._overflowDayOfYear=!0),n=nt(r,0,t._dayOfYear),t._a[ti]=n.getUTCMonth(),t._a[ei]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ni]&&0===t._a[ii]&&0===t._a[ri]&&0===t._a[si]&&(t._nextDay=!0,t._a[ni]=0),t._d=(t._useUTC?nt:et).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ni]=24)}}function vt(t){var e,n,i,r,s,o,a;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,o=4,n=pt(e.GG,t._a[Kn],ot(Et(),1,4).year),i=pt(e.W,1),r=pt(e.E,1)):(s=t._locale._week.dow,o=t._locale._week.doy,n=pt(e.gg,t._a[Kn],ot(Et(),s,o).year),i=pt(e.w,1),null!=e.d?(r=e.d,s>r&&++i):r=null!=e.e?e.e+s:s),a=ht(n,i,r,o,s),t._a[Kn]=a.year,t._dayOfYear=a.dayOfYear}function yt(e){if(e._f===t.ISO_8601)return void K(e);e._a=[],e._pf.empty=!0;var n,i,r,s,o,a=""+e._i,l=a.length,u=0;for(r=Y(e._f,e._locale).match($n)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(L(s,e))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),u+=i.length),An[s]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(s),U(s,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-u,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[ni]<=12&&(e._pf.bigHour=void 0),e._a[ni]=bt(e._locale,e._a[ni],e._meridiem),mt(e),Z(e)}function bt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function wt(t){var e,i,r,s,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)o=0,e=d({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[s],yt(e),u(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==r||r>o)&&(r=o,i=e));a(t,i||e)}function _t(t){if(!t._d){var e=E(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],mt(t)}}function Dt(t){var e,n=t._i,r=t._f;return t._locale=t._locale||D(t._l),null===n||void 0===r&&""===n?c({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),f(n)?new h(Z(n)):(i(r)?wt(t):r?yt(t):St(t),e=new h(Z(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function St(e){var n=e._i;void 0===n?e._d=new Date:r(n)?e._d=new Date(+n):"string"==typeof n?tt(e):i(n)?(e._a=s(n.slice(0),function(t){return parseInt(t,10)}),mt(e)):"object"==typeof n?_t(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function Tt(t,e,i,r,s){var o={};return"boolean"==typeof i&&(r=i,i=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=i,o._i=t,o._f=e,o._strict=r,o._pf=n(),Dt(o)}function Et(t,e,n,i){return Tt(t,e,n,i,!1)}function xt(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Et();for(n=e[0],r=1;r<e.length;++r)e[r][t](n)&&(n=e[r]);return n}function Ct(){var t=[].slice.call(arguments,0);return xt("isBefore",t)}function kt(){var t=[].slice.call(arguments,0);return xt("isAfter",t)}function Mt(t){var e=E(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=D(),this._bubble()}function Rt(t){return t instanceof Mt}function Ft(t,e){F(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+R(~~(t/60),2)+e+R(~~t%60,2)})}function Ht(t){var e=(t||"").match(Wn)||[],n=e[e.length-1]||[],i=(n+"").match(vi)||["-",0,0],r=+(60*i[1])+p(i[2]);return"+"===i[0]?r:-r}function $t(e,n){var i,s;return n._isUTC?(i=n.clone(),s=(f(e)||r(e)?+e:+Et(e))-+i,i._d.setTime(+i._d+s),t.updateOffset(i,!1),i):Et(e).local()}function Ot(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Yt(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ht(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=Ot(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Xt(this,Vt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Ot(this)}function At(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Lt(t){return this.utcOffset(0,t)}function Pt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ot(this),"m")),this}function zt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ht(this._i)),this}function It(t){return t=t?Et(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Ut(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if(this._a){var t=this._isUTC?l(this._a):Et(this._a);return this.isValid()&&g(this._a,t.toArray())>0}return!1}function Gt(){return!this._isUTC}function Nt(){return this._isUTC}function Bt(){return this._isUTC&&0===this._offset}function Vt(t,e){var n,i,r,s=t,a=null;return Rt(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=yi.exec(t))?(n="-"===a[1]?-1:1,s={y:0,d:p(a[ei])*n,h:p(a[ni])*n,m:p(a[ii])*n,s:p(a[ri])*n,ms:p(a[si])*n}):(a=bi.exec(t))?(n="-"===a[1]?-1:1,s={y:jt(a[2],n),M:jt(a[3],n),d:jt(a[4],n),h:jt(a[5],n),m:jt(a[6],n),s:jt(a[7],n),w:jt(a[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Zt(Et(s.from),Et(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),i=new Mt(s),Rt(t)&&o(t,"_locale")&&(i._locale=t._locale),i}function jt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Wt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Zt(t,e){var n;return e=$t(e,t),t.isBefore(e)?n=Wt(t,e):(n=Wt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qt(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(J(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Vt(n,i),Xt(this,r,t),this}}function Xt(e,n,i,r){var s=n._milliseconds,o=n._days,a=n._months;r=null==r?!0:r,s&&e._d.setTime(+e._d+s*i),o&&k(e,"Date",C(e,"Date")+o*i),a&&V(e,C(e,"Month")+a*i),r&&t.updateOffset(e,o||a)}function Jt(t){var e=t||Et(),n=$t(e,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,Et(e)))}function Kt(){return new h(this)}function te(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Et(t),+this>+t):(n=f(t)?+t:+Et(t),n<+this.clone().startOf(e))}function ee(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:Et(t),+t>+this):(n=f(t)?+t:+Et(t),+this.clone().endOf(e)<n)}function ne(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function ie(t,e){var n;return e=T(e||"millisecond"),"millisecond"===e?(t=f(t)?t:Et(t),+this===+t):(n=+Et(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function re(t){return 0>t?Math.ceil(t):Math.floor(t)}function se(t,e,n){var i,r,s=$t(t,this),o=6e4*(s.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(r=oe(this,s),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-o)/864e5:"week"===e?(i-o)/6048e5:i),n?r:re(r)}function oe(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)}function ae(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function le(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ue(e){var n=O(this,e||t.defaultFormat);return this.localeData().postformat(n)}function ce(t,e){return Vt({to:this,from:t}).locale(this.locale()).humanize(!e)}function de(t){return this.from(Et(),t)}function he(t){var e;return void 0===t?this._locale._abbr:(e=D(t),null!=e&&(this._locale=e),this)}function fe(){return this._locale}function pe(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ge(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function me(){return+this._d-6e4*(this._offset||0)}function ve(){return Math.floor(+this/1e3)}function ye(){return this._offset?new Date(+this):this._d}function be(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function we(){return u(this)}function _e(){return a({},this._pf)}function De(){return this._pf.overflow}function Se(t,e){F(0,[t,t.length],0,e)}function Te(t,e,n){return ot(Et([t,11,31+e-n]),e,n).week}function Ee(t){var e=ot(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function xe(t){var e=ot(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Ce(){return Te(this.year(),1,4)}function ke(){var t=this.localeData()._week;return Te(this.year(),t.dow,t.doy)}function Me(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Re(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Fe(t){return this._weekdays[t.day()]}function He(t){return this._weekdaysShort[t.day()]}function $e(t){return this._weekdaysMin[t.day()]}function Oe(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Et([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ye(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Re(t,this.localeData()),this.add(t-e,"d")):e}function Ae(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Le(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Pe(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function ze(t,e){return e._meridiemParse}function Ie(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ue(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function qe(t){F(0,[t,3],0,"millisecond")}function Ge(){return this._isUTC?"UTC":""}function Ne(){return this._isUTC?"Coordinated Universal Time":""}function Be(t){return Et(1e3*t)}function Ve(){return Et.apply(null,arguments).parseZone()}function je(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function We(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Ze(){return this._invalidDate}function Qe(t){return this._ordinal.replace("%d",t)}function Xe(t){return t}function Je(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)}function Ke(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function tn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function en(t,e,n,i){var r=D(),s=l().set(i,e);return r[n](s,t)}function nn(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return en(t,e,n,r);var s,o=[];for(s=0;i>s;s++)o[s]=en(t,s,n,r);return o}function rn(t,e){return nn(t,e,"months",12,"month")}function sn(t,e){return nn(t,e,"monthsShort",12,"month")}function on(t,e){return nn(t,e,"weekdays",7,"day")}function an(t,e){return nn(t,e,"weekdaysShort",7,"day")}function ln(t,e){return nn(t,e,"weekdaysMin",7,"day")}function un(){var t=this._data;return this._milliseconds=Ui(this._milliseconds),this._days=Ui(this._days),this._months=Ui(this._months),t.milliseconds=Ui(t.milliseconds),t.seconds=Ui(t.seconds),t.minutes=Ui(t.minutes),t.hours=Ui(t.hours),t.months=Ui(t.months),t.years=Ui(t.years),this}function cn(t,e,n,i){var r=Vt(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function dn(t,e){return cn(this,t,e,1)}function hn(t,e){return cn(this,t,e,-1)}function fn(){var t,e,n,i=this._milliseconds,r=this._days,s=this._months,o=this._data,a=0;return o.milliseconds=i%1e3,t=re(i/1e3),o.seconds=t%60,e=re(t/60),o.minutes=e%60,n=re(e/60),o.hours=n%24,r+=re(n/24),a=re(pn(r)),r-=re(gn(a)),s+=re(r/30),r%=30,a+=re(s/12),s%=12,o.days=r,o.months=s,o.years=a,this}function pn(t){return 400*t/146097}function gn(t){return 146097*t/400}function mn(t){var e,n,i=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*pn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(gn(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function vn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function yn(t){return function(){return this.as(t)}}function bn(t){return t=T(t),this[t+"s"]()}function wn(t){return function(){return this._data[t]}}function _n(){return re(this.days()/7)}function Dn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Sn(t,e,n){var i=Vt(t).abs(),r=ir(i.as("s")),s=ir(i.as("m")),o=ir(i.as("h")),a=ir(i.as("d")),l=ir(i.as("M")),u=ir(i.as("y")),c=r<rr.s&&["s",r]||1===s&&["m"]||s<rr.m&&["mm",s]||1===o&&["h"]||o<rr.h&&["hh",o]||1===a&&["d"]||a<rr.d&&["dd",a]||1===l&&["M"]||l<rr.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,Dn.apply(null,c)}function Tn(t,e){return void 0===rr[t]?!1:void 0===e?rr[t]:(rr[t]=e,!0)}function En(t){var e=this.localeData(),n=Sn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function xn(){var t=sr(this.years()),e=sr(this.months()),n=sr(this.days()),i=sr(this.hours()),r=sr(this.minutes()),s=sr(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"}var Cn,kn,Mn=t.momentProperties=[],Rn=!1,Fn={},Hn={},$n=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,On=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yn={},An={},Ln=/\d/,Pn=/\d\d/,zn=/\d{3}/,In=/\d{4}/,Un=/[+-]?\d{6}/,qn=/\d\d?/,Gn=/\d{1,3}/,Nn=/\d{1,4}/,Bn=/[+-]?\d{1,6}/,Vn=/\d+/,jn=/[+-]?\d+/,Wn=/Z|[+-]\d\d:?\d\d/gi,Zn=/[+-]?\d+(\.\d{1,3})?/,Qn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Xn={},Jn={},Kn=0,ti=1,ei=2,ni=3,ii=4,ri=5,si=6;F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),S("month","M"),A("M",qn),A("MM",qn,Pn),A("MMM",Qn),A("MMMM",Qn),z(["M","MM"],function(t,e){e[ti]=p(t)-1}),z(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[ti]=r:n._pf.invalidMonth=t});var oi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ai="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),li={};t.suppressDeprecationWarnings=!1;var ui=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ci=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],di=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hi=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=X("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),S("year","y"),A("Y",jn),A("YY",qn,Pn),A("YYYY",Nn,In),A("YYYYY",Bn,Un),A("YYYYYY",Bn,Un),z(["YYYY","YYYYY","YYYYYY"],Kn),z("YY",function(e,n){n[Kn]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return p(t)+(p(t)>68?1900:2e3)};var fi=x("FullYear",!1);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),A("w",qn),A("ww",qn,Pn),A("W",qn),A("WW",qn,Pn),I(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=p(t)});var pi={dow:0,doy:6};F("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),A("DDD",Gn),A("DDDD",zn),z(["DDD","DDDD"],function(t,e,n){n._dayOfYear=p(t)}),t.ISO_8601=function(){};var gi=X("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Et.apply(null,arguments);return this>t?this:t}),mi=X("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Et.apply(null,arguments);return t>this?this:t});Ft("Z",":"),Ft("ZZ",""),A("Z",Wn),A("ZZ",Wn),z(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ht(t)});var vi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var yi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,bi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Vt.fn=Mt.prototype;var wi=Qt(1,"add"),_i=Qt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Di=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Se("gggg","weekYear"),Se("ggggg","weekYear"),Se("GGGG","isoWeekYear"),Se("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),A("G",jn),A("g",jn),A("GG",qn,Pn),A("gg",qn,Pn),A("GGGG",Nn,In),A("gggg",Nn,In),A("GGGGG",Bn,Un),A("ggggg",Bn,Un),I(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=p(t)}),I(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),F("Q",0,0,"quarter"),S("quarter","Q"),A("Q",Ln),z("Q",function(t,e){e[ti]=3*(p(t)-1)}),F("D",["DD",2],"Do","date"),S("date","D"),A("D",qn),A("DD",qn,Pn),A("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),z(["D","DD"],ei),z("Do",function(t,e){e[ei]=p(t.match(qn)[0],10)});var Si=x("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),A("d",qn),A("e",qn),A("E",qn),A("dd",Qn),A("ddd",Qn),A("dddd",Qn),I(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),I(["d","e","E"],function(t,e,n,i){e[i]=p(t)});var Ti="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ei="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),xi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),Pe("a",!0),Pe("A",!1),S("hour","h"),A("a",ze),A("A",ze),A("H",qn),A("h",qn),A("HH",qn,Pn),A("hh",qn,Pn),z(["H","HH"],ni),z(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),z(["h","hh"],function(t,e,n){e[ni]=p(t),n._pf.bigHour=!0});var Ci=/[ap]\.?m?\.?/i,ki=x("Hours",!0);F("m",["mm",2],0,"minute"),S("minute","m"),A("m",qn),A("mm",qn,Pn),z(["m","mm"],ii);var Mi=x("Minutes",!1);F("s",["ss",2],0,"second"),S("second","s"),A("s",qn),A("ss",qn,Pn),z(["s","ss"],ri);var Ri=x("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),qe("SSS"),qe("SSSS"),S("millisecond","ms"),A("S",Gn,Ln),A("SS",Gn,Pn),A("SSS",Gn,zn),A("SSSS",Vn),z(["S","SS","SSS","SSSS"],function(t,e){e[si]=p(1e3*("0."+t))});var Fi=x("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var Hi=h.prototype;Hi.add=wi,Hi.calendar=Jt,Hi.clone=Kt,Hi.diff=se,Hi.endOf=ge,Hi.format=ue,Hi.from=ce,Hi.fromNow=de,Hi.get=M,Hi.invalidAt=De,Hi.isAfter=te,Hi.isBefore=ee,Hi.isBetween=ne,Hi.isSame=ie,Hi.isValid=we,Hi.lang=Di,Hi.locale=he,Hi.localeData=fe,Hi.max=mi,Hi.min=gi,Hi.parsingFlags=_e,Hi.set=M,Hi.startOf=pe,Hi.subtract=_i,Hi.toArray=be,Hi.toDate=ye,Hi.toISOString=le,Hi.toJSON=le,Hi.toString=ae,Hi.unix=ve,Hi.valueOf=me,Hi.year=fi,Hi.isLeapYear=st,Hi.weekYear=Ee,Hi.isoWeekYear=xe,Hi.quarter=Hi.quarters=Me,Hi.month=j,Hi.daysInMonth=W,Hi.week=Hi.weeks=ct,Hi.isoWeek=Hi.isoWeeks=dt,Hi.weeksInYear=ke,Hi.isoWeeksInYear=Ce,Hi.date=Si,Hi.day=Hi.days=Ye,Hi.weekday=Ae,Hi.isoWeekday=Le,Hi.dayOfYear=ft,Hi.hour=Hi.hours=ki,Hi.minute=Hi.minutes=Mi,Hi.second=Hi.seconds=Ri,Hi.millisecond=Hi.milliseconds=Fi,Hi.utcOffset=Yt,Hi.utc=Lt,Hi.local=Pt,Hi.parseZone=zt,Hi.hasAlignedHourOffset=It,Hi.isDST=Ut,Hi.isDSTShifted=qt,Hi.isLocal=Gt,Hi.isUtcOffset=Nt,Hi.isUtc=Bt,Hi.isUTC=Bt,Hi.zoneAbbr=Ge,Hi.zoneName=Ne,Hi.dates=X("dates accessor is deprecated. Use date instead.",Si),Hi.months=X("months accessor is deprecated. Use month instead",j),Hi.years=X("years accessor is deprecated. Use year instead",fi),Hi.zone=X("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",At);var $i=Hi,Oi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Yi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Ai="Invalid date",Li="%d",Pi=/\d{1,2}/,zi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ii=m.prototype;Ii._calendar=Oi,Ii.calendar=je,Ii._longDateFormat=Yi,Ii.longDateFormat=We,Ii._invalidDate=Ai,Ii.invalidDate=Ze,Ii._ordinal=Li,Ii.ordinal=Qe,Ii._ordinalParse=Pi,Ii.preparse=Xe,Ii.postformat=Xe,Ii._relativeTime=zi,Ii.relativeTime=Je,Ii.pastFuture=Ke,Ii.set=tn,Ii.months=G,Ii._months=oi,Ii.monthsShort=N,Ii._monthsShort=ai,Ii.monthsParse=B,Ii.week=at,Ii._week=pi,Ii.firstDayOfYear=ut,Ii.firstDayOfWeek=lt,Ii.weekdays=Fe,Ii._weekdays=Ti,Ii.weekdaysMin=$e,Ii._weekdaysMin=xi,Ii.weekdaysShort=He,Ii._weekdaysShort=Ei,Ii.weekdaysParse=Oe,Ii.isPM=Ie,Ii._meridiemParse=Ci,Ii.meridiem=Ue,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===p(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=X("moment.lang is deprecated. Use moment.locale instead.",w),t.langData=X("moment.langData is deprecated. Use moment.localeData instead.",D);var Ui=Math.abs,qi=yn("ms"),Gi=yn("s"),Ni=yn("m"),Bi=yn("h"),Vi=yn("d"),ji=yn("w"),Wi=yn("M"),Zi=yn("y"),Qi=wn("milliseconds"),Xi=wn("seconds"),Ji=wn("minutes"),Ki=wn("hours"),tr=wn("days"),er=wn("months"),nr=wn("years"),ir=Math.round,rr={
s:45,m:45,h:22,d:26,M:11},sr=Math.abs,or=Mt.prototype;or.abs=un,or.add=dn,or.subtract=hn,or.as=mn,or.asMilliseconds=qi,or.asSeconds=Gi,or.asMinutes=Ni,or.asHours=Bi,or.asDays=Vi,or.asWeeks=ji,or.asMonths=Wi,or.asYears=Zi,or.valueOf=vn,or._bubble=fn,or.get=bn,or.milliseconds=Qi,or.seconds=Xi,or.minutes=Ji,or.hours=Ki,or.days=tr,or.weeks=_n,or.months=er,or.years=nr,or.humanize=En,or.toISOString=xn,or.toString=xn,or.toJSON=xn,or.locale=he,or.localeData=fe,or.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xn),or.lang=Di,F("X",0,0,"unix"),F("x",0,0,"valueOf"),A("x",jn),A("X",Zn),z("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),z("x",function(t,e,n){n._d=new Date(p(t))}),t.version="2.10.2",e(Et),t.fn=$i,t.min=Ct,t.max=kt,t.utc=l,t.unix=Be,t.months=rn,t.isDate=r,t.locale=w,t.invalid=c,t.duration=Vt,t.isMoment=f,t.weekdays=on,t.parseZone=Ve,t.localeData=D,t.isDuration=Rt,t.monthsShort=sn,t.weekdaysMin=ln,t.defineLocale=_,t.weekdaysShort=an,t.normalizeUnits=T,t.relativeTimeThreshold=Tn;var ar=t;return ar}),/*!
 * FullCalendar v2.3.1
 * Docs & License: http://fullcalendar.io/
 * (c) 2015 Adam Shaw
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){function n(){var e,n,i,r,s,o=Array.prototype.slice.call(arguments),a={};for(e=0;e<At.length;e++){for(n=At[e],i=null,r=0;r<o.length;r++)s=o[r][n],t.isPlainObject(s)?i=t.extend(i||{},s):null!=s&&(i=null);null!==i&&(a[n]=i)}return o.unshift({}),o.push(a),t.extend.apply(t,o)}function i(e){var n,i={views:e.views||{}};return t.each(e,function(e,r){"views"!=e&&(t.isPlainObject(r)&&!/(time|duration|interval)$/i.test(e)&&-1==t.inArray(e,At)?(n=null,t.each(r,function(t,r){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(i.views[t]||(i.views[t]={}),i.views[t][e]=r):(n||(n={}),n[t]=r)}),n&&(i[e]=n)):i[e]=r)}),i}function r(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function s(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function o(){t("body").addClass("fc-not-allowed")}function a(){t("body").removeClass("fc-not-allowed")}function l(e,n,i){var r=Math.floor(n/e.length),s=Math.floor(n-r*(e.length-1)),o=[],a=[],l=[],c=0;u(e),e.each(function(n,i){var u=n===e.length-1?s:r,d=t(i).outerHeight(!0);u>d?(o.push(i),a.push(d),l.push(t(i).height())):c+=d}),i&&(n-=c,r=Math.floor(n/o.length),s=Math.floor(n-r*(o.length-1))),t(o).each(function(e,n){var i=e===o.length-1?s:r,u=a[e],c=l[e],d=i-(u-c);i>u&&t(n).height(d)})}function u(t){t.height("")}function c(e){var n=0;return e.find("> *").each(function(e,i){var r=t(i).outerWidth();r>n&&(n=r)}),n++,e.width(n),n}function d(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight?!0:(h(t),!1)}function h(t){t.height("").removeClass("fc-scroller")}function f(e){var n=e.css("position"),i=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:t(e[0].ownerDocument||document)}function p(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function g(t){var e=t.offset(),n=v(t),i=e.left+w(t,"border-left-width")+n.left,r=e.top+w(t,"border-top-width")+n.top;return{left:i,right:i+t[0].clientWidth,top:r,bottom:r+t[0].clientHeight}}function m(t){var e=t.offset(),n=e.left+w(t,"border-left-width")+w(t,"padding-left"),i=e.top+w(t,"border-top-width")+w(t,"padding-top");return{left:n,right:n+t.width(),top:i,bottom:i+t.height()}}function v(t){var e=t.innerWidth()-t[0].clientWidth,n={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return y()&&"rtl"==t.css("direction")?n.left=e:n.right=e,n}function y(){return null===Lt&&(Lt=b()),Lt}function b(){var e=t("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),n=e.children(),i=n.offset().left>e.offset().left;return e.remove(),i}function w(t,e){return parseFloat(t.css(e))||0}function _(t){return 1==t.which&&!t.ctrlKey}function D(t,e){var n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function S(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function T(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function E(t,e){return{left:t.left-e.left,top:t.top-e.top}}function x(t,e){var n,i,r,s,o=t.start,a=t.end,l=e.start,u=e.end;return a>l&&u>o?(o>=l?(n=o.clone(),r=!0):(n=l.clone(),r=!1),u>=a?(i=a.clone(),s=!0):(i=u.clone(),s=!1),{start:n,end:i,isStart:r,isEnd:s}):void 0}function C(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function k(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days")})}function M(t,n,i){return e.duration(Math.round(t.diff(n,i,!0)),i)}function R(t,e){var n,i,r;for(n=0;n<qt.length&&(i=qt[n],r=F(i,t,e),!(r>=1&&j(r)));n++);return i}function F(t,n,i){return null!=i?i.diff(n,t,!0):e.isDuration(n)?n.as(t):n.end.diff(n.start,t,!0)}function H(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function $(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function O(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function Y(t){var e=function(){};return e.prototype=t,new e}function A(t,e){for(var n in t)P(t,n)&&(e[n]=t[n])}function L(t,e){var n,i,r=["constructor","toString","valueOf"];for(n=0;n<r.length;n++)i=r[n],t[i]!==Object.prototype[i]&&(e[i]=t[i])}function P(t,e){return Gt.call(t,e)}function z(e){return/undefined|null|boolean|number|string/.test(t.type(e))}function I(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var r,s;for(r=0;r<e.length;r++)s=e[r].apply(n,i)||s;return s}}function U(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}function q(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function G(t){return t.replace(/&.*?;/g,"")}function N(e){var n=[];return t.each(e,function(t,e){null!=e&&n.push(t+":"+e)}),n.join(";")}function B(t){return t.charAt(0).toUpperCase()+t.slice(1)}function V(t,e){return t-e}function j(t){return t%1===0}function W(t,e){var n=t[e];return function(){return n.apply(t,arguments)}}function Z(t,e){var n,i,r,s,o=function(){var a=+new Date-s;e>a&&a>0?n=setTimeout(o,e-a):(n=null,t.apply(r,i),n||(r=i=null))};return function(){r=this,i=arguments,s=+new Date,n||(n=setTimeout(o,e))}}function Q(n,i,r){var s,o,a,l,u=n[0],c=1==n.length&&"string"==typeof u;return e.isMoment(u)?(l=e.apply(null,n),J(u,l)):$(u)||void 0===u?l=e.apply(null,n):(s=!1,o=!1,c?Nt.test(u)?(u+="-01",n=[u],s=!0,o=!0):(a=Bt.exec(u))&&(s=!a[5],o=!0):t.isArray(u)&&(o=!0),l=i||s?e.utc.apply(e,n):e.apply(null,n),s?(l._ambigTime=!0,l._ambigZone=!0):r&&(o?l._ambigZone=!0:c&&(l.utcOffset?l.utcOffset(u):l.zone(u)))),l._fullCalendar=!0,l}function X(t,n){var i,r,s=!1,o=!1,a=t.length,l=[];for(i=0;a>i;i++)r=t[i],e.isMoment(r)||(r=Ot.moment.parseZone(r)),s=s||r._ambigTime,o=o||r._ambigZone,l.push(r);for(i=0;a>i;i++)r=l[i],n||!s||r._ambigTime?o&&!r._ambigZone&&(l[i]=r.clone().stripZone()):l[i]=r.clone().stripTime();return l}function J(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function K(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function tt(t,e){return jt.format.call(t,e)}function et(t,e){return nt(t,at(e))}function nt(t,e){var n,i="";for(n=0;n<e.length;n++)i+=it(t,e[n]);return i}function it(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?Wt[n]?Wt[n](t):tt(t,n):e.maybe&&(i=nt(t,e.maybe),i.match(/[1-9]/))?i:""}function rt(t,e,n,i,r){var s;return t=Ot.moment.parseZone(t),e=Ot.moment.parseZone(e),s=(t.localeData||t.lang).call(t),n=s.longDateFormat(n)||n,i=i||" - ",st(t,e,at(n),i,r)}function st(t,e,n,i,r){var s,o,a,l,u="",c="",d="",h="",f="";for(o=0;o<n.length&&(s=ot(t,e,n[o]),s!==!1);o++)u+=s;for(a=n.length-1;a>o&&(s=ot(t,e,n[a]),s!==!1);a--)c=s+c;for(l=o;a>=l;l++)d+=it(t,n[l]),h+=it(e,n[l]);return(d||h)&&(f=r?h+i+d:d+i+h),u+f+c}function ot(t,e,n){var i,r;return"string"==typeof n?n:(i=n.token)&&(r=Zt[i.charAt(0)],r&&t.isSame(e,r))?tt(t,i):!1}function at(t){return t in Qt?Qt[t]:Qt[t]=lt(t)}function lt(t){for(var e,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=i.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:lt(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function ut(){}function ct(t,e){return t||e?t&&e?t.grid===e.grid&&t.row===e.row&&t.col===e.col:!1:!0}function dt(t){var e=ft(t);return"background"===e||"inverse-background"===e}function ht(t){return"inverse-background"===ft(t)}function ft(t){return U((t.source||{}).rendering,t.rendering)}function pt(t){var e,n,i={};for(e=0;e<t.length;e++)n=t[e],(i[n._id]||(i[n._id]=[])).push(n);return i}function gt(t,e){return t.eventStartMS-e.eventStartMS}function mt(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||(t.event.title||"").localeCompare(e.event.title)}function vt(n){var i,r,s,o,a=Ot.dataAttrPrefix;return a&&(a+="-"),i=n.data(a+"event")||null,i&&(i="object"==typeof i?t.extend({},i):{},r=i.start,null==r&&(r=i.time),s=i.duration,o=i.stick,delete i.start,delete i.time,delete i.duration,delete i.stick),null==r&&(r=n.data(a+"start")),null==r&&(r=n.data(a+"time")),null==s&&(s=n.data(a+"duration")),null==o&&(o=n.data(a+"stick")),r=null!=r?e.duration(r):null,s=null!=s?e.duration(s):null,o=Boolean(o),{eventProps:i,startTime:r,duration:s,stick:o}}function yt(t,e){var n,i;for(n=0;n<e.length;n++)if(i=e[n],i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0;return!1}function bt(t,e){return t.leftCol-e.leftCol}function wt(t){var e,n,i;if(t.sort(mt),e=_t(t),Dt(e),n=e[0]){for(i=0;i<n.length;i++)St(n[i]);for(i=0;i<n.length;i++)Tt(n[i],0,0)}}function _t(t){var e,n,i,r=[];for(e=0;e<t.length;e++){for(n=t[e],i=0;i<r.length&&Et(n,r[i]).length;i++);n.level=i,(r[i]||(r[i]=[])).push(n)}return r}function Dt(t){var e,n,i,r,s;for(e=0;e<t.length;e++)for(n=t[e],i=0;i<n.length;i++)for(r=n[i],r.forwardSegs=[],s=e+1;s<t.length;s++)Et(r,t[s],r.forwardSegs)}function St(t){var e,n,i=t.forwardSegs,r=0;if(void 0===t.forwardPressure){for(e=0;e<i.length;e++)n=i[e],St(n),r=Math.max(r,1+n.forwardPressure);t.forwardPressure=r}}function Tt(t,e,n){var i,r=t.forwardSegs;if(void 0===t.forwardCoord)for(r.length?(r.sort(Ct),Tt(r[0],e+1,n),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;i<r.length;i++)Tt(r[i],0,t.forwardCoord)}function Et(t,e,n){n=n||[];for(var i=0;i<e.length;i++)xt(t,e[i])&&n.push(e[i]);return n}function xt(t,e){return t.bottom>e.top&&t.top<e.bottom}function Ct(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||mt(t,e)}function kt(n,i){function r(){V?a()&&(c(),l()):s()}function s(){j=U.theme?"ui":"fc",n.addClass("fc"),U.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),U.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),V=t("<div class='fc-view-container'/>").prependTo(n),N=I.header=new Ft(I,U),B=N.render(),B&&n.prepend(B),l(U.defaultView),U.handleWindowResize&&(X=Z(h,U.windowResizeDelay),t(window).resize(X))}function o(){W&&W.removeElement(),N.destroy(),V.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),X&&t(window).unbind("resize",X)}function a(){return n.is(":visible")}function l(e){it++,W&&e&&W.type!==e&&(N.deactivateButton(W.type),$(),W.removeElement(),W=I.view=null),!W&&e&&(W=I.view=nt[e]||(nt[e]=I.instantiateView(e)),W.setElement(t("<div class='fc-view fc-"+e+"-view' />").appendTo(V)),N.activateButton(e)),W&&(J=W.massageCurrentDate(J),W.isDisplayed&&J.isWithin(W.intervalStart,W.intervalEnd)||a()&&($(),W.display(J),O(),w(),_(),m())),O(),it--}function u(t){return a()?(t&&d(),it++,W.updateSize(!0),it--,!0):void 0}function c(){a()&&d()}function d(){Q="number"==typeof U.contentHeight?U.contentHeight:"number"==typeof U.height?U.height-(B?B.outerHeight(!0):0):Math.round(V.width()/Math.max(U.aspectRatio,.5))}function h(t){!it&&t.target===window&&W.start&&u(!0)&&W.trigger("windowResize",et)}function f(){g(),v()}function p(){a()&&($(),W.displayEvents(rt),O())}function g(){$(),W.clearEvents(),O()}function m(){!U.lazyFetching||K(W.start,W.end)?v():p()}function v(){tt(W.start,W.end)}function y(t){rt=t,p()}function b(){p()}function w(){N.updateTitle(W.title)}function _(){var t=I.getNow();t.isWithin(W.intervalStart,W.intervalEnd)?N.disableButton("today"):N.enableButton("today")}function D(t,e){t=I.moment(t),e=e?I.moment(e):t.hasTime()?t.clone().add(I.defaultTimedEventDuration):t.clone().add(I.defaultAllDayEventDuration),W.select({start:t,end:e})}function S(){W&&W.unselect()}function T(){J=W.computePrevDate(J),l()}function E(){J=W.computeNextDate(J),l()}function x(){J.add(-1,"years"),l()}function C(){J.add(1,"years"),l()}function k(){J=I.getNow(),l()}function M(t){J=I.moment(t),l()}function R(t){J.add(e.duration(t)),l()}function F(t,e){var n;e=e||"day",n=I.getViewSpec(e)||I.getUnitViewSpec(e),J=t,l(n?n.type:null)}function H(){return J.clone()}function $(){V.css({width:"100%",height:V.height(),overflow:"hidden"})}function O(){V.css({width:"",height:"",overflow:""})}function A(){return I}function L(){return W}function P(t,e){return void 0===e?U[t]:void(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(U[t]=e,u(!0)))}function z(t,e){return U[t]?U[t].apply(e||et,Array.prototype.slice.call(arguments,2)):void 0}var I=this;I.initOptions(i||{});var U=this.options;I.render=r,I.destroy=o,I.refetchEvents=f,I.reportEvents=y,I.reportEventChange=b,I.rerenderEvents=p,I.changeView=l,I.select=D,I.unselect=S,I.prev=T,I.next=E,I.prevYear=x,I.nextYear=C,I.today=k,I.gotoDate=M,I.incrementDate=R,I.zoomTo=F,I.getDate=H,I.getCalendar=A,I.getView=L,I.option=P,I.trigger=z;var q=Y(Rt(U.lang));if(U.monthNames&&(q._months=U.monthNames),U.monthNamesShort&&(q._monthsShort=U.monthNamesShort),U.dayNames&&(q._weekdays=U.dayNames),U.dayNamesShort&&(q._weekdaysShort=U.dayNamesShort),null!=U.firstDay){var G=Y(q._week);G.dow=U.firstDay,q._week=G}q._fullCalendar_weekCalc=function(t){return"function"==typeof t?t:"local"===t?t:"iso"===t||"ISO"===t?"ISO":void 0}(U.weekNumberCalculation),I.defaultAllDayEventDuration=e.duration(U.defaultAllDayEventDuration),I.defaultTimedEventDuration=e.duration(U.defaultTimedEventDuration),I.moment=function(){var t;return"local"===U.timezone?(t=Ot.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===U.timezone?Ot.moment.utc.apply(null,arguments):Ot.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=q:t._lang=q,t},I.getIsAmbigTimezone=function(){return"local"!==U.timezone&&"UTC"!==U.timezone},I.rezoneDate=function(t){return I.moment(t.toArray())},I.getNow=function(){var t=U.now;return"function"==typeof t&&(t=t()),I.moment(t)},I.getEventEnd=function(t){return t.end?t.end.clone():I.getDefaultEventEnd(t.allDay,t.start)},I.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(I.defaultAllDayEventDuration):n.add(I.defaultTimedEventDuration),I.getIsAmbigTimezone()&&n.stripZone(),n},I.humanizeDuration=function(t){return(t.locale||t.lang).call(t,U.lang).humanize()},Ht.call(I,U);var N,B,V,j,W,Q,X,J,K=I.isFetchNeeded,tt=I.fetchEvents,et=n[0],nt={},it=0,rt=[];J=null!=U.defaultDate?I.moment(U.defaultDate):I.getNow(),I.getSuggestedViewHeight=function(){return void 0===Q&&c(),Q},I.isHeightAuto=function(){return"auto"===U.contentHeight||"auto"===U.height}}function Mt(e){t.each(he,function(t,n){null==e[t]&&(e[t]=n(e))})}function Rt(t){var n=e.localeData||e.langData;return n.call(e,t)||n.call(e,"en")}function Ft(e,n){function i(){var e=n.header;return f=n.theme?"ui":"fc",e?p=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function r(){p.remove()}function s(i){var r=t('<div class="fc-'+i+'"/>'),s=n.header[i];return s&&t.each(s.split(" "),function(i){var s,o=t(),a=!0;t.each(this.split(","),function(i,r){var s,l,u,c,d,h,p,m,v;"title"==r?(o=o.add(t("<h2>&nbsp;</h2>")),a=!1):(s=e.getViewSpec(r),s?(l=function(){e.changeView(r)},g.push(r),u=s.buttonTextOverride,c=s.buttonTextDefault):e[r]&&(l=function(){e[r]()},u=(e.overrides.buttonText||{})[r],c=n.buttonText[r]),l&&(d=n.themeButtonIcons[r],h=n.buttonIcons[r],p=u?q(u):d&&n.theme?"<span class='ui-icon ui-icon-"+d+"'></span>":h&&!n.theme?"<span class='fc-icon fc-icon-"+h+"'></span>":q(c),m=["fc-"+r+"-button",f+"-button",f+"-state-default"],v=t('<button type="button" class="'+m.join(" ")+'">'+p+"</button>").click(function(){v.hasClass(f+"-state-disabled")||(l(),(v.hasClass(f+"-state-active")||v.hasClass(f+"-state-disabled"))&&v.removeClass(f+"-state-hover"))}).mousedown(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){v.removeClass(f+"-state-down")}).hover(function(){v.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){v.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),o=o.add(v)))}),a&&o.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),o.length>1?(s=t("<div/>"),a&&s.addClass("fc-button-group"),s.append(o),r.append(s)):r.append(o)}),r}function o(t){p.find("h2").text(t)}function a(t){p.find(".fc-"+t+"-button").addClass(f+"-state-active")}function l(t){p.find(".fc-"+t+"-button").removeClass(f+"-state-active")}function u(t){p.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")}function c(t){p.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")}function d(){return g}var h=this;h.render=i,h.destroy=r,h.updateTitle=o,h.activateButton=a,h.deactivateButton=l,h.disableButton=u,h.enableButton=c,h.getViewsWithButtons=d;var f,p=t(),g=[]}function Ht(n){function i(t,e){return!N||t.clone().stripZone()<N.clone().stripZone()||e.clone().stripZone()>B.clone().stripZone()}function r(t,e){N=t,B=e,tt=[];var n=++X,i=Q.length;J=i;for(var r=0;i>r;r++)s(Q[r],n)}function s(e,n){o(e,function(i){var r,s,o,a=t.isArray(e.events);if(n==X){if(i)for(r=0;r<i.length;r++)s=i[r],o=a?s:w(s,e),o&&tt.push.apply(tt,E(o));J--,J||W(tt)}})}function o(e,i){var r,s,a=Ot.sourceFetchers;for(r=0;r<a.length;r++){if(s=a[r].call(G,e,N.clone(),B.clone(),n.timezone,i),s===!0)return;if("object"==typeof s)return void o(s,i)}var l=e.events;if(l)t.isFunction(l)?(y(),l.call(G,N.clone(),B.clone(),n.timezone,function(t){i(t),b()})):t.isArray(l)?i(l):i();else{var u=e.url;if(u){var c,d=e.success,h=e.error,f=e.complete;c=t.isFunction(e.data)?e.data():e.data;var p=t.extend({},c||{}),g=U(e.startParam,n.startParam),m=U(e.endParam,n.endParam),v=U(e.timezoneParam,n.timezoneParam);g&&(p[g]=N.format()),m&&(p[m]=B.format()),n.timezone&&"local"!=n.timezone&&(p[v]=n.timezone),y(),t.ajax(t.extend({},fe,e,{data:p,success:function(e){e=e||[];var n=I(d,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){I(h,this,arguments),i()},complete:function(){I(f,this,arguments),b()}}))}else i()}}function a(t){var e=l(t);e&&(Q.push(e),J++,s(e,X))}function l(e){var n,i,r=Ot.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],t.isArray(n.events)&&(n.origArray=n.events,n.events=t.map(n.events,function(t){return w(t,n)})),i=0;i<r.length;i++)r[i].call(G,n);return n}}function u(e){Q=t.grep(Q,function(t){return!c(t,e)}),tt=t.grep(tt,function(t){return!c(t.source,e)}),W(tt)}function c(t,e){return t&&e&&d(t)==d(e)}function d(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function h(t){t.start=G.moment(t.start),t.end?t.end=G.moment(t.end):t.end=null,x(t,f(t)),W(tt)}function f(e){var n={};return t.each(e,function(t,e){p(t)&&void 0!==e&&z(e)&&(n[t]=e)}),n}function p(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function g(t,e){var n,i,r,s=w(t);if(s){for(n=E(s),i=0;i<n.length;i++)r=n[i],r.source||(e&&(Z.events.push(r),r.source=Z),tt.push(r));return W(tt),n}return[]}function m(e){var n,i;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),tt=t.grep(tt,e,!0),i=0;i<Q.length;i++)t.isArray(Q[i].events)&&(Q[i].events=t.grep(Q[i].events,e,!0));W(tt)}function v(e){return t.isFunction(e)?t.grep(tt,e):null!=e?(e+="",t.grep(tt,function(t){return t._id==e})):tt}function y(){K++||V("loading",null,!0,j())}function b(){--K||V("loading",null,!1,j())}function w(i,r){var s,o,a,l={};if(n.eventDataTransform&&(i=n.eventDataTransform(i)),r&&r.eventDataTransform&&(i=r.eventDataTransform(i)),t.extend(l,i),r&&(l.source=r),l._id=i._id||(void 0===i.id?"_fc"+pe++:i.id+""),i.className?"string"==typeof i.className?l.className=i.className.split(/\s+/):l.className=i.className:l.className=[],s=i.start||i.date,o=i.end,O(s)&&(s=e.duration(s)),O(o)&&(o=e.duration(o)),i.dow||e.isDuration(s)||e.isDuration(o))l.start=s?e.duration(s):null,l.end=o?e.duration(o):null,l._recurring=!0;else{if(s&&(s=G.moment(s),!s.isValid()))return!1;o&&(o=G.moment(o),o.isValid()||(o=null)),a=i.allDay,void 0===a&&(a=U(r?r.allDayDefault:void 0,n.allDayDefault)),_(s,o,a,l)}return l}function _(t,e,n,i){i.start=t,i.end=e,i.allDay=n,D(i),$t(i)}function D(t){S(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(n.forceEventDuration?t.end=G.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function S(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=G.rezoneDate(t.start)),t.end&&!t.end.hasTime()&&(t.end=G.rezoneDate(t.end)))}function T(e){var n;return e.end||(n=e.allDay,null==n&&(n=!e.start.hasTime()),e=t.extend({},e),e.end=G.getDefaultEventEnd(n,e.start)),e}function E(e,n,i){var r,s,o,a,l,u,c,d,h,f=[];if(n=n||N,i=i||B,e)if(e._recurring){if(s=e.dow)for(r={},o=0;o<s.length;o++)r[s[o]]=!0;for(a=n.clone().stripTime();a.isBefore(i);)(!r||r[a.day()])&&(l=e.start,u=e.end,c=a.clone(),d=null,l&&(c=c.time(l)),u&&(d=a.clone().time(u)),h=t.extend({},e),_(c,d,!l&&!u,h),f.push(h)),a.add(1,"days")}else f.push(e);return f}function x(e,n,i){function r(t,e){return i?M(t,e,i):n.allDay?k(t,e):C(t,e)}var s,o,a,l,u,c,d={};return n=n||{},n.start||(n.start=e.start.clone()),void 0===n.end&&(n.end=e.end?e.end.clone():null),null==n.allDay&&(n.allDay=e.allDay),D(n),s={start:e._start.clone(),end:e._end?e._end.clone():G.getDefaultEventEnd(e._allDay,e._start),allDay:n.allDay},D(s),o=null!==e._end&&null===n.end,a=r(n.start,s.start),n.end?(l=r(n.end,s.end),u=l.subtract(a)):u=null,t.each(n,function(t,e){p(t)&&void 0!==e&&(d[t]=e)}),c=R(v(e._id),o,n.allDay,a,u,d),{dateDelta:a,durationDelta:u,undo:c}}function R(e,n,i,r,s,o){var a=G.getIsAmbigTimezone(),l=[];return r&&!r.valueOf()&&(r=null),s&&!s.valueOf()&&(s=null),t.each(e,function(e,u){var c,d;c={start:u.start.clone(),end:u.end?u.end.clone():null,allDay:u.allDay},t.each(o,function(t){c[t]=u[t]}),d={start:u._start,end:u._end,allDay:i},D(d),n?d.end=null:s&&!d.end&&(d.end=G.getDefaultEventEnd(d.allDay,d.start)),r&&(d.start.add(r),d.end&&d.end.add(r)),s&&d.end.add(s),a&&!d.allDay&&(r||s)&&(d.start.stripZone(),d.end&&d.end.stripZone()),t.extend(u,o,d),$t(u),l.push(function(){t.extend(u,c),$t(u)})}),function(){for(var t=0;t<l.length;t++)l[t]()}}function F(e){var i,r=n.businessHours,s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},o=G.getView();return r&&(i=t.extend({},s,"object"==typeof r?r:{})),i?(e&&(i.start=null,i.end=null),E(w(i),o.start,o.end)):[]}function H(t,e){var i=e.source||{},r=U(e.constraint,i.constraint,n.eventConstraint),s=U(e.overlap,i.overlap,n.eventOverlap);return t=T(t),A(t,r,s,e)}function $(t){return A(t,n.selectConstraint,n.selectOverlap)}function Y(e,n){var i,r;return n&&(i=t.extend({},n,e),r=E(w(i))[0]),r?H(e,r):(e=T(e),$(e))}function A(e,n,i,r){var s,o,a,l,u,c;if(e=t.extend({},e),e.start=e.start.clone().stripZone(),e.end=e.end.clone().stripZone(),null!=n){for(s=L(n),o=!1,l=0;l<s.length;l++)if(P(s[l],e)){o=!0;break}if(!o)return!1}for(a=G.getPeerEvents(r,e),l=0;l<a.length;l++)if(u=a[l],q(u,e)){if(i===!1)return!1;if("function"==typeof i&&!i(u,r))return!1;if(r){if(c=U(u.overlap,(u.source||{}).overlap),c===!1)return!1;if("function"==typeof c&&!c(r,u))return!1}}return!0}function L(t){return"businessHours"===t?F():"object"==typeof t?E(w(t)):v(t)}function P(t,e){var n=t.start.clone().stripZone(),i=G.getEventEnd(t).stripZone();return e.start>=n&&e.end<=i}function q(t,e){var n=t.start.clone().stripZone(),i=G.getEventEnd(t).stripZone();return e.start<i&&e.end>n}var G=this;G.isFetchNeeded=i,G.fetchEvents=r,G.addEventSource=a,G.removeEventSource=u,G.updateEvent=h,G.renderEvent=g,G.removeEvents=m,G.clientEvents=v,G.mutateEvent=x,G.normalizeEventRange=D,G.normalizeEventRangeTimes=S,G.ensureVisibleEventRange=T;var N,B,V=G.trigger,j=G.getView,W=G.reportEvents,Z={events:[]},Q=[Z],X=0,J=0,K=0,tt=[];t.each((n.events?[n.events]:[]).concat(n.eventSources||[]),function(t,e){var n=l(e);n&&Q.push(n)}),G.getBusinessHoursEvents=F,G.isEventRangeAllowed=H,G.isSelectionRangeAllowed=$,G.isExternalDropRangeAllowed=Y,G.getEventCache=function(){return tt}}function $t(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var Ot=t.fullCalendar={version:"2.3.1"},Yt=Ot.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(r,s){var o,a=t(s),l=a.data("fullCalendar");"string"==typeof e?l&&t.isFunction(l[e])&&(o=l[e].apply(l,n),r||(i=o),"destroy"===e&&a.removeData("fullCalendar")):l||(l=new Ot.CalendarBase(a,e),a.data("fullCalendar",l),l.render())}),i};var At=["header","buttonText","buttonIcons","themeButtonIcons"];Ot.intersectionToSeg=x,Ot.applyAll=I,Ot.debounce=Z,Ot.isInt=j,Ot.htmlEscape=q,Ot.cssToStr=N,Ot.proxy=W,Ot.getClientRect=g,Ot.getContentRect=m,Ot.getScrollbarWidths=v;var Lt=null;Ot.computeIntervalUnit=R,Ot.durationHasTime=H;var Pt,zt,It,Ut=["sun","mon","tue","wed","thu","fri","sat"],qt=["year","month","week","day","hour","minute","second","millisecond"],Gt={}.hasOwnProperty,Nt=/^\s*\d{4}-\d\d$/,Bt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Vt=e.fn,jt=t.extend({},Vt);Ot.moment=function(){return Q(arguments)},Ot.moment.utc=function(){var t=Q(arguments,!0);return t.hasTime()&&t.utc(),t},Ot.moment.parseZone=function(){return Q(arguments,!0,!0)},Vt.clone=function(){var t=jt.clone.apply(this,arguments);return J(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},Vt.week=Vt.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?jt.isoWeek.apply(this,arguments):jt.week.apply(this,arguments)},Vt.time=function(t){if(!this._fullCalendar)return jt.time.apply(this,arguments);if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Vt.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),zt(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Vt.hasTime=function(){return!this._ambigTime},Vt.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),zt(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},Vt.hasZone=function(){return!this._ambigZone},Vt.local=function(){var t=this.toArray(),e=this._ambigZone;return jt.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&It(this,t),this},Vt.utc=function(){return jt.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},t.each(["zone","utcOffset"],function(t,e){jt[e]&&(Vt[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),jt[e].apply(this,arguments)})}),Vt.format=function(){return this._fullCalendar&&arguments[0]?et(this,arguments[0]):this._ambigTime?tt(this,"YYYY-MM-DD"):this._ambigZone?tt(this,"YYYY-MM-DD[T]HH:mm:ss"):jt.format.apply(this,arguments)},Vt.toISOString=function(){return this._ambigTime?tt(this,"YYYY-MM-DD"):this._ambigZone?tt(this,"YYYY-MM-DD[T]HH:mm:ss"):jt.toISOString.apply(this,arguments)},Vt.isWithin=function(t,e){var n=X([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},Vt.isSame=function(t,e){var n;return this._fullCalendar?e?(n=X([this,t],!0),jt.isSame.call(n[0],n[1],e)):(t=Ot.moment.parseZone(t),jt.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):jt.isSame.apply(this,arguments)},t.each(["isBefore","isAfter"],function(t,e){Vt[e]=function(t,n){var i;return this._fullCalendar?(i=X([this,t]),jt[e].call(i[0],i[1],n)):jt[e].apply(this,arguments)}}),Pt="_d"in e()&&"updateOffset"in e,zt=Pt?function(t,n){t._d.setTime(Date.UTC.apply(Date,n)),e.updateOffset(t,!1)}:K,It=Pt?function(t,n){t._d.setTime(+new Date(n[0]||0,n[1]||0,n[2]||0,n[3]||0,n[4]||0,n[5]||0,n[6]||0)),e.updateOffset(t,!1)}:K;var Wt={t:function(t){return tt(t,"a").charAt(0)},T:function(t){return tt(t,"A").charAt(0)}};Ot.formatRange=rt;var Zt={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},Qt={};Ot.Class=ut,ut.extend=function(t){var e,n=this;return t=t||{},P(t,"constructor")&&(e=t.constructor),"function"!=typeof e&&(e=t.constructor=function(){n.apply(this,arguments)}),e.prototype=Y(n.prototype),A(t,e.prototype),L(t,e.prototype),A(n,e),e},ut.mixin=function(t){A(t.prototype||t,this.prototype)};var Xt=ut.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,n=this.options;this.el=t('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),n.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=W(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,n,i,r,s,o=this.options,a=this.el.offsetParent().offset(),l=this.el.outerWidth(),u=this.el.outerHeight(),c=t(window),d=f(this.el);r=o.top||0,s=void 0!==o.left?o.left:void 0!==o.right?o.right-l:0,d.is(window)||d.is(document)?(d=c,e=0,n=0):(i=d.offset(),e=i.top,n=i.left),e+=c.scrollTop(),n+=c.scrollLeft(),o.viewportConstrain!==!1&&(r=Math.min(r,e+d.outerHeight()-u-this.margin),r=Math.max(r,e+this.margin),s=Math.min(s,n+d.outerWidth()-l-this.margin),s=Math.max(s,n+this.margin)),this.el.css({top:r-a.top,left:s-a.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),Jt=ut.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(t){this.grid=t},build:function(){this.rowCoords=this.grid.computeRowCoords(),this.colCoords=this.grid.computeColCoords(),this.computeBounds()},clear:function(){this.rowCoords=null,this.colCoords=null},getCell:function(e,n){var i,r,s,o=this.rowCoords,a=o.length,l=this.colCoords,u=l.length,c=null,d=null;if(this.inBounds(e,n)){for(i=0;a>i;i++)if(r=o[i],n>=r.top&&n<r.bottom){c=i;break}for(i=0;u>i;i++)if(r=l[i],e>=r.left&&e<r.right){d=i;break}if(null!==c&&null!==d)return s=this.grid.getCell(c,d),s.grid=this.grid,t.extend(s,o[c],l[d]),s}return null},computeBounds:function(){this.bounds=this.containerEl?g(this.containerEl):null},inBounds:function(t,e){var n=this.bounds;return n?t>=n.left&&t<n.right&&e>=n.top&&e<n.bottom:!0}}),Kt=ut.extend({coordMaps:null,constructor:function(t){this.coordMaps=t},build:function(){var t,e=this.coordMaps;for(t=0;t<e.length;t++)e[t].build()},getCell:function(t,e){var n,i=this.coordMaps,r=null;for(n=0;n<i.length&&!r;n++)r=i[n].getCell(t,e);return r},clear:function(){var t,e=this.coordMaps;for(t=0;t<e.length;t++)e[t].clear()}}),te=Ot.DragListener=ut.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl},mousedown:function(t){_(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var n;this.isListening||(e&&this.options.scroll&&(n=f(t(e.target)),n.is(window)||n.is(document)||(this.scrollEl=n,this.scrollHandlerProxy=Z(W(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),t(document).on("mousemove",this.mousemoveProxy=W(this,"mousemove")).on("mouseup",this.mouseupProxy=W(this,"mouseup")).on("selectstart",this.preventDefault),
e?(this.originX=e.pageX,this.originY=e.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(e))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,n,i=t.pageX-this.originX,r=t.pageY-this.originY;this.isDragging||(e=this.options.distance||1,n=i*i+r*r,n>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(i,r,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,n){this.trigger("drag",t,e,n),this.updateScroll(n)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(e){this.stopDrag(e),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(e))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?p(t):null},updateScroll:function(t){var e,n,i,r,s=this.scrollSensitivity,o=this.scrollBounds,a=0,l=0;o&&(e=(s-(t.pageY-o.top))/s,n=(s-(o.bottom-t.pageY))/s,i=(s-(t.pageX-o.left))/s,r=(s-(o.right-t.pageX))/s,e>=0&&1>=e?a=e*this.scrollSpeed*-1:n>=0&&1>=n&&(a=n*this.scrollSpeed),i>=0&&1>=i?l=i*this.scrollSpeed*-1:r>=0&&1>=r&&(l=r*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(W(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),ee=te.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(t,e){te.prototype.constructor.call(this,e),this.coordMap=t},listenStart:function(t){var e,n,i,r=this.subjectEl;te.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(n={left:t.pageX,top:t.pageY},i=n,r&&(e=p(r),i=S(i,e)),this.origCell=this.getCell(i.left,i.top),r&&this.options.subjectCenter&&(this.origCell&&(e=D(this.origCell,e)||e),i=T(e)),this.coordAdjust=E(i,n)):(this.origCell=null,this.coordAdjust=null)},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},dragStart:function(t){var e;te.prototype.dragStart.apply(this,arguments),e=this.getCell(t.pageX,t.pageY),e&&this.cellOver(e)},drag:function(t,e,n){var i;te.prototype.drag.apply(this,arguments),i=this.getCell(n.pageX,n.pageY),ct(i,this.cell)||(this.cell&&this.cellOut(),i&&this.cellOver(i))},dragStop:function(){this.cellDone(),te.prototype.dragStop.apply(this,arguments)},cellOver:function(t){this.cell=t,this.trigger("cellOver",t,ct(t,this.origCell),this.origCell)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cellDone(),this.cell=null)},cellDone:function(){this.cell&&this.trigger("cellDone",this.cell)},listenStop:function(){te.prototype.listenStop.apply(this,arguments),this.origCell=this.cell=null,this.coordMap.clear()},scrollStop:function(){te.prototype.scrollStop.apply(this,arguments),this.computeCoords()},getCell:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.coordMap.getCell(t,e)}}),ne=ut.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,n){this.options=n=n||{},this.sourceEl=e,this.parentEl=n.parentEl?t(n.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=W(this,"mousemove")))},stop:function(e,n){function i(){this.isAnimating=!1,r.destroyEl(),this.top0=this.left0=null,n&&n()}var r=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),ie=ut.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL")},rowHtml:function(t,e){var n,i,r=this.getHtmlRenderer("cell",t),s="";for(e=e||0,n=0;n<this.colCnt;n++)i=this.getCell(e,n),s+=r(i);return s=this.bookendCells(s,t,e),"<tr>"+s+"</tr>"},bookendCells:function(t,e,n){var i=this.getHtmlRenderer("intro",e)(n||0),r=this.getHtmlRenderer("outro",e)(n||0),s=this.isRTL?r:i,o=this.isRTL?i:r;return"string"==typeof t?s+t+o:t.prepend(s).append(o)},getHtmlRenderer:function(t,e){var n,i,r,s,o=this.view;return n=t+"Html",e&&(i=e+B(t)+"Html"),i&&(s=o[i])?r=o:i&&(s=this[i])?r=this:(s=o[n])?r=o:(s=this[n])&&(r=this),"function"==typeof s?function(){return s.apply(r,arguments)||""}:function(){return s||""}}}),re=Ot.Grid=ie.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){ie.apply(this,arguments),this.coordMap=new Jt(this),this.elsByFill={},this.externalDragStartProxy=W(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){var e,n,i=this.view;this.start=t.start.clone(),this.end=t.end.clone(),this.rowData=[],this.colData=[],this.updateCells(),this.colHeadFormat=i.opt("columnFormat")||this.computeColHeadFormat(),this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),e=i.opt("displayEventTime"),null==e&&(e=this.computeDisplayEventTime()),n=i.opt("displayEventEnd"),null==n&&(n=this.computeDisplayEventEnd()),this.displayEventTime=e,this.displayEventEnd=n},updateCells:function(){},rangeToSegs:function(t){},diffDates:function(t,e){return this.largeUnit?M(t,e,this.largeUnit):C(t,e)},getCell:function(e,n){var i;return null==n&&("number"==typeof e?(n=e%this.colCnt,e=Math.floor(e/this.colCnt)):(n=e.col,e=e.row)),i={row:e,col:n},t.extend(i,this.getRowData(e),this.getColData(n)),t.extend(i,this.computeCellRange(i)),i},computeCellRange:function(t){var e=this.computeCellDate(t);return{start:e,end:e.clone().add(this.cellDuration)}},computeCellDate:function(t){},getRowData:function(t){return this.rowData[t]||{}},getColData:function(t){return this.colData[t]||{}},getRowEl:function(t){},getColEl:function(t){},getCellDayEl:function(t){return this.getColEl(t.col)||this.getRowEl(t.row)},computeRowCoords:function(){var t,e,n,i=[];for(t=0;t<this.rowCnt;t++)e=this.getRowEl(t),n=e.offset().top,i.push({top:n,bottom:n+e.outerHeight()});return i},computeColCoords:function(){var t,e,n,i=[];for(t=0;t<this.colCnt;t++)e=this.getColEl(t),n=e.offset().left,i.push({left:n,right:n+e.outerWidth()});return i},setElement:function(e){var n=this;this.el=e,e.on("mousedown",function(e){t(e.target).is(".fc-event-container *, .fc-more")||t(e.target).closest(".fc-popover").length||n.dayMousedown(e)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},destroyDates:function(){},bindGlobalHandlers:function(){t(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){t(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var e,n,i=this,r=this.view,s=r.opt("selectable"),l=new ee(this.coordMap,{scroll:r.opt("dragScroll"),dragStart:function(){r.unselect()},cellOver:function(t,r,a){a&&(e=r?t:null,s&&(n=i.computeSelection(a,t),n?i.renderSelection(n):o()))},cellOut:function(t){e=null,n=null,i.destroySelection(),a()},listenStop:function(t){e&&r.trigger("dayClick",i.getCellDayEl(e),e.start,t),n&&r.reportSelection(n,t),a()}});l.mousedown(t)},renderRangeHelper:function(t,e){var n=this.fabricateHelperEvent(t,e);this.renderHelper(n,e)},fabricateHelperEvent:function(t,e){var n=e?Y(e.event):{};return n.start=t.start.clone(),n.end=t.end?t.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventRange(n),n.className=(n.className||[]).concat("fc-helper"),e||(n.editable=!1),n},renderHelper:function(t,e){},destroyHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(t,e){var n,i=[t.start,t.end,e.start,e.end];return i.sort(V),n={start:i[0].clone(),end:i[3].clone()},this.view.calendar.isSelectionRangeAllowed(n)?n:null},renderHighlight:function(t){this.renderFill("highlight",this.rangeToSegs(t))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(t,e){},destroyFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(e,n){var i,r=this,s=this[e+"SegEl"],o="",a=[];if(n.length){for(i=0;i<n.length;i++)o+=this.fillSegHtml(e,n[i]);t(o).each(function(e,i){var o=n[e],l=t(i);s&&(l=s.call(r,o,l)),l&&(l=t(l),l.is(r.fillSegTag)&&(o.el=l,a.push(o)))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var n=this[t+"SegClasses"],i=this[t+"SegCss"],r=n?n.call(this,e):[],s=N(i?i.call(this,e):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(t){var e=this.view,n=t.start;return'<th class="fc-day-header '+e.widgetHeaderClass+" fc-"+Ut[n.day()]+'">'+q(n.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(t){var e=this.view,n=t.start,i=this.getDayClasses(n);return i.unshift("fc-day",e.widgetContentClass),'<td class="'+i.join(" ")+'" data-date="'+n.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow().stripTime(),i=["fc-"+Ut[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today",e.highlightStateClass):n>t?i.push("fc-past"):i.push("fc-future"),i}});re.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,n,i=this.eventsToSegs(t),r=[],s=[];for(e=0;e<i.length;e++)n=i[e],dt(n.event)?r.push(n):s.push(n);r=this.renderBgSegs(r)||r,s=this.renderFgSegs(s)||s,this.segs=r.concat(s)},destroyEvents:function(){this.triggerSegMouseout(),this.destroyFgSegs(),this.destroyBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(t){},destroyFgSegs:function(){},renderFgSegEls:function(e,n){var i,r=this.view,s="",o=[];if(e.length){for(i=0;i<e.length;i++)s+=this.fgSegHtml(e[i],n);t(s).each(function(n,i){var s=e[n],a=r.resolveEventEl(s.event,t(i));a&&(a.data("fc-seg",s),s.el=a,o.push(s))})}return o},fgSegHtml:function(t,e){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,n=e.source||{};return["fc-bgevent"].concat(e.className,n.className||[])},bgEventSegCss:function(t){var e=this.view,n=t.event,i=n.source||{};return{"background-color":n.backgroundColor||n.color||i.backgroundColor||i.color||e.opt("eventBackgroundColor")||e.opt("eventColor")}},businessHoursSegClasses:function(t){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var e=this,n=this.view;t.each({mouseenter:function(t,n){e.triggerSegMouseover(t,n)},mouseleave:function(t,n){e.triggerSegMouseout(t,n)},click:function(t,e){return n.trigger("eventClick",this,t.event,e)},mousedown:function(i,r){t(r.target).is(".fc-resizer")&&n.isEventResizable(i.event)?e.segResizeMousedown(i,r,t(r.target).is(".fc-start-resizer")):n.isEventDraggable(i.event)&&e.segDragMousedown(i,r)}},function(n,i){e.el.on(n,".fc-event-container > *",function(n){var r=t(this).data("fc-seg");return!r||e.isDraggingSeg||e.isResizingSeg?void 0:i.call(this,r,n)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var n,i=this,r=this.view,s=r.calendar,l=t.el,u=t.event,c=new ne(t.el,{parentEl:r.el,opacity:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2}),d=new ee(r.coordMap,{distance:5,scroll:r.opt("dragScroll"),subjectEl:l,subjectCenter:!0,listenStart:function(t){c.hide(),c.start(t)},dragStart:function(e){i.triggerSegMouseout(t,e),i.segDragStart(t,e),r.hideEvent(u)},cellOver:function(e,a,l){t.cell&&(l=t.cell),n=i.computeEventDrop(l,e,u),n&&!s.isEventRangeAllowed(n,u)&&(o(),n=null),n&&r.renderDrag(n,t)?c.hide():c.show(),a&&(n=null)},cellOut:function(){r.destroyDrag(),c.show(),n=null},cellDone:function(){a()},dragStop:function(e){c.stop(!n,function(){r.destroyDrag(),r.showEvent(u),i.segDragStop(t,e),n&&r.reportEventDrop(u,n,this.largeUnit,l,e)})},listenStop:function(){c.stop()}});d.mousedown(e)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,n){var i,r,s=this.view.calendar,o=t.start,a=e.start;return o.hasTime()===a.hasTime()?(i=this.diffDates(a,o),n.allDay&&H(i)?(r={start:n.start.clone(),end:s.getEventEnd(n),allDay:!1},s.normalizeEventRangeTimes(r)):r={start:n.start.clone(),end:n.end?n.end.clone():null,allDay:n.allDay},r.start.add(i),r.end&&r.end.add(i)):r={start:a.clone(),end:null,allDay:!a.hasTime()},r},applyDragOpacity:function(t){var e=this.view.opt("dragOpacity");null!=e&&t.each(function(t,n){n.style.opacity=e})},externalDragStart:function(e,n){var i,r,s=this.view;s.opt("droppable")&&(i=t((n?n.item:null)||e.target),r=s.opt("dropAccept"),(t.isFunction(r)?r.call(i[0],i):i.is(r))&&(this.isDraggingExternal||this.listenToExternalDrag(i,e,n)))},listenToExternalDrag:function(t,e,n){var i,r,s=this,l=vt(t);i=new ee(this.coordMap,{listenStart:function(){s.isDraggingExternal=!0},cellOver:function(t){r=s.computeExternalDrop(t,l),r?s.renderDrag(r):o()},cellOut:function(){r=null,s.destroyDrag(),a()},dragStop:function(){s.destroyDrag(),a(),r&&s.view.reportExternalDrop(l,r,t,e,n)},listenStop:function(){s.isDraggingExternal=!1}}),i.startDrag(e)},computeExternalDrop:function(t,e){var n={start:t.start.clone(),end:null};return e.startTime&&!n.start.hasTime()&&n.start.time(e.startTime),e.duration&&(n.end=n.start.clone().add(e.duration)),this.view.calendar.isExternalDropRangeAllowed(n,e.eventProps)?n:null},renderDrag:function(t,e){},destroyDrag:function(){},segResizeMousedown:function(t,e,n){var i,r,s=this,l=this.view,u=l.calendar,c=t.el,d=t.event,h=u.getEventEnd(d);i=new ee(this.coordMap,{distance:5,scroll:l.opt("dragScroll"),subjectEl:c,dragStart:function(e){s.triggerSegMouseout(t,e),s.segResizeStart(t,e)},cellOver:function(e,i,a){r=n?s.computeEventStartResize(a,e,d):s.computeEventEndResize(a,e,d),r&&(u.isEventRangeAllowed(r,d)?r.start.isSame(d.start)&&r.end.isSame(h)&&(r=null):(o(),r=null)),r&&(l.hideEvent(d),s.renderEventResize(r,t))},cellOut:function(){r=null},cellDone:function(){s.destroyEventResize(),l.showEvent(d),a()},dragStop:function(e){s.segResizeStop(t,e),r&&l.reportEventResize(d,r,this.largeUnit,c,e)}}),i.mousedown(e)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,n){return this.computeEventResize("start",t,e,n)},computeEventEndResize:function(t,e,n){return this.computeEventResize("end",t,e,n)},computeEventResize:function(t,e,n,i){var r,s,o=this.view.calendar,a=this.diffDates(n[t],e[t]);return r={start:i.start.clone(),end:o.getEventEnd(i),allDay:i.allDay},r.allDay&&H(a)&&(r.allDay=!1,o.normalizeEventRangeTimes(r)),r[t].add(a),r.start.isBefore(r.end)||(s=i.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration,this.cellDuration&&this.cellDuration<s&&(s=this.cellDuration),"start"==t?r.start=r.end.clone().subtract(s):r.end=r.start.clone().add(s)),r},renderEventResize:function(t,e){},destroyEventResize:function(){},getEventTimeText:function(t,e,n){return null==e&&(e=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?n&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,n){var i=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return e&&r.push("fc-draggable"),n&&r.push("fc-resizable"),r},getEventSkinCss:function(t){var e=this.view,n=t.source||{},i=t.color,r=n.color,s=e.opt("eventColor");return{"background-color":t.backgroundColor||i||n.backgroundColor||r||e.opt("eventBackgroundColor")||s,"border-color":t.borderColor||i||n.borderColor||r||e.opt("eventBorderColor")||s,color:t.textColor||n.textColor||e.opt("eventTextColor")}},eventsToSegs:function(t,e){var n,i=this.eventsToRanges(t),r=[];for(n=0;n<i.length;n++)r.push.apply(r,this.eventRangeToSegs(i[n],e));return r},eventsToRanges:function(e){var n=this,i=pt(e),r=[];return t.each(i,function(t,e){e.length&&r.push.apply(r,ht(e[0])?n.eventsToInverseRanges(e):n.eventsToNormalRanges(e))}),r},eventsToNormalRanges:function(t){var e,n,i,r,s=this.view.calendar,o=[];for(e=0;e<t.length;e++)n=t[e],i=n.start.clone().stripZone(),r=s.getEventEnd(n).stripZone(),o.push({event:n,start:i,end:r,eventStartMS:+i,eventDurationMS:r-i});return o},eventsToInverseRanges:function(t){var e,n,i=this.view,r=i.start.clone().stripZone(),s=i.end.clone().stripZone(),o=this.eventsToNormalRanges(t),a=[],l=t[0],u=r;for(o.sort(gt),e=0;e<o.length;e++)n=o[e],n.start>u&&a.push({event:l,start:u,end:n.start}),u=n.end;return s>u&&a.push({event:l,start:u,end:s}),a},eventRangeToSegs:function(t,e){var n,i,r;for(n=e?e(t):this.rangeToSegs(t),i=0;i<n.length;i++)r=n[i],r.event=t.event,r.eventStartMS=t.eventStartMS,r.eventDurationMS=t.eventDurationMS;return n}}),Ot.compareSegs=mt,Ot.dataAttrPrefix="";var se=re.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){re.apply(this,arguments),this.cellDuration=e.duration(1,"day")},renderDates:function(t){var e,n,i,r=this.view,s=this.rowCnt,o=this.colCnt,a=s*o,l="";for(e=0;s>e;e++)l+=this.dayRowHtml(e,t);for(this.el.html(l),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),n=0;a>n;n++)i=this.getCell(n),r.trigger("dayRender",null,i.start,this.dayEls.eq(n))},destroyDates:function(){this.destroySegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},dayRowHtml:function(t,e){var n=this.view,i=["fc-row","fc-week",n.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(t){return this.bgCellHtml(t)},computeColHeadFormat:function(){return this.rowCnt>1?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var t,e,n,i;if(this.updateCellDates(),t=this.cellDates,this.breakOnWeeks){for(e=t[0].day(),i=1;i<t.length&&t[i].day()!=e;i++);n=Math.ceil(t.length/i)}else n=1,i=t.length;this.rowCnt=n,this.colCnt=i},updateCellDates:function(){for(var t=this.view,e=this.start.clone(),n=[],i=-1,r=[];e.isBefore(this.end);)t.isHiddenDay(e)?r.push(i+.5):(i++,r.push(i),n.push(e.clone())),e.add(1,"days");this.cellDates=n,this.dayToCellOffsets=r},computeCellDate:function(t){var e=this.colCnt,n=t.row*e+(this.isRTL?e-t.col-1:t.col);return this.cellDates[n].clone()},getRowEl:function(t){return this.rowEls.eq(t)},getColEl:function(t){return this.dayEls.eq(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.colCnt+t.col)},computeRowCoords:function(){var t=re.prototype.computeRowCoords.call(this);return t[t.length-1].bottom+=this.bottomCoordPadding,t},rangeToSegs:function(t){var e,n,i,r,s,o,a,l,u,c,d=this.isRTL,h=this.rowCnt,f=this.colCnt,p=[];for(t=this.view.computeDayRange(t),e=this.dateToCellOffset(t.start),n=this.dateToCellOffset(t.end.subtract(1,"days")),i=0;h>i;i++)r=i*f,s=r+f-1,l=Math.max(r,e),u=Math.min(s,n),l=Math.ceil(l),u=Math.floor(u),u>=l&&(o=l===e,a=u===n,l-=r,u-=r,c={row:i,isStart:o,isEnd:a},d?(c.leftCol=f-u-1,c.rightCol=f-l-1):(c.leftCol=l,c.rightCol=u),p.push(c));return p},dateToCellOffset:function(t){var e=this.dayToCellOffsets,n=t.diff(this.start,"days");return 0>n?e[0]-1:n>=e.length?e[e.length-1]+1:e[n]},renderDrag:function(t,e){return this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),e&&!e.el.closest(this.el).length?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEls),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderEventResize:function(t,e){this.renderHighlight(t),this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,n){var i,r=[],s=this.eventsToSegs([e]);s=this.renderFgSegEls(s),i=this.renderSegRows(s),this.rowEls.each(function(e,s){var o,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');o=n&&n.row===e?n.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",o).find("table").append(i[e].tbodyEl),a.append(l),r.push(l[0])}),this.helperEls=t(r)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,n,i){var r,s,o,a=[];for(n=this.renderFillSegEls(e,n),r=0;r<n.length;r++)s=n[r],o=this.renderFillRow(e,s,i),this.rowEls.eq(s.row).append(o),a.push(o[0]);return this.elsByFill[e]=t(a),n},renderFillRow:function(e,n,i){var r,s,o=this.colCnt,a=n.leftCol,l=n.rightCol+1;return i=i||e.toLowerCase(),r=t('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>'),s=r.find("tr"),a>0&&s.append('<td colspan="'+a+'"/>'),s.append(n.el.attr("colspan",l-a)),o>l&&s.append('<td colspan="'+(o-l)+'"/>'),this.bookendCells(s,e),r}});se.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover(),re.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return re.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var n=t.grep(e,function(t){return t.event.allDay});return re.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(e){var n;return e=this.renderFgSegEls(e),n=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,i){t(i).find(".fc-content-skeleton > table").append(n[e].tbodyEl)}),e},destroyFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,n,i=[];for(e=this.groupSegRows(t),n=0;n<e.length;n++)i.push(this.renderSegRow(n,e[n]));return i},fgSegHtml:function(t,e){var n,i,r=this.view,s=t.event,o=r.isEventDraggable(s),a=!e&&s.allDay&&t.isStart&&r.isEventResizableFromStart(s),l=!e&&s.allDay&&t.isEnd&&r.isEventResizableFromEnd(s),u=this.getSegClasses(t,o,a||l),c=N(this.getEventSkinCss(s)),d="";return u.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(n=this.getEventTimeText(s),n&&(d='<span class="fc-time">'+q(n)+"</span>")),i='<span class="fc-title">'+(q(s.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(s.url?' href="'+q(s.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(this.isRTL?i+" "+d:d+" "+i)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,n){function i(e){for(;e>o;)c=(v[r-1]||[])[o],c?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=t("<td/>"),a.append(c)),m[r][o]=c,v[r][o]=c,o++}var r,s,o,a,l,u,c,d=this.colCnt,h=this.buildSegLevels(n),f=Math.max(1,h.length),p=t("<tbody/>"),g=[],m=[],v=[];for(r=0;f>r;r++){if(s=h[r],o=0,a=t("<tr/>"),g.push([]),m.push([]),v.push([]),s)for(l=0;l<s.length;l++){for(u=s[l],i(u.leftCol),c=t('<td class="fc-event-container"/>').append(u.el),u.leftCol!=u.rightCol?c.attr("colspan",u.rightCol-u.leftCol+1):v[r][o]=c;o<=u.rightCol;)m[r][o]=c,g[r][o]=u,o++;a.append(c)}i(d),this.bookendCells(a,"eventSkeleton"),p.append(a)}return{row:e,tbodyEl:p,cellMatrix:m,segMatrix:g,segLevels:h,segs:n}},buildSegLevels:function(t){var e,n,i,r=[];for(t.sort(mt),e=0;e<t.length;e++){for(n=t[e],i=0;i<r.length&&yt(n,r[i]);i++);n.level=i,(r[i]||(r[i]=[])).push(n)}for(i=0;i<r.length;i++)r[i].sort(bt);return r},groupSegRows:function(t){var e,n=[];for(e=0;e<this.rowCnt;e++)n.push([]);for(e=0;e<t.length;e++)n[t[e].row].push(t[e]);return n}}),se.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,n,i=this.rowStructs||[];for(e=0;e<i.length;e++)this.unlimitRow(e),n=t?"number"==typeof t?t:this.computeRowLevelLimit(e):!1,n!==!1&&this.limitRow(e,n)},computeRowLevelLimit:function(e){function n(e,n){s=Math.max(s,t(n).outerHeight())}var i,r,s,o=this.rowEls.eq(e),a=o.height(),l=this.rowStructs[e].tbodyEl.children();for(i=0;i<l.length;i++)if(r=l.eq(i).removeClass("fc-limited"),s=0,r.find("> td > :first-child").each(n),r.position().top+s>a)return i;return!1},limitRow:function(e,n){function i(i){for(;i>S;)r=w.getCell(e,S),c=w.getCellSegs(r,n),c.length&&(f=o[n-1][S],b=w.renderMoreLink(r,c),y=t("<div/>").append(b),f.append(y),D.push(y[0])),S++}var r,s,o,a,l,u,c,d,h,f,p,g,m,v,y,b,w=this,_=this.rowStructs[e],D=[],S=0;if(n&&n<_.segLevels.length){for(s=_.segLevels[n-1],o=_.cellMatrix,a=_.tbodyEl.children().slice(n).addClass("fc-limited").get(),l=0;l<s.length;l++){for(u=s[l],i(u.leftCol),h=[],d=0;S<=u.rightCol;)r=this.getCell(e,S),c=this.getCellSegs(r,n),h.push(c),d+=c.length,S++;if(d){for(f=o[n-1][u.leftCol],p=f.attr("rowspan")||1,g=[],m=0;m<h.length;m++)v=t('<td class="fc-more-cell"/>').attr("rowspan",p),c=h[m],r=this.getCell(e,u.leftCol+m),b=this.renderMoreLink(r,[u].concat(c)),y=t("<div/>").append(b),v.append(y),g.push(v[0]),D.push(v[0]);f.addClass("fc-limited").after(t(g)),a.push(f[0])}}i(this.colCnt),_.moreEls=t(D),_.limitedEls=t(a)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,n){var i=this,r=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=r.opt("eventLimitClick"),a=e.start,l=t(this),u=i.getCellDayEl(e),c=i.getCellSegs(e),d=i.resliceDaySegs(c,a),h=i.resliceDaySegs(n,a);"function"==typeof o&&(o=r.trigger("eventLimitClick",null,{date:a,dayEl:u,moreEl:l,segs:d,hiddenSegs:h},s)),"popover"===o?i.showSegPopover(e,l,d):"string"==typeof o&&r.calendar.zoomTo(a,o)})},showSegPopover:function(t,e,n){var i,r,s=this,o=this.view,a=e.parent();i=1==this.rowCnt?o.el:this.rowEls.eq(t.row),r={className:"fc-more-popover",content:this.renderSegPopoverContent(t,n),parentEl:this.el,top:i.offset().top,autoHide:!0,viewportConstrain:o.opt("popoverViewportConstrain"),hide:function(){s.segPopover.destroy(),s.segPopover=null,s.popoverSegs=null}},this.isRTL?r.right=a.offset().left+a.outerWidth()+1:r.left=a.offset().left-1,this.segPopover=new Xt(r),this.segPopover.show()},renderSegPopoverContent:function(e,n){var i,r=this.view,s=r.opt("theme"),o=e.start.format(r.opt("dayPopoverFormat")),a=t('<div class="fc-header '+r.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+q(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+r.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,i=0;i<n.length;i++)n[i].cell=e,l.append(n[i].el);return a},resliceDaySegs:function(e,n){var i=t.map(e,function(t){return t.event}),r=n.clone().stripTime(),s=r.clone().add(1,"days"),o={start:r,end:s};return e=this.eventsToSegs(i,function(t){var e=x(t,o);return e?[e]:[]}),e.sort(mt),e},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e){for(var n,i=this.rowStructs[t.row].segMatrix,r=e||0,s=[];r<i.length;)n=i[r][t.col],n&&s.push(n),r++;return s}});var oe=re.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){re.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(t),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(t){return this.bgCellHtml(t)},slatRowHtml:function(){for(var t,n,i,r=this.view,s=this.isRTL,o="",a=this.slotDuration.asMinutes()%15===0,l=e.duration(+this.minTime);l<this.maxTime;)t=this.start.clone().time(l),n=t.minutes(),i='<td class="fc-axis fc-time '+r.widgetContentClass+'" '+r.axisStyleAttr()+">"+(a&&n?"":"<span>"+q(t.format(this.axisFormat))+"</span>")+"</td>",o+="<tr "+(n?'class="fc-minor"':"")+">"+(s?"":i)+'<td class="'+r.widgetContentClass+'"/>'+(s?i:"")+"</tr>",
l.add(this.slotDuration);return o},processOptions:function(){var t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=e.duration(n),i=i?e.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.cellDuration=i,this.minTime=e.duration(t.opt("minTime")),this.maxTime=e.duration(t.opt("maxTime")),this.axisFormat=t.opt("axisFormat")||t.opt("smallTimeFormat")},computeColHeadFormat:function(){return this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var t,e=this.view,n=[];for(t=this.start.clone();t.isBefore(this.end);)n.push({day:t.clone()}),t.add(1,"day"),t=e.skipHiddenDays(t);this.isRTL&&n.reverse(),this.colData=n,this.colCnt=n.length,this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(t){var e=this.computeSnapTime(t.row);return this.view.calendar.rezoneDate(t.day).time(e)},getColEl:function(t){return this.dayEls.eq(t)},computeSnapTime:function(t){return e.duration(this.minTime+this.snapDuration*t)},rangeToSegs:function(t){var e,n,i,r,s=this.colCnt,o=[];for(t={start:t.start.clone().stripZone(),end:t.end.clone().stripZone()},n=0;s>n;n++)i=this.colData[n].day,r={start:i.clone().time(this.minTime),end:i.clone().time(this.maxTime)},e=x(t,r),e&&(e.col=n,o.push(e));return o},updateSize:function(t){this.computeSlatTops(),t&&this.updateSegVerticals()},computeRowCoords:function(){var t,e,n=this.el.offset().top,i=[];for(t=0;t<this.rowCnt;t++)e={top:n+this.computeTimeTop(this.computeSnapTime(t))},t>0&&(i[t-1].bottom=e.top),i.push(e);return e.bottom=e.top+this.computeTimeTop(this.computeSnapTime(t)),i},computeDateTop:function(t,n){return this.computeTimeTop(e.duration(t.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(t){var e,n,i,r,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),n=s-e,i=this.slatTops[e],n?(r=this.slatTops[e+1],i+(r-i)*n):i},computeSlatTops:function(){var e,n=[];this.slatEls.each(function(i,r){e=t(r).position().top,n.push(e)}),n.push(e+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(t,e){return e?(this.renderRangeHelper(t,e),this.applyDragOpacity(this.helperEl),!0):void this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderEventResize:function(t,e){this.renderRangeHelper(t,e)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(e,n){var i,r,s,o,a=this.eventsToSegs([e]);for(a=this.renderFgSegEls(a),i=this.renderSegTable(a),r=0;r<a.length;r++)s=a[r],n&&n.col===s.col&&(o=n.el,s.el.css({left:o.css("left"),right:o.css("right"),"margin-left":o.css("margin-left"),"margin-right":o.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(i).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderRangeHelper(t):this.renderHighlight(t)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderFill:function(e,n,i){var r,s,o,a,l,u,c,d,h,f;if(n.length){for(n=this.renderFillSegEls(e,n),r=this.groupSegCols(n),i=i||e.toLowerCase(),s=t('<div class="fc-'+i+'-skeleton"><table><tr/></table></div>'),o=s.find("tr"),a=0;a<r.length;a++)if(l=r[a],u=t("<td/>").appendTo(o),l.length)for(c=t('<div class="fc-'+i+'-container"/>').appendTo(u),d=this.colData[a].day,h=0;h<l.length;h++)f=l[h],c.append(f.el.css({top:this.computeDateTop(f.start,d),bottom:-this.computeDateTop(f.end,d)}));this.bookendCells(o,e),this.el.append(s),this.elsByFill[e]=s}return n}});oe.mixin({eventSkeletonEl:null,renderFgSegs:function(e){return e=this.renderFgSegEls(e),this.el.append(this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(this.renderSegTable(e))),e},destroyFgSegs:function(t){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(e){var n,i,r,s,o,a,l=t("<table><tr/></table>"),u=l.find("tr");for(n=this.groupSegCols(e),this.computeSegVerticals(e),s=0;s<n.length;s++){for(o=n[s],wt(o),a=t('<div class="fc-event-container"/>'),i=0;i<o.length;i++)r=o[i],r.el.css(this.generateSegPositionCss(r)),r.bottom-r.top<30&&r.el.addClass("fc-short"),a.append(r.el);u.append(t("<td/>").append(a))}return this.bookendCells(u,"eventSkeleton"),l},updateSegVerticals:function(){var t,e=(this.segs||[]).concat(this.businessHourSegs||[]);for(this.computeSegVerticals(e),t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(t){var e,n;for(e=0;e<t.length;e++)n=t[e],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},fgSegHtml:function(t,e){var n,i,r,s=this.view,o=t.event,a=s.isEventDraggable(o),l=!e&&t.isStart&&s.isEventResizableFromStart(o),u=!e&&t.isEnd&&s.isEventResizableFromEnd(o),c=this.getSegClasses(t,a,l||u),d=N(this.getEventSkinCss(o));return c.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(n=this.getEventTimeText(t),i=this.getEventTimeText(t,"LT"),r=this.getEventTimeText(t,null,!1)):(n=this.getEventTimeText(o),i=this.getEventTimeText(o,"LT"),r=this.getEventTimeText(o,null,!1)),'<a class="'+c.join(" ")+'"'+(o.url?' href="'+q(o.url)+'"':"")+(d?' style="'+d+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+q(r)+'" data-full="'+q(i)+'"><span>'+q(n)+"</span></div>":"")+(o.title?'<div class="fc-title">'+q(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(u?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(t){var e,n,i=this.view.opt("slotEventOverlap"),r=t.backwardCoord,s=t.forwardCoord,o=this.generateSegVerticalCss(t);return i&&(s=Math.min(1,r+2*(s-r))),this.isRTL?(e=1-s,n=r):(e=r,n=1-s),o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*n+"%",i&&t.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},groupSegCols:function(t){var e,n=[];for(e=0;e<this.colCnt;e++)n.push([]);for(e=0;e<t.length;e++)n[t[e].col].push(t[e]);return n}});var ae=Ot.View=ut.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,isDisplayed:!1,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(t,n,i,r){this.calendar=t,this.type=this.name=n,this.options=i,this.intervalDuration=r||e.duration(1,"day"),this.nextDayThreshold=e.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.documentMousedownProxy=W(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var n=this.calendar;return n.trigger.apply(n,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(e){t.extend(this,e),this.updateTitle()},computeRange:function(t){var e,n,i=R(this.intervalDuration),r=t.clone().startOf(i),s=r.clone().add(this.intervalDuration);return/year|month|week|day/.test(i)?(r.stripTime(),s.stripTime()):(r.hasTime()||(r=this.calendar.rezoneDate(r)),s.hasTime()||(s=this.calendar.rezoneDate(s))),e=r.clone(),e=this.skipHiddenDays(e),n=s.clone(),n=this.skipHiddenDays(n,-1,!0),{intervalUnit:i,intervalStart:r,intervalEnd:s,start:e,end:n}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e),t.startOf("day")),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(t,e,n){var i=t.end;return i.hasTime()||(i=i.clone().subtract(1)),rt(t.start,i,e,n,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.destroySkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(t){var e=null;this.isDisplayed&&(e=this.queryScroll()),this.clear(),this.setDate(t),this.render(),this.updateSize(),this.renderBusinessHours(),this.isDisplayed=!0,e=this.computeInitialScroll(e),this.forceScroll(e),this.triggerRender()},clear:function(){this.isDisplayed&&(this.unselect(),this.clearEvents(),this.triggerDestroy(),this.destroyBusinessHours(),this.destroy(),this.isDisplayed=!1)},render:function(){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),this.renderDates()},destroy:function(){this.destroyDates()},renderSkeleton:function(){},destroySkeleton:function(){},renderDates:function(){},destroyDates:function(){},renderBusinessHours:function(){},destroyBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerDestroy:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){t(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){t(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(),this.updateWidth(),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(t,e){},computeScrollerHeight:function(t){var e,n,i=this.scrollerEl;return e=this.el.add(i),e.css({position:"relative",left:-1}),n=this.el.outerHeight()-i.height(),e.css({position:"",left:""}),t-n},computeInitialScroll:function(t){return 0},queryScroll:function(){return this.scrollerEl?this.scrollerEl.scrollTop():void 0},setScroll:function(t){return this.scrollerEl?this.scrollerEl.scrollTop(t):void 0},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){this.isEventsRendered&&(this.triggerEventDestroy(),this.destroyEvents(),this.isEventsRendered=!1)},renderEvents:function(t){},destroyEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventDestroy:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(e,n){var i=this.trigger("eventRender",e,e,n);return i===!1?n=null:i&&i!==!0&&(n=t(i)),n},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var n,i=this.getEventSegs();for(n=0;n<i.length;n++)e&&i[n].event._id!==e._id||i[n].el&&t.call(this,i[n])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return U(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,n,i,r){var s=this.calendar,o=s.mutateEvent(t,e,n),a=function(){o.undo(),s.reportEventChange()};this.triggerEventDrop(t,o.dateDelta,a,i,r),s.reportEventChange()},triggerEventDrop:function(t,e,n,i,r){this.trigger("eventDrop",i[0],t,e,n,r,{})},reportExternalDrop:function(e,n,i,r,s){var o,a,l=e.eventProps;l&&(o=t.extend({},l,n),a=this.calendar.renderEvent(o,e.stick)[0]),this.triggerExternalDrop(a,n,i,r,s)},triggerExternalDrop:function(t,e,n,i,r){this.trigger("drop",n[0],e.start,i,r),t&&this.trigger("eventReceive",null,t)},renderDrag:function(t,e){},destroyDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return U(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,n,i,r){var s=this.calendar,o=s.mutateEvent(t,e,n),a=function(){o.undo(),s.reportEventChange()};this.triggerEventResize(t,o.durationDelta,a,i,r),s.reportEventChange()},triggerEventResize:function(t,e,n,i,r){this.trigger("eventResize",i[0],t,e,n,r,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(t){},reportSelection:function(t,e){this.isSelected=!0,this.trigger("select",null,t.start,t.end,e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,t))},destroySelection:function(){},documentMousedown:function(e){var n;this.isSelected&&this.opt("unselectAuto")&&_(e)&&(n=this.opt("unselectCancel"),n&&t(e.target).closest(n).length||this.unselect(e))},initHiddenDays:function(){var e,n=this.opt("hiddenDays")||[],i=[],r=0;for(this.opt("weekends")===!1&&n.push(0,6),e=0;7>e;e++)(i[e]=-1!==t.inArray(e,n))||r++;if(!r)throw"invalid hiddenDays";this.isHiddenDayHash=i},isHiddenDay:function(t){return e.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,n){var i=t.clone();for(e=e||1;this.isHiddenDayHash[(i.day()+(n?e:0)+7)%7];)i.add(e,"days");return i},computeDayRange:function(t){var e,n=t.start.clone().stripTime(),i=t.end,r=null;return i&&(r=i.clone().stripTime(),e=+i.time(),e&&e>=this.nextDayThreshold&&r.add(1,"days")),(!i||n>=r)&&(r=n.clone().add(1,"days")),{start:n,end:r}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1}}),le=Ot.Calendar=Ot.CalendarBase=ut.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,constructor:kt,initOptions:function(t){var e,r,s,o;t=i(t),e=t.lang,r=ue[e],r||(e=le.defaults.lang,r=ue[e]||{}),s=U(t.isRTL,r.isRTL,le.defaults.isRTL),o=s?le.rtlDefaults:{},this.dirDefaults=o,this.langDefaults=r,this.overrides=t,this.options=n(le.defaults,o,r,t),Mt(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(e){var n,i,r;if(-1!=t.inArray(e,qt))for(n=this.header.getViewsWithButtons(),t.each(Ot.views,function(t){n.push(t)}),i=0;i<n.length;i++)if(r=this.getViewSpec(n[i]),r&&r.singleUnit==e)return r},buildViewSpec:function(t){for(var i,r,s,o,a,l,u=this.overrides.views||{},c=[],d=[],h=t;h&&!i;)r=Yt[h]||{},s=u[h]||{},o=o||s.duration||r.duration,h=s.type||r.type,"function"==typeof r?(i=r,c.unshift(i.defaults||{})):c.unshift(r),d.unshift(s);return i?(l={"class":i,type:t},o&&(o=e.duration(o),o.valueOf()||(o=null)),o&&(l.duration=o,a=R(o),1===o.as(a)&&(l.singleUnit=a,d.unshift(u[a]||{}))),l.defaults=n.apply(null,c),l.overrides=n.apply(null,d),this.buildViewSpecOptions(l),this.buildViewSpecButtonText(l,t),l):void 0},buildViewSpecOptions:function(t){t.options=n(le.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides),Mt(t.options)},buildViewSpecButtonText:function(t,e){function n(n){var i=n.buttonText||{};return i[e]||(t.singleUnit?i[t.singleUnit]:null)}t.buttonTextOverride=n(this.overrides)||t.overrides.buttonText,t.buttonTextDefault=n(this.langDefaults)||n(this.dirDefaults)||t.defaults.buttonText||n(le.defaults)||(t.duration?this.humanizeDuration(t.duration):null)||e},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))}});le.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},le.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},le.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var ue=Ot.langs={};Ot.datepickerLang=function(e,n,i){var r=ue[e]||(ue[e]={});r.isRTL=i.isRTL,r.weekNumberTitle=i.weekHeader,t.each(ce,function(t,e){r[t]=e(i)}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=i,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(i))},Ot.lang=function(e,i){var r,s;r=ue[e]||(ue[e]={}),i&&(r=ue[e]=n(r,i)),s=Rt(e),t.each(de,function(t,e){null==r[t]&&(r[t]=e(s,r))}),le.defaults.lang=e};var ce={buttonText:function(t){return{prev:G(t.prevText),next:G(t.nextText),today:G(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},de={dayOfMonthFormat:function(t,e){var n=t.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},he={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};Ot.lang("en",le.englishDefaults),Ot.sourceNormalizers=[],Ot.sourceFetchers=[];var fe={dataType:"json",cache:!1},pe=1;le.prototype.getPeerEvents=function(t,e){var n,i,r=this.getEventCache(),s=[];for(n=0;n<r.length;n++)i=r[n],t&&t._id===i._id||s.push(i);return s};var ge=Yt.basic=ae.extend({dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new se(this),this.coordMap=this.dayGrid.coordMap},setRange:function(t){ae.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=ae.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},destroy:function(){this.dayGrid.destroyDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+q(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(t){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(t,0).start.format("w")+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(t){var e,n=t.start;return this.dayNumbersVisible?(e=this.dayGrid.getDayClasses(n),e.unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=c(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n,i=this.opt("eventLimit");h(this.scrollerEl),s(this.headRowEl),this.dayGrid.destroySegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),!e&&d(this.scrollerEl,n)&&(r(this.headRowEl,v(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n))},setGridHeight:function(t,e){e?u(this.dayGrid.rowEls):l(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.dayGrid.destroyEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},destroySelection:function(){this.dayGrid.destroySelection()}}),me=Yt.month=ge.extend({computeRange:function(t){var e,n=ge.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(n.end.diff(n.start,"weeks",!0)),n.end.add(6-e,"weeks")),n},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),l(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});me.duration={months:1},me.defaults={fixedWeekCount:!0},Yt.basicWeek={type:"basic",duration:{weeks:1}},Yt.basicDay={type:"basic",duration:{days:1}};var ve={allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0},ye=5,be=Yt.agenda=ae.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new oe(this),this.opt("allDaySlot")?(this.dayGrid=new se(this),this.coordMap=new Kt([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(t){ae.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=t('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroyDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.destroyDates(),this.dayGrid.removeElement())},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var t,e;return this.opt("weekNumbers")?(t=this.timeGrid.getCell(0).start,e=t.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+q(e)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||q(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(t){this.timeGrid.updateSize(t),ae.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=c(this.el.find(".fc-axis"))},setHeight:function(t,e){var n,i;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),h(this.scrollerEl),s(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=ye),n&&this.dayGrid.limitRows(n)),e||(i=this.computeScrollerHeight(t),d(this.scrollerEl,i)?(r(this.noScrollRowEls,v(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i)):(this.scrollerEl.height(i).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=e.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(t);return n=Math.ceil(n),n&&n++,n},renderEvents:function(t){var e,n,i=[],r=[],s=[];for(n=0;n<t.length;n++)t[n].allDay?i.push(t[n]):r.push(t[n]);e=this.timeGrid.renderEvents(r),this.dayGrid&&(s=this.dayGrid.renderEvents(i)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}});return be.defaults=ve,Yt.agendaWeek={type:"agenda",duration:{weeks:1}},Yt.agendaDay={type:"agenda",duration:{days:1}},Ot}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){(e.defineLocale||e.lang).call(e,"zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"Ah\u70b9mm",LTS:"Ah\u70b9m\u5206s\u79d2",L:"YYYY-MM-DD",LL:"YYYY\u5e74MMMD\u65e5",LLL:"YYYY\u5e74MMMD\u65e5LT",LLLL:"YYYY\u5e74MMMD\u65e5ddddLT",l:"YYYY-MM-DD",ll:"YYYY\u5e74MMMD\u65e5",lll:"YYYY\u5e74MMMD\u65e5LT",llll:"YYYY\u5e74MMMD\u65e5ddddLT"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(t,e){return 12===t&&(t=0),"\u51cc\u6668"===e||"\u65e9\u4e0a"===e||"\u4e0a\u5348"===e?t:"\u4e0b\u5348"===e||"\u665a\u4e0a"===e?t+12:t>=11?t:t+12},meridiem:function(t,e){var n=100*t+e;return 600>n?"\u51cc\u6668":900>n?"\u65e9\u4e0a":1130>n?"\u4e0a\u5348":1230>n?"\u4e2d\u5348":1800>n?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:function(){return 0===this.minutes()?"[\u4eca\u5929]Ah[\u70b9\u6574]":"[\u4eca\u5929]LT"},nextDay:function(){return 0===this.minutes()?"[\u660e\u5929]Ah[\u70b9\u6574]":"[\u660e\u5929]LT"},lastDay:function(){return 0===this.minutes()?"[\u6628\u5929]Ah[\u70b9\u6574]":"[\u6628\u5929]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[\u4e0b]":"[\u672c]",0===this.minutes()?n+"dddAh\u70b9\u6574":n+"dddAh\u70b9mm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[\u4e0a]":"[\u672c]",0===this.minutes()?n+"dddAh\u70b9\u6574":n+"dddAh\u70b9mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"\u65e5";case"M":return t+"\u6708";case"w":case"W":return t+"\u5468";default:return t}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",m:"1\u5206\u949f",mm:"%d\u5206\u949f",h:"1\u5c0f\u65f6",hh:"%d\u5c0f\u65f6",d:"1\u5929",dd:"%d\u5929",M:"1\u4e2a\u6708",MM:"%d\u4e2a\u6708",y:"1\u5e74",yy:"%d\u5e74"},week:{dow:1,doy:4}}),t.fullCalendar.datepickerLang("zh-cn","zh-CN",{closeText:"\u5173\u95ed",prevText:"&#x3C;\u4e0a\u6708",nextText:"\u4e0b\u6708&#x3E;",currentText:"\u4eca\u5929",monthNames:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthNamesShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],dayNames:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayNamesShort:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],dayNamesMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],weekHeader:"\u5468",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"\u5e74"}),t.fullCalendar.lang("zh-cn",{buttonText:{month:"\u6708",week:"\u5468",day:"\u65e5",list:"\u65e5\u7a0b"},allDayText:"\u5168\u5929",eventLimitText:function(t){return"\u53e6\u5916 "+t+" \u4e2a"}})}),/*! WebUploader 0.1.6 */
function(t,e){var n,i={},r=function(t,e){var n,i,r;if("string"==typeof t)return a(t);for(n=[],i=t.length,r=0;i>r;r++)n.push(a(t[r]));return e.apply(null,n)},s=function(t,e,n){2===arguments.length&&(n=e,e=null),r(e||[],function(){o(t,n,arguments)})},o=function(t,e,n){var s,o={exports:e};"function"==typeof e&&(n.length||(n=[r,o.exports,o]),s=e.apply(null,n),void 0!==s&&(o.exports=s)),i[t]=o.exports},a=function(e){var n=i[e]||t[e];if(!n)throw new Error("`"+e+"` is undefined");return n},l=function(t){var e,n,r,s,o,a;a=function(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)};for(e in i)if(n=t,i.hasOwnProperty(e)){for(r=e.split("/"),o=a(r.pop());s=a(r.shift());)n[s]=n[s]||{},n=n[s];n[o]=i[e]}return t},u=function(n){return t.__dollar=n,l(e(t,s,r))};"object"==typeof module&&"object"==typeof module.exports?module.exports=u():"function"==typeof define&&define.amd?define(["jquery"],u):(n=t.WebUploader,t.WebUploader=u(),t.WebUploader.noConflict=function(){t.WebUploader=n})}(window,function(t,e,n){return e("dollar-third",[],function(){var e=t.__dollar||t.jQuery||t.Zepto;if(!e)throw new Error("jQuery or Zepto not found!");return e}),e("dollar",["dollar-third"],function(t){return t}),e("promise-third",["dollar"],function(t){return{Deferred:t.Deferred,when:t.when,isPromise:function(t){return t&&"function"==typeof t.then}}}),e("promise",["promise-third"],function(t){return t}),e("base",["dollar","promise"],function(e,n){function i(t){return function(){return a.apply(t,arguments)}}function r(t,e){return function(){return t.apply(e,arguments)}}function s(t){var e;return Object.create?Object.create(t):(e=function(){},e.prototype=t,new e)}var o=function(){},a=Function.call;return{version:"0.1.6",$:e,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(t){var e={},n=t.match(/WebKit\/([\d.]+)/),i=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),r=t.match(/MSIE\s([\d\.]+)/)||t.match(/(?:trident)(?:.*rv:([\w.]+))?/i),s=t.match(/Firefox\/([\d.]+)/),o=t.match(/Safari\/([\d.]+)/),a=t.match(/OPR\/([\d.]+)/);return n&&(e.webkit=parseFloat(n[1])),i&&(e.chrome=parseFloat(i[1])),r&&(e.ie=parseFloat(r[1])),s&&(e.firefox=parseFloat(s[1])),o&&(e.safari=parseFloat(o[1])),a&&(e.opera=parseFloat(a[1])),e}(navigator.userAgent),os:function(t){var e={},n=t.match(/(?:Android);?[\s\/]+([\d.]+)?/),i=t.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(e.android=parseFloat(n[1])),i&&(e.ios=parseFloat(i[1].replace(/_/g,"."))),e}(navigator.userAgent),inherits:function(t,n,i){var r;return"function"==typeof n?(r=n,n=null):r=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return t.apply(this,arguments)},e.extend(!0,r,t,i||{}),r.__super__=t.prototype,r.prototype=s(t.prototype),n&&e.extend(!0,r.prototype,n),r},noop:o,bindFn:r,log:function(){return t.console?r(console.log,console):o}(),nextTick:function(){return function(t){setTimeout(t,1)}}(),slice:i([].slice),guid:function(){var t=0;return function(e){for(var n=(+new Date).toString(32),i=0;5>i;i++)n+=Math.floor(65535*Math.random()).toString(32);return(e||"wu_")+n+(t++).toString(32)}}(),formatSize:function(t,e,n){var i;for(n=n||["B","K","M","G","TB"];(i=n.shift())&&t>1024;)t/=1024;return("B"===i?t:t.toFixed(e||2))+i}}}),e("mediator",["base"],function(t){function e(t,e,n,i){return s.grep(t,function(t){return t&&(!e||t.e===e)&&(!n||t.cb===n||t.cb._cb===n)&&(!i||t.ctx===i)})}function n(t,e,n){s.each((t||"").split(a),function(t,i){n(i,e)})}function i(t,e){for(var n,i=!1,r=-1,s=t.length;++r<s;)if(n=t[r],n.cb.apply(n.ctx2,e)===!1){i=!0;break}return!i}var r,s=t.$,o=[].slice,a=/\s+/;return r={on:function(t,e,i){var r,s=this;return e?(r=this._events||(this._events=[]),n(t,e,function(t,e){var n={e:t};n.cb=e,n.ctx=i,n.ctx2=i||s,n.id=r.length,r.push(n)}),this):this},once:function(t,e,i){var r=this;return e?(n(t,e,function(t,e){var n=function(){return r.off(t,n),e.apply(i||r,arguments)};n._cb=e,r.on(t,n,i)}),r):r},off:function(t,i,r){var o=this._events;return o?t||i||r?(n(t,i,function(t,n){s.each(e(o,t,n,r),function(){delete o[this.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,r,s;return this._events&&t?(n=o.call(arguments,1),r=e(this._events,t),s=e(this._events,"all"),i(r,n)&&i(s,arguments)):this}},s.extend({installTo:function(t){return s.extend(t,r)}},r)}),e("uploader",["base","mediator"],function(t,e){function n(t){this.options=i.extend(!0,{},n.options,t),this._init(this.options)}var i=t.$;return n.options={},e.installTo(n.prototype),i.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(t,e){n.prototype[t]=function(){return this.request(e,arguments)}}),i.extend(n.prototype,{state:"pending",_init:function(t){var e=this;e.request("init",t,function(){e.state="ready",e.trigger("ready")})},option:function(t,e){var n=this.options;return arguments.length>1?void(i.isPlainObject(e)&&i.isPlainObject(n[t])?i.extend(n[t],e):n[t]=e):t?n[t]:n},getStats:function(){var t=this.request("get-stats");return t?{successNum:t.numOfSuccess,progressNum:t.numOfProgress,cancelNum:t.numOfCancel,invalidNum:t.numOfInvalid,uploadFailNum:t.numOfUploadFailed,queueNum:t.numOfQueue,interruptNum:t.numofInterrupt}:{}},trigger:function(t){var n=[].slice.call(arguments,1),r=this.options,s="on"+t.substring(0,1).toUpperCase()+t.substring(1);return e.trigger.apply(this,arguments)===!1||i.isFunction(r[s])&&r[s].apply(this,n)===!1||i.isFunction(this[s])&&this[s].apply(this,n)===!1||e.trigger.apply(e,[this,t].concat(n))===!1?!1:!0},destroy:function(){this.request("destroy",arguments),this.off()},request:t.noop}),t.create=n.create=function(t){return new n(t)},t.Uploader=n,n}),e("runtime/runtime",["base","mediator"],function(t,e){function n(e){this.options=i.extend({container:document.body},e),this.uid=t.guid("rt_")}var i=t.$,r={},s=function(t){for(var e in t)if(t.hasOwnProperty(e))return e;return null};return i.extend(n.prototype,{getContainer:function(){var t,e,n=this.options;return this._container?this._container:(t=i(n.container||document.body),e=i(document.createElement("div")),e.attr("id","rt_"+this.uid),e.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),t.append(e),t.addClass("webuploader-container"),this._container=e,this._parent=t,e)},init:t.noop,exec:t.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),n.orders="html5,flash",n.addRuntime=function(t,e){r[t]=e},n.hasRuntime=function(t){return!!(t?r[t]:s(r))},n.create=function(t,e){var o,a;if(e=e||n.orders,i.each(e.split(/\s*,\s*/g),function(){return r[this]?(o=this,!1):void 0}),o=o||s(r),!o)throw new Error("Runtime Error");return a=new r[o](t)},e.installTo(n.prototype),n}),e("runtime/client",["base","mediator","runtime/runtime"],function(t,e,n){function i(e,i){var s,o=t.Deferred();this.uid=t.guid("client_"),this.runtimeReady=function(t){return o.done(t)},this.connectRuntime=function(e,a){if(s)throw new Error("already connected!");return o.done(a),"string"==typeof e&&r.get(e)&&(s=r.get(e)),s=s||r.get(null,i),s?(t.$.extend(s.options,e),s.__promise.then(o.resolve),s.__client++):(s=n.create(e,e.runtimeOrder),s.__promise=o.promise(),s.once("ready",o.resolve),s.init(),r.add(s),s.__client=1),i&&(s.__standalone=i),s},this.getRuntime=function(){return s},this.disconnectRuntime=function(){s&&(s.__client--,s.__client<=0&&(r.remove(s),delete s.__promise,s.destroy()),s=null)},this.exec=function(){if(s){var n=t.slice(arguments);return e&&n.unshift(e),s.exec.apply(this,n)}},this.getRuid=function(){return s&&s.uid},this.destroy=function(t){return function(){t&&t.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var r;return r=function(){var t={};return{add:function(e){t[e.uid]=e},get:function(e,n){var i;if(e)return t[e];for(i in t)if(!n||!t[i].__standalone)return t[i];return null},remove:function(e){delete t[e.uid]}}}(),e.installTo(i.prototype),i}),e("lib/dnd",["base","mediator","runtime/client"],function(t,e,n){function i(t){t=this.options=r.extend({},i.options,t),t.container=r(t.container),t.container.length&&n.call(this,"DragAndDrop")}var r=t.$;return i.options={accept:null,disableGlobalDnd:!1},t.inherits(n,{constructor:i,init:function(){var t=this;t.connectRuntime(t.options,function(){t.exec("init"),t.trigger("ready")})}}),e.installTo(i.prototype),i}),e("widgets/widget",["base","uploader"],function(t,e){function n(t){if(!t)return!1;var e=t.length,n=r.type(t);return 1===t.nodeType&&e?!0:"array"===n||"function"!==n&&"string"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){this.owner=t,this.options=t.options}var r=t.$,s=e.prototype._init,o=e.prototype.destroy,a={},l=[];return r.extend(i.prototype,{init:t.noop,invoke:function(t,e){var n=this.responseMap;return n&&t in n&&n[t]in this&&r.isFunction(this[n[t]])?this[n[t]].apply(this,e):a},request:function(){return this.owner.request.apply(this.owner,arguments)}}),r.extend(e.prototype,{_init:function(){var t=this,e=t._widgets=[],n=t.options.disableWidgets||"";return r.each(l,function(i,r){(!n||!~n.indexOf(r._name))&&e.push(new r(t))}),s.apply(t,arguments)},request:function(e,i,r){var s,o,l,u,c=0,d=this._widgets,h=d&&d.length,f=[],p=[];for(i=n(i)?i:[i];h>c;c++)s=d[c],o=s.invoke(e,i),o!==a&&(t.isPromise(o)?p.push(o):f.push(o));return r||p.length?(l=t.when.apply(t,p),u=l.pipe?"pipe":"then",l[u](function(){var e=t.Deferred(),n=arguments;return 1===n.length&&(n=n[0]),setTimeout(function(){e.resolve(n)},1),e.promise()})[r?u:"done"](r||t.noop)):f[0]},destroy:function(){o.apply(this,arguments),this._widgets=null}}),e.register=i.register=function(e,n){var s,o={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(n=e,r.each(n,function(t){return"_"===t[0]||"name"===t?void("name"===t&&(o.name=n.name)):void(o[t.replace(/[A-Z]/g,"-$&").toLowerCase()]=t)})):o=r.extend(o,e),n.responseMap=o,s=t.inherits(i,n),s._name=o.name,l.push(s),s},e.unRegister=i.unRegister=function(t){if(t&&"anonymous"!==t)for(var e=l.length;e--;)l[e]._name===t&&l.splice(e,1)},i}),e("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(t,e,n){var i=t.$;return e.options.dnd="",e.register({name:"dnd",init:function(e){if(e.dnd&&"html5"===this.request("predict-runtime-type")){var r,s=this,o=t.Deferred(),a=i.extend({},{disableGlobalDnd:e.disableGlobalDnd,container:e.dnd,accept:e.accept});return this.dnd=r=new n(a),r.once("ready",o.resolve),r.on("drop",function(t){s.request("add-file",[t])}),r.on("accept",function(t){return s.owner.trigger("dndAccept",t)}),r.init(),o.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),e("lib/filepaste",["base","mediator","runtime/client"],function(t,e,n){function i(t){t=this.options=r.extend({},t),t.container=r(t.container||document.body),n.call(this,"FilePaste")}var r=t.$;return t.inherits(n,{constructor:i,init:function(){var t=this;t.connectRuntime(t.options,function(){t.exec("init"),t.trigger("ready")})}}),e.installTo(i.prototype),i}),e("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(t,e,n){var i=t.$;return e.register({name:"paste",init:function(e){if(e.paste&&"html5"===this.request("predict-runtime-type")){var r,s=this,o=t.Deferred(),a=i.extend({},{container:e.paste,accept:e.accept});return this.paste=r=new n(a),r.once("ready",o.resolve),r.on("paste",function(t){s.owner.request("add-file",[t])}),r.init(),o.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),e("lib/blob",["base","runtime/client"],function(t,e){function n(t,n){var i=this;i.source=n,i.ruid=t,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream",e.call(i,"Blob"),this.uid=n.uid||this.uid,t&&i.connectRuntime(t)}return t.inherits(e,{constructor:n,slice:function(t,e){return this.exec("slice",t,e)},getSource:function(){return this.source}}),n}),e("lib/file",["base","lib/blob"],function(t,e){function n(t,n){var s;this.name=n.name||"untitled"+i++,s=r.exec(n.name)?RegExp.$1.toLowerCase():"",!s&&n.type&&(s=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"",this.name+="."+s),this.ext=s,this.lastModifiedDate=n.lastModifiedDate||(new Date).toLocaleString(),e.apply(this,arguments)}var i=1,r=/\.([^.]+)$/;return t.inherits(e,n)}),e("lib/filepicker",["base","runtime/client","lib/file"],function(e,n,i){function r(t){if(t=this.options=s.extend({},r.options,t),t.container=s(t.id),!t.container.length)throw new Error("\u6309\u94ae\u6307\u5b9a\u9519\u8bef");t.innerHTML=t.innerHTML||t.label||t.container.html()||"",t.button=s(t.button||document.createElement("div")),t.button.html(t.innerHTML),t.container.html(t.button),n.call(this,"FilePicker",!0)}var s=e.$;return r.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},e.inherits(n,{constructor:r,init:function(){var n=this,r=n.options,o=r.button;o.addClass("webuploader-pick"),n.on("all",function(t){var e;switch(t){case"mouseenter":o.addClass("webuploader-pick-hover");break;case"mouseleave":o.removeClass("webuploader-pick-hover");break;case"change":e=n.exec("getFiles"),n.trigger("select",s.map(e,function(t){return t=new i(n.getRuid(),t),t._refer=r.container,t}),r.container)}}),n.connectRuntime(r,function(){n.refresh(),n.exec("init",r),n.trigger("ready")}),this._resizeHandler=e.bindFn(this.refresh,this),s(t).on("resize",this._resizeHandler)},refresh:function(){var t=this.getRuntime().getContainer(),e=this.options.button,n=e.outerWidth?e.outerWidth():e.width(),i=e.outerHeight?e.outerHeight():e.height(),r=e.offset();n&&i&&t.css({bottom:"auto",right:"auto",width:n+"px",height:i+"px"}).offset(r)},enable:function(){var t=this.options.button;t.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var t=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),t.addClass("webuploader-pick-disable")},destroy:function(){var e=this.options.button;s(t).off("resize",this._resizeHandler),e.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),r}),e("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(t,e,n){var i=t.$;return i.extend(e.options,{pick:null,accept:null}),e.register({name:"picker",init:function(t){return this.pickers=[],t.pick&&this.addBtn(t.pick)},refresh:function(){i.each(this.pickers,function(){this.refresh()})},addBtn:function(e){var r=this,s=r.options,o=s.accept,a=[];if(e)return i.isPlainObject(e)||(e={id:e}),i(e.id).each(function(){var l,u,c;c=t.Deferred(),l=i.extend({},e,{accept:i.isPlainObject(o)?[o]:o,swf:s.swf,runtimeOrder:s.runtimeOrder,id:this}),u=new n(l),u.once("ready",c.resolve),u.on("select",function(t){r.owner.request("add-file",[t])}),u.on("dialogopen",function(){r.owner.trigger("dialogOpen",u.button)}),u.init(),r.pickers.push(u),a.push(c.promise())}),t.when.apply(t,a)},disable:function(){i.each(this.pickers,function(){this.disable()})},enable:function(){i.each(this.pickers,function(){this.enable()})},destroy:function(){i.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),e("lib/image",["base","runtime/client","lib/blob"],function(t,e,n){function i(t){this.options=r.extend({},i.options,t),e.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var r=t.$;return i.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},t.inherits(e,{constructor:i,info:function(t){return t?(this._info=t,this):this._info},meta:function(t){return t?(this._meta=t,this):this._meta},loadFromBlob:function(t){var e=this,n=t.getRuid();this.connectRuntime(n,function(){e.exec("init",e.options),e.exec("loadFromBlob",t)})},resize:function(){var e=t.slice(arguments);return this.exec.apply(this,["resize"].concat(e))},crop:function(){var e=t.slice(arguments);return this.exec.apply(this,["crop"].concat(e))},getAsDataUrl:function(t){return this.exec("getAsDataUrl",t)},getAsBlob:function(t){var e=this.exec("getAsBlob",t);return new n(this.getRuid(),e)}}),i}),e("widgets/image",["base","uploader","lib/image","widgets/widget"],function(t,e,n){var i,r=t.$;return i=function(t){var e=0,n=[],i=function(){for(var i;n.length&&t>e;)i=n.shift(),e+=i[0],i[1]()};return function(t,r,s){n.push([r,s]),t.once("destroy",function(){e-=r,setTimeout(i,1)}),setTimeout(i,1)}}(5242880),r.extend(e.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),e.register({name:"image",makeThumb:function(t,e,s,o){var a,l;return t=this.request("get-file",t),t.type.match(/^image/)?(a=r.extend({},this.options.thumb),r.isPlainObject(s)&&(a=r.extend(a,s),s=null),s=s||a.width,o=o||a.height,l=new n(a),l.once("load",function(){t._info=t._info||l.info(),t._meta=t._meta||l.meta(),1>=s&&s>0&&(s=t._info.width*s),1>=o&&o>0&&(o=t._info.height*o),l.resize(s,o)}),l.once("complete",function(){e(!1,l.getAsDataUrl(a.type)),l.destroy()}),l.once("error",function(t){e(t||!0),l.destroy()}),void i(l,t.source.size,function(){t._info&&l.info(t._info),t._meta&&l.meta(t._meta),l.loadFromBlob(t.source)})):void e(!0)},beforeSendFile:function(e){var i,s,o=this.options.compress||this.options.resize,a=o&&o.compressSize||0,l=o&&o.noCompressIfLarger||!1;return e=this.request("get-file",e),!o||!~"image/jpeg,image/jpg".indexOf(e.type)||e.size<a||e._compressed?void 0:(o=r.extend({},o),s=t.Deferred(),i=new n(o),s.always(function(){i.destroy(),i=null}),i.once("error",s.reject),i.once("load",function(){var t=o.width,n=o.height;e._info=e._info||i.info(),e._meta=e._meta||i.meta(),1>=t&&t>0&&(t=e._info.width*t),1>=n&&n>0&&(n=e._info.height*n),i.resize(t,n)}),i.once("complete",function(){var t,n;try{t=i.getAsBlob(o.type),n=e.size,(!l||t.size<n)&&(e.source=t,e.size=t.size,e.trigger("resize",t.size,n)),e._compressed=!0,s.resolve()}catch(r){s.resolve()}}),e._info&&i.info(e._info),e._meta&&i.meta(e._meta),i.loadFromBlob(e.source),s.promise())}})}),e("file",["base","mediator"],function(t,e){function n(){return s+o++}function i(t){this.name=t.name||"Untitled",this.size=t.size||0,this.type=t.type||"application/octet-stream",this.lastModifiedDate=t.lastModifiedDate||1*new Date,this.id=n(),this.ext=a.exec(this.name)?RegExp.$1:"",this.statusText="",l[this.id]=i.Status.INITED,this.source=t,this.loaded=0,this.on("error",function(t){this.setStatus(i.Status.ERROR,t)})}var r=t.$,s="WU_FILE_",o=0,a=/\.([^.]+)$/,l={};return r.extend(i.prototype,{setStatus:function(t,e){var n=l[this.id];"undefined"!=typeof e&&(this.statusText=e),t!==n&&(l[this.id]=t,this.trigger("statuschange",t,n))},getStatus:function(){return l[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete l[this.id]}}),e.installTo(i.prototype),i.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},i}),e("queue",["base","mediator","file"],function(t,e,n){function i(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var r=t.$,s=n.Status;return r.extend(i.prototype,{append:function(t){return this._queue.push(t),this._fileAdded(t),this},prepend:function(t){return this._queue.unshift(t),this._fileAdded(t),this},getFile:function(t){return"string"!=typeof t?t:this._map[t]},fetch:function(t){var e,n,i=this._queue.length;for(t=t||s.QUEUED,e=0;i>e;e++)if(n=this._queue[e],t===n.getStatus())return n;return null},sort:function(t){"function"==typeof t&&this._queue.sort(t)},getFiles:function(){for(var t,e=[].slice.call(arguments,0),n=[],i=0,s=this._queue.length;s>i;i++)t=this._queue[i],(!e.length||~r.inArray(t.getStatus(),e))&&n.push(t);return n},removeFile:function(t){var e=this._map[t.id];e&&(delete this._map[t.id],t.destroy(),this.stats.numofDeleted++)},_fileAdded:function(t){var e=this,n=this._map[t.id];n||(this._map[t.id]=t,t.on("statuschange",function(t,n){e._onFileStatusChange(t,n)}))},_onFileStatusChange:function(t,e){var n=this.stats;switch(e){case s.PROGRESS:n.numOfProgress--;break;case s.QUEUED:n.numOfQueue--;break;case s.ERROR:n.numOfUploadFailed--;break;case s.INVALID:n.numOfInvalid--;break;case s.INTERRUPT:n.numofInterrupt--}switch(t){case s.QUEUED:n.numOfQueue++;break;case s.PROGRESS:n.numOfProgress++;break;case s.ERROR:n.numOfUploadFailed++;break;case s.COMPLETE:n.numOfSuccess++;break;case s.CANCELLED:n.numOfCancel++;break;case s.INVALID:n.numOfInvalid++;break;case s.INTERRUPT:n.numofInterrupt++}}}),e.installTo(i.prototype),i}),e("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(t,e,n,i,r,s){var o=t.$,a=/\.\w+$/,l=i.Status;return e.register({name:"queue",init:function(e){var i,r,a,l,u,c,d,h=this;if(o.isPlainObject(e.accept)&&(e.accept=[e.accept]),e.accept){for(u=[],a=0,r=e.accept.length;r>a;a++)l=e.accept[a].extensions,l&&u.push(l);u.length&&(c="\\."+u.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),h.accept=new RegExp(c,"i")}return h.queue=new n,h.stats=h.queue.stats,"html5"===this.request("predict-runtime-type")?(i=t.Deferred(),this.placeholder=d=new s("Placeholder"),d.connectRuntime({runtimeOrder:"html5"},function(){h._ruid=d.getRuid(),i.resolve()}),i.promise()):void 0},_wrapFile:function(t){if(!(t instanceof i)){if(!(t instanceof r)){if(!this._ruid)throw new Error("Can't add external files.");t=new r(this._ruid,t)}t=new i(t)}return t},acceptFile:function(t){var e=!t||!t.size||this.accept&&a.exec(t.name)&&!this.accept.test(t.name);return!e},_addFile:function(t){var e=this;return t=e._wrapFile(t),e.owner.trigger("beforeFileQueued",t)?e.acceptFile(t)?(e.queue.append(t),e.owner.trigger("fileQueued",t),t):void e.owner.trigger("error","Q_TYPE_DENIED",t):void 0},getFile:function(t){return this.queue.getFile(t)},addFile:function(t){var e=this;t.length||(t=[t]),t=o.map(t,function(t){return e._addFile(t)}),e.owner.trigger("filesQueued",t),e.options.auto&&setTimeout(function(){e.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(t,e){var n=this;t=t.id?t:n.queue.getFile(t),this.request("cancel-file",t),e&&this.queue.removeFile(t)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(t,e){var n,i,r,s=this;if(t)return t=t.id?t:s.queue.getFile(t),t.setStatus(l.QUEUED),void(e||s.request("start-upload"));for(n=s.queue.getFiles(l.ERROR),i=0,r=n.length;r>i;i++)t=n[i],t.setStatus(l.QUEUED);s.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),e("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(t,e){return t.support=function(){return e.hasRuntime.apply(e,arguments)},t.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var t,n,i=this.options.runtimeOrder||e.orders,r=this.type;if(!r)for(i=i.split(/\s*,\s*/g),t=0,n=i.length;n>t;t++)if(e.hasRuntime(i[t])){this.type=r=i[t];break}return r}})}),e("lib/transport",["base","runtime/client","mediator"],function(t,e,n){function i(t){var n=this;t=n.options=r.extend(!0,{},i.options,t||{}),e.call(this,"Transport"),this._blob=null,this._formData=t.formData||{},this._headers=t.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var r=t.$;return i.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},r.extend(i.prototype,{appendBlob:function(t,e,n){var i=this,r=i.options;i.getRuid()&&i.disconnectRuntime(),i.connectRuntime(e.ruid,function(){i.exec("init")}),i._blob=e,r.fileVal=t||r.fileVal,r.filename=n||r.filename},append:function(t,e){"object"==typeof t?r.extend(this._formData,t):this._formData[t]=e},setRequestHeader:function(t,e){"object"==typeof t?r.extend(this._headers,t):this._headers[t]=e},send:function(t){this.exec("send",t),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var t=this,e=t.options.timeout;e&&(clearTimeout(t._timer),t._timer=setTimeout(function(){t.abort(),t.trigger("error","timeout")},e))}}),n.installTo(i.prototype),i}),e("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(t,e,n,i){function r(t,e){var n,i,r=[],s=t.source,o=s.size,a=e?Math.ceil(o/e):1,l=0,u=0;for(i={file:t,has:function(){return!!r.length},shift:function(){return r.shift()},unshift:function(t){r.unshift(t)}};a>u;)n=Math.min(e,o-l),r.push({file:t,start:l,end:e?l+n:o,total:o,chunks:a,chunk:u++,cuted:i}),l+=n;return t.blocks=r.concat(),t.remaning=r.length,i}var s=t.$,o=t.isPromise,a=n.Status;s.extend(e.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),e.register({name:"upload",init:function(){var e=this.owner,n=this;this.runing=!1,this.progress=!1,e.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=t.bindFn(this._tick,this),e.on("uploadComplete",function(t){t.blocks&&s.each(t.blocks,function(t,e){e.transport&&(e.transport.abort(),e.transport.destroy()),delete e.transport}),delete t.blocks,delete t.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(e){var n=this;if(s.each(n.request("get-files",a.INVALID),function(){n.request("remove-file",this)}),e)if(e=e.id?e:n.request("get-file",e),e.getStatus()===a.INTERRUPT)s.each(n.pool,function(t,n){n.file===e&&n.transport&&n.transport.send()}),e.setStatus(a.QUEUED);else{if(e.getStatus()===a.PROGRESS)return;e.setStatus(a.QUEUED)}else s.each(n.request("get-files",[a.INITED]),function(){this.setStatus(a.QUEUED)});if(!n.runing){n.runing=!0;var i=[];s.each(n.pool,function(t,e){var r=e.file;r.getStatus()===a.INTERRUPT&&(i.push(r),n._trigged=!1,e.transport&&e.transport.send())});for(var e;e=i.shift();)e.setStatus(a.PROGRESS);e||s.each(n.request("get-files",a.INTERRUPT),function(){this.setStatus(a.PROGRESS)}),n._trigged=!1,t.nextTick(n.__tick),n.owner.trigger("startUpload")}},stopUpload:function(e,n){var i=this;if(e===!0&&(n=e,e=null),i.runing!==!1){if(e){if(e=e.id?e:i.request("get-file",e),e.getStatus()!==a.PROGRESS&&e.getStatus()!==a.QUEUED)return;return e.setStatus(a.INTERRUPT),s.each(i.pool,function(t,n){n.file===e&&(n.transport&&n.transport.abort(),i._putback(n),i._popBlock(n))}),t.nextTick(i.__tick)}i.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(a.INTERRUPT),n&&s.each(i.pool,function(t,e){e.transport&&e.transport.abort(),e.file.setStatus(a.INTERRUPT)}),i.owner.trigger("stopUpload")}},cancelFile:function(t){t=t.id?t:this.request("get-file",t),t.blocks&&s.each(t.blocks,function(t,e){var n=e.transport;n&&(n.abort(),n.destroy(),delete e.transport)}),t.setStatus(a.CANCELLED),this.owner.trigger("fileDequeued",t)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(t,e){t=t.id?t:this.request("get-file",t),t.setStatus(e||a.COMPLETE),t.skipped=!0,t.blocks&&s.each(t.blocks,function(t,e){var n=e.transport;n&&(n.abort(),n.destroy(),delete e.transport)}),this.owner.trigger("uploadSkip",t)},_tick:function(){var e,n,i=this,r=i.options;return i._promise?i._promise.always(i.__tick):void(i.pool.length<r.threads&&(n=i._nextBlock())?(i._trigged=!1,e=function(e){i._promise=null,e&&e.file&&i._startSend(e),t.nextTick(i.__tick)},i._promise=o(n)?n.always(e):e(n)):i.remaning||i._getStats().numOfQueue||i._getStats().numofInterrupt||(i.runing=!1,i._trigged||t.nextTick(function(){i.owner.trigger("uploadFinished")}),i._trigged=!0))},_putback:function(t){var e;t.cuted.unshift(t),e=this.stack.indexOf(t.cuted),~e||this.stack.unshift(t.cuted)},_getStack:function(){for(var t,e=0;t=this.stack[e++];){if(t.has()&&t.file.getStatus()===a.PROGRESS)return t;(!t.has()||t.file.getStatus()!==a.PROGRESS&&t.file.getStatus()!==a.INTERRUPT)&&this.stack.splice(--e,1)}return null},_nextBlock:function(){var t,e,n,i,s=this,a=s.options;return(t=this._getStack())?(a.prepareNextFile&&!s.pending.length&&s._prepareNextFile(),t.shift()):s.runing?(!s.pending.length&&s._getStats().numOfQueue&&s._prepareNextFile(),e=s.pending.shift(),n=function(e){return e?(t=r(e,a.chunked?a.chunkSize:0),s.stack.push(t),t.shift()):null},o(e)?(i=e.file,e=e[e.pipe?"pipe":"then"](n),e.file=i,e):n(e)):void 0},_prepareNextFile:function(){var t,e=this,n=e.request("fetch-file"),i=e.pending;n&&(t=e.request("before-send-file",n,function(){return n.getStatus()===a.PROGRESS||n.getStatus()===a.INTERRUPT?n:e._finishFile(n)}),e.owner.trigger("uploadStart",n),n.setStatus(a.PROGRESS),t.file=n,t.done(function(){var e=s.inArray(t,i);~e&&i.splice(e,1,n)}),t.fail(function(t){n.setStatus(a.ERROR,t),e.owner.trigger("uploadError",n,t),e.owner.trigger("uploadComplete",n)}),i.push(t))},_popBlock:function(t){var e=s.inArray(t,this.pool);this.pool.splice(e,1),t.file.remaning--,this.remaning--},_startSend:function(e){var n,i=this,r=e.file;return r.getStatus()!==a.PROGRESS?void(r.getStatus()===a.INTERRUPT&&i._putback(e)):(i.pool.push(e),i.remaning++,e.blob=1===e.chunks?r.source:r.source.slice(e.start,e.end),n=i.request("before-send",e,function(){r.getStatus()===a.PROGRESS?i._doSend(e):(i._popBlock(e),t.nextTick(i.__tick))}),void n.fail(function(){1===r.remaning?i._finishFile(r).always(function(){e.percentage=1,i._popBlock(e),i.owner.trigger("uploadComplete",r),t.nextTick(i.__tick)}):(e.percentage=1,i.updateFileProgress(r),i._popBlock(e),t.nextTick(i.__tick))}))},_doSend:function(e){var n,r,o=this,l=o.owner,u=o.options,c=e.file,d=new i(u),h=s.extend({},u.formData),f=s.extend({},u.headers);e.transport=d,d.on("destroy",function(){delete e.transport,o._popBlock(e),t.nextTick(o.__tick)}),d.on("progress",function(t){e.percentage=t,o.updateFileProgress(c)}),n=function(t){var n;return r=d.getResponseAsJson()||{},r._raw=d.getResponse(),n=function(e){t=e},l.trigger("uploadAccept",e,r,n)||(t=t||"server"),t},d.on("error",function(t,i){e.retried=e.retried||0,e.chunks>1&&~"http,abort".indexOf(t)&&e.retried<u.chunkRetry?(e.retried++,d.send()):(i||"server"!==t||(t=n(t)),c.setStatus(a.ERROR,t),l.trigger("uploadError",c,t),l.trigger("uploadComplete",c))}),d.on("load",function(){var t;return(t=n())?void d.trigger("error",t,!0):void(1===c.remaning?o._finishFile(c,r):d.destroy())}),h=s.extend(h,{id:c.id,name:c.name,type:c.type,lastModifiedDate:c.lastModifiedDate,size:c.size}),e.chunks>1&&s.extend(h,{chunks:e.chunks,chunk:e.chunk}),l.trigger("uploadBeforeSend",e,h,f),d.appendBlob(u.fileVal,e.blob,c.name),d.append(h),d.setRequestHeader(f),d.send()},_finishFile:function(t,e,n){var i=this.owner;return i.request("after-send-file",arguments,function(){t.setStatus(a.COMPLETE),i.trigger("uploadSuccess",t,e,n)}).fail(function(e){t.getStatus()===a.PROGRESS&&t.setStatus(a.ERROR,e),i.trigger("uploadError",t,e)}).always(function(){i.trigger("uploadComplete",t)})},updateFileProgress:function(t){var e=0,n=0;t.blocks&&(s.each(t.blocks,function(t,e){n+=(e.percentage||0)*(e.end-e.start)}),e=n/t.size,this.owner.trigger("uploadProgress",t,e||0))}})}),e("widgets/validator",["base","uploader","file","widgets/widget"],function(t,e,n){var i,r=t.$,s={};return i={addValidator:function(t,e){s[t]=e},removeValidator:function(t){delete s[t]}},e.register({name:"validator",init:function(){var e=this;t.nextTick(function(){r.each(s,function(){this.call(e.owner)})})}}),i.addValidator("fileNumLimit",function(){var t=this,e=t.options,n=0,i=parseInt(e.fileNumLimit,10),r=!0;
i&&(t.on("beforeFileQueued",function(t){return n>=i&&r&&(r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",i,t),setTimeout(function(){r=!0},1)),n>=i?!1:!0}),t.on("fileQueued",function(){n++}),t.on("fileDequeued",function(){n--}),t.on("reset",function(){n=0}))}),i.addValidator("fileSizeLimit",function(){var t=this,e=t.options,n=0,i=parseInt(e.fileSizeLimit,10),r=!0;i&&(t.on("beforeFileQueued",function(t){var e=n+t.size>i;return e&&r&&(r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",i,t),setTimeout(function(){r=!0},1)),e?!1:!0}),t.on("fileQueued",function(t){n+=t.size}),t.on("fileDequeued",function(t){n-=t.size}),t.on("reset",function(){n=0}))}),i.addValidator("fileSingleSizeLimit",function(){var t=this,e=t.options,i=e.fileSingleSizeLimit;i&&t.on("beforeFileQueued",function(t){return t.size>i?(t.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",i,t),!1):void 0})}),i.addValidator("duplicate",function(){function t(t){for(var e,n=0,i=0,r=t.length;r>i;i++)e=t.charCodeAt(i),n=e+(n<<6)+(n<<16)-n;return n}var e=this,n=e.options,i={};n.duplicate||(e.on("beforeFileQueued",function(e){var n=e.__hash||(e.__hash=t(e.name+e.size+e.lastModifiedDate));return i[n]?(this.trigger("error","F_DUPLICATE",e),!1):void 0}),e.on("fileQueued",function(t){var e=t.__hash;e&&(i[e]=!0)}),e.on("fileDequeued",function(t){var e=t.__hash;e&&delete i[e]}),e.on("reset",function(){i={}}))}),i}),e("lib/md5",["runtime/client","mediator"],function(t,e){function n(){t.call(this,"Md5")}return e.installTo(n.prototype),n.prototype.loadFromBlob=function(t){var e=this;e.getRuid()&&e.disconnectRuntime(),e.connectRuntime(t.ruid,function(){e.exec("init"),e.exec("loadFromBlob",t)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),e("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(t,e,n,i){return e.register({name:"md5",md5File:function(e,r,s){var o=new n,a=t.Deferred(),l=e instanceof i?e:this.request("get-file",e).source;return o.on("progress load",function(t){t=t||{},a.notify(t.total?t.loaded/t.total:1)}),o.on("complete",function(){a.resolve(o.getResult())}),o.on("error",function(t){a.reject(t)}),arguments.length>1&&(r=r||0,s=s||0,0>r&&(r=l.size+r),0>s&&(s=l.size+s),s=Math.min(s,l.size),l=l.slice(r,s)),o.loadFromBlob(l),a.promise()}})}),e("runtime/compbase",[],function(){function t(t,e){this.owner=t,this.options=t.options,this.getRuntime=function(){return e},this.getRuid=function(){return e.uid},this.trigger=function(){return t.trigger.apply(t,arguments)}}return t}),e("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(e,n,i){function r(){var t={},i=this,r=this.destroy;n.apply(i,arguments),i.type=s,i.exec=function(n,r){var s,a=this,l=a.uid,u=e.slice(arguments,2);return o[n]&&(s=t[l]=t[l]||new o[n](a,i),s[r])?s[r].apply(s,u):void 0},i.destroy=function(){return r&&r.apply(this,arguments)}}var s="html5",o={};return e.inherits(n,{constructor:r,init:function(){var t=this;setTimeout(function(){t.trigger("ready")},1)}}),r.register=function(t,n){var r=o[t]=e.inherits(i,n);return r},t.Blob&&t.FileReader&&t.DataView&&n.addRuntime(s,r),r}),e("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(t,e){return t.register("Blob",{slice:function(t,n){var i=this.owner.source,r=i.slice||i.webkitSlice||i.mozSlice;return i=r.call(i,t,n),new e(this.getRuid(),i)}})}),e("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(t,e,n){var i=t.$,r="webuploader-dnd-";return e.register("DragAndDrop",{init:function(){var e=this.elem=this.options.container;this.dragEnterHandler=t.bindFn(this._dragEnterHandler,this),this.dragOverHandler=t.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=t.bindFn(this._dragLeaveHandler,this),this.dropHandler=t.bindFn(this._dropHandler,this),this.dndOver=!1,e.on("dragenter",this.dragEnterHandler),e.on("dragover",this.dragOverHandler),e.on("dragleave",this.dragLeaveHandler),e.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(i(document).on("dragover",this.dragOverHandler),i(document).on("drop",this.dropHandler))},_dragEnterHandler:function(t){var e,n=this,i=n._denied||!1;return t=t.originalEvent||t,n.dndOver||(n.dndOver=!0,e=t.dataTransfer.items,e&&e.length&&(n._denied=i=!n.trigger("accept",e)),n.elem.addClass(r+"over"),n.elem[i?"addClass":"removeClass"](r+"denied")),t.dataTransfer.dropEffect=i?"none":"copy",!1},_dragOverHandler:function(t){var e=this.elem.parent().get(0);return e&&!i.contains(e,t.currentTarget)?!1:(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,t),!1)},_dragLeaveHandler:function(){var t,e=this;return t=function(){e.dndOver=!1,e.elem.removeClass(r+"over "+r+"denied")},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(t){var e,s,o=this,a=o.getRuid(),l=o.elem.parent().get(0);if(l&&!i.contains(l,t.currentTarget))return!1;t=t.originalEvent||t,e=t.dataTransfer;try{s=e.getData("text/html")}catch(u){}return o.dndOver=!1,o.elem.removeClass(r+"over"),s?void 0:(o._getTansferFiles(e,function(t){o.trigger("drop",i.map(t,function(t){return new n(a,t)}))}),!1)},_getTansferFiles:function(e,n){var i,r,s,o,a,l,u,c=[],d=[];for(i=e.items,r=e.files,u=!(!i||!i[0].webkitGetAsEntry),a=0,l=r.length;l>a;a++)s=r[a],o=i&&i[a],u&&o.webkitGetAsEntry().isDirectory?d.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),c)):c.push(s);t.when.apply(t,d).done(function(){c.length&&n(c)})},_traverseDirectoryTree:function(e,n){var i=t.Deferred(),r=this;return e.isFile?e.file(function(t){n.push(t),i.resolve()}):e.isDirectory&&e.createReader().readEntries(function(e){var s,o=e.length,a=[],l=[];for(s=0;o>s;s++)a.push(r._traverseDirectoryTree(e[s],l));t.when.apply(t,a).then(function(){n.push.apply(n,l),i.resolve()},i.reject)}),i.promise()},destroy:function(){var t=this.elem;t&&(t.off("dragenter",this.dragEnterHandler),t.off("dragover",this.dragOverHandler),t.off("dragleave",this.dragLeaveHandler),t.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(i(document).off("dragover",this.dragOverHandler),i(document).off("drop",this.dropHandler)))}})}),e("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(t,e,n){return e.register("FilePaste",{init:function(){var e,n,i,r,s=this.options,o=this.elem=s.container,a=".*";if(s.accept){for(e=[],n=0,i=s.accept.length;i>n;n++)r=s.accept[n].mimeTypes,r&&e.push(r);e.length&&(a=e.join(","),a=a.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=a=new RegExp(a,"i"),this.hander=t.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(t){var e,i,r,s,o,a=[],l=this.getRuid();for(t=t.originalEvent||t,e=t.clipboardData.items,s=0,o=e.length;o>s;s++)i=e[s],"file"===i.kind&&(r=i.getAsFile())&&a.push(new n(l,r));a.length&&(t.preventDefault(),t.stopPropagation(),this.trigger("paste",a))},destroy:function(){this.elem.off("paste",this.hander)}})}),e("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(t,e){var n=t.$;return e.register("FilePicker",{init:function(){var t,e,i,r,s=this.getRuntime().getContainer(),o=this,a=o.owner,l=o.options,u=this.label=n(document.createElement("label")),c=this.input=n(document.createElement("input"));if(c.attr("type","file"),c.attr("name",l.name),c.addClass("webuploader-element-invisible"),u.on("click",function(){c.trigger("click"),a.trigger("dialogopen")}),u.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),l.multiple&&c.attr("multiple","multiple"),l.accept&&l.accept.length>0){for(t=[],e=0,i=l.accept.length;i>e;e++)t.push(l.accept[e].mimeTypes);c.attr("accept",t.join(","))}s.append(c),s.append(u),r=function(t){a.trigger(t.type)},c.on("change",function(t){var e,i=arguments.callee;o.files=t.target.files,e=this.cloneNode(!0),e.value=null,this.parentNode.replaceChild(e,this),c.off(),c=n(e).on("change",i).on("mouseenter mouseleave",r),a.trigger("change")}),u.on("mouseenter mouseleave",r)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),e("runtime/html5/util",["base"],function(e){var n=t.createObjectURL&&t||t.URL&&URL.revokeObjectURL&&URL||t.webkitURL,i=e.noop,r=i;return n&&(i=function(){return n.createObjectURL.apply(n,arguments)},r=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:i,revokeObjectURL:r,dataURL2Blob:function(t){var e,n,i,r,s,o;for(o=t.split(","),e=~o[0].indexOf("base64")?atob(o[1]):decodeURIComponent(o[1]),i=new ArrayBuffer(e.length),n=new Uint8Array(i),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return s=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(i,s)},dataURL2ArrayBuffer:function(t){var e,n,i,r;for(r=t.split(","),e=~r[0].indexOf("base64")?atob(r[1]):decodeURIComponent(r[1]),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n.buffer},arrayBufferToBlob:function(e,n){var i,r=t.BlobBuilder||t.WebKitBlobBuilder;return r?(i=new r,i.append(e),i.getBlob(n)):new Blob([e],n?{type:n}:{})},canvasToDataUrl:function(t,e,n){return t.toDataURL(e,n/100)},parseMeta:function(t,e){e(!1,{})},updateImageHead:function(t){return t}}}),e("runtime/html5/imagemeta",["runtime/html5/util"],function(t){var e;return e={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(t,e){var n=this,i=new FileReader;i.onload=function(){e(!1,n._parse(this.result)),i=i.onload=i.onerror=null},i.onerror=function(t){e(t.message),i=i.onload=i.onerror=null},t=t.slice(0,n.maxMetaDataSize),i.readAsArrayBuffer(t.getSource())},_parse:function(t,n){if(!(t.byteLength<6)){var i,r,s,o,a=new DataView(t),l=2,u=a.byteLength-4,c=l,d={};if(65496===a.getUint16(0)){for(;u>l&&(i=a.getUint16(l),i>=65504&&65519>=i||65534===i)&&(r=a.getUint16(l+2)+2,!(l+r>a.byteLength));){if(s=e.parsers[i],!n&&s)for(o=0;o<s.length;o+=1)s[o].call(e,a,l,r,d);l+=r,c=l}c>6&&(t.slice?d.imageHead=t.slice(2,c):d.imageHead=new Uint8Array(t).subarray(2,c))}return d}},updateImageHead:function(t,e){var n,i,r,s=this._parse(t,!0);return r=2,s.imageHead&&(r=2+s.imageHead.byteLength),i=t.slice?t.slice(r):new Uint8Array(t).subarray(r),n=new Uint8Array(e.byteLength+2+i.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(e),2),n.set(new Uint8Array(i),e.byteLength+2),n.buffer}},t.parseMeta=function(){return e.parse.apply(e,arguments)},t.updateImageHead=function(){return e.updateImageHead.apply(e,arguments)},e}),e("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(t,e){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},n.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,n){return t.getUint16(e,n)},size:2},4:{getValue:function(t,e,n){return t.getUint32(e,n)},size:4},5:{getValue:function(t,e,n){return t.getUint32(e,n)/t.getUint32(e+4,n)},size:8},9:{getValue:function(t,e,n){return t.getInt32(e,n)},size:4},10:{getValue:function(t,e,n){return t.getInt32(e,n)/t.getInt32(e+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(e,i,r,s,o,a){var l,u,c,d,h,f,p=n.exifTagTypes[s];if(!p)return void t.log("Invalid Exif data: Invalid tag type.");if(l=p.size*o,u=l>4?i+e.getUint32(r+8,a):r+8,u+l>e.byteLength)return void t.log("Invalid Exif data: Invalid data offset.");if(1===o)return p.getValue(e,u,a);for(c=[],d=0;o>d;d+=1)c[d]=p.getValue(e,u+d*p.size,a);if(p.ascii){for(h="",d=0;d<c.length&&(f=c[d],"\x00"!==f);d+=1)h+=f;return h}return c},n.parseExifTag=function(t,e,i,r,s){var o=t.getUint16(i,r);s.exif[o]=n.getExifValue(t,e,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},n.parseExifTags=function(e,n,i,r,s){var o,a,l;if(i+6>e.byteLength)return void t.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(i,r),a=i+2+12*o,a+4>e.byteLength)return void t.log("Invalid Exif data: Invalid directory size.");for(l=0;o>l;l+=1)this.parseExifTag(e,n,i+2+12*l,r,s);return e.getUint32(a,r)},n.parseExifData=function(e,i,r,s){var o,a,l=i+10;if(1165519206===e.getUint32(i+4)){if(l+8>e.byteLength)return void t.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(i+8))return void t.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(l)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void t.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(l+2,o))return void t.log("Invalid Exif data: Missing TIFF marker.");a=e.getUint32(l+4,o),s.exif=new n.ExifMap,a=n.parseExifTags(e,l,l+a,o,s)}},e.parsers[65505].push(n.parseExifData),n}),e("runtime/html5/jpegencoder",[],function(t,e,n){/*
          Copyright (c) 2008, Adobe Systems Incorporated
          All rights reserved.
    
          Redistribution and use in source and binary forms, with or without
          modification, are permitted provided that the following conditions are
          met:
    
          * Redistributions of source code must retain the above copyright notice,
            this list of conditions and the following disclaimer.
    
          * Redistributions in binary form must reproduce the above copyright
            notice, this list of conditions and the following disclaimer in the
            documentation and/or other materials provided with the distribution.
    
          * Neither the name of Adobe Systems Incorporated nor the names of its
            contributors may be used to endorse or promote products derived from
            this software without specific prior written permission.
    
          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
          IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
        */
function i(t){function e(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var i=T((e[n]*t+50)/100);1>i?i=1:i>255&&(i=255),E[U[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;64>s;s++){var o=T((r[s]*t+50)/100);1>o?o=1:o>255&&(o=255),x[U[s]]=o}for(var a=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],l=0,u=0;8>u;u++)for(var c=0;8>c;c++)C[l]=1/(E[U[l]]*a[u]*a[c]*8),k[l]=1/(x[U[l]]*a[u]*a[c]*8),l++}function n(t,e){for(var n=0,i=0,r=new Array,s=1;16>=s;s++){for(var o=1;o<=t[s];o++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=s,i++,n++;n*=2}return r}function i(){b=n(q,G),w=n(V,j),_=n(N,B),D=n(W,Z)}function r(){for(var t=1,e=2,n=1;15>=n;n++){for(var i=t;e>i;i++)R[32767+i]=n,M[32767+i]=[],M[32767+i][1]=n,M[32767+i][0]=i;for(var r=-(e-1);-t>=r;r++)R[32767+r]=n,M[32767+r]=[],M[32767+r][1]=n,M[32767+r][0]=e-1+r;t<<=1,e<<=1}}function s(){for(var t=0;256>t;t++)I[t]=19595*t,I[t+256>>0]=38470*t,I[t+512>>0]=7471*t+32768,I[t+768>>0]=-11059*t,I[t+1024>>0]=-21709*t,I[t+1280>>0]=32768*t+8421375,I[t+1536>>0]=-27439*t,I[t+1792>>0]=-5329*t}function o(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(O|=1<<Y),n--,Y--,0>Y&&(255==O?(a(255),a(0)):a(O),Y=7,O=0)}function a(t){$.push(z[t])}function l(t){a(t>>8&255),a(255&t)}function u(t,e){var n,i,r,s,o,a,l,u,c,d=0,h=8,f=64;for(c=0;h>c;++c){n=t[d],i=t[d+1],r=t[d+2],s=t[d+3],o=t[d+4],a=t[d+5],l=t[d+6],u=t[d+7];var p=n+u,g=n-u,m=i+l,v=i-l,y=r+a,b=r-a,w=s+o,_=s-o,D=p+w,S=p-w,T=m+y,E=m-y;t[d]=D+T,t[d+4]=D-T;var x=.707106781*(E+S);t[d+2]=S+x,t[d+6]=S-x,D=_+b,T=b+v,E=v+g;var C=.382683433*(D-E),k=.5411961*D+C,M=1.306562965*E+C,R=.707106781*T,H=g+R,$=g-R;t[d+5]=$+k,t[d+3]=$-k,t[d+1]=H+M,t[d+7]=H-M,d+=8}for(d=0,c=0;h>c;++c){n=t[d],i=t[d+8],r=t[d+16],s=t[d+24],o=t[d+32],a=t[d+40],l=t[d+48],u=t[d+56];var O=n+u,Y=n-u,A=i+l,L=i-l,P=r+a,z=r-a,I=s+o,U=s-o,q=O+I,G=O-I,N=A+P,B=A-P;t[d]=q+N,t[d+32]=q-N;var V=.707106781*(B+G);t[d+16]=G+V,t[d+48]=G-V,q=U+z,N=z+L,B=L+Y;var j=.382683433*(q-B),W=.5411961*q+j,Z=1.306562965*B+j,Q=.707106781*N,X=Y+Q,J=Y-Q;t[d+40]=J+W,t[d+24]=J-W,t[d+8]=X+Z,t[d+56]=X-Z,d++}var K;for(c=0;f>c;++c)K=t[c]*e[c],F[c]=K>0?K+.5|0:K-.5|0;return F}function c(){l(65504),l(16),a(74),a(70),a(73),a(70),a(0),a(1),a(1),a(0),l(1),l(1),a(0),a(0)}function d(t,e){l(65472),l(17),a(8),l(e),l(t),a(3),a(1),a(17),a(0),a(2),a(17),a(1),a(3),a(17),a(1)}function h(){l(65499),l(132),a(0);for(var t=0;64>t;t++)a(E[t]);a(1);for(var e=0;64>e;e++)a(x[e])}function f(){l(65476),l(418),a(0);for(var t=0;16>t;t++)a(q[t+1]);for(var e=0;11>=e;e++)a(G[e]);a(16);for(var n=0;16>n;n++)a(N[n+1]);for(var i=0;161>=i;i++)a(B[i]);a(1);for(var r=0;16>r;r++)a(V[r+1]);for(var s=0;11>=s;s++)a(j[s]);a(17);for(var o=0;16>o;o++)a(W[o+1]);for(var u=0;161>=u;u++)a(Z[u])}function p(){l(65498),l(12),a(3),a(1),a(0),a(2),a(17),a(3),a(17),a(0),a(63),a(0)}function g(t,e,n,i,r){for(var s,a=r[0],l=r[240],c=16,d=63,h=64,f=u(t,e),p=0;h>p;++p)H[U[p]]=f[p];var g=H[0]-n;n=H[0],0==g?o(i[0]):(s=32767+g,o(i[R[s]]),o(M[s]));for(var m=63;m>0&&0==H[m];m--);if(0==m)return o(a),n;for(var v,y=1;m>=y;){for(var b=y;0==H[y]&&m>=y;++y);var w=y-b;if(w>=c){v=w>>4;for(var _=1;v>=_;++_)o(l);w=15&w}s=32767+H[y],o(r[(w<<4)+R[s]]),o(M[s]),y++}return m!=d&&o(a),n}function m(){for(var t=String.fromCharCode,e=0;256>e;e++)z[e]=t(e)}function v(t){if(0>=t&&(t=1),t>100&&(t=100),S!=t){var n=0;n=50>t?Math.floor(5e3/t):Math.floor(200-2*t),e(n),S=t}}function y(){t||(t=50),m(),i(),r(),s(),v(t)}var b,w,_,D,S,T=(Math.round,Math.floor),E=new Array(64),x=new Array(64),C=new Array(64),k=new Array(64),M=new Array(65535),R=new Array(65535),F=new Array(64),H=new Array(64),$=[],O=0,Y=7,A=new Array(64),L=new Array(64),P=new Array(64),z=new Array(256),I=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,e){e&&v(e),$=new Array,O=0,Y=7,l(65496),c(),h(),d(t.width,t.height),f(),p();var n=0,i=0,r=0;O=0,Y=7,this.encode.displayName="_encode_";for(var s,a,u,m,y,S,T,E,x,M=t.data,R=t.width,F=t.height,H=4*R,z=0;F>z;){for(s=0;H>s;){for(y=H*z+s,S=y,T=-1,E=0,x=0;64>x;x++)E=x>>3,T=4*(7&x),S=y+E*H+T,z+E>=F&&(S-=H*(z+1+E-F)),s+T>=H&&(S-=s+T-H+4),a=M[S++],u=M[S++],m=M[S++],A[x]=(I[a]+I[u+256>>0]+I[m+512>>0]>>16)-128,L[x]=(I[a+768>>0]+I[u+1024>>0]+I[m+1280>>0]>>16)-128,P[x]=(I[a+1280>>0]+I[u+1536>>0]+I[m+1792>>0]>>16)-128;n=g(A,C,n,b,_),i=g(L,k,i,w,D),r=g(P,k,r,w,D),s+=32}z+=8}if(Y>=0){var U=[];U[1]=Y+1,U[0]=(1<<Y+1)-1,o(U)}l(65497);var q="data:image/jpeg;base64,"+btoa($.join(""));return $=[],q},y()}return i.encode=function(t,e){var n=new i(e);return n.encode(t)},i}),e("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(t,e,n){var i,r=t.canvasToDataUrl;t.canvasToDataUrl=function(t,s,o){var a,l,u,c,d;return n.os.android?("image/jpeg"===s&&"undefined"==typeof i&&(c=r.apply(null,arguments),d=c.split(","),c=~d[0].indexOf("base64")?atob(d[1]):decodeURIComponent(d[1]),c=c.substring(0,2),i=255===c.charCodeAt(0)&&216===c.charCodeAt(1)),"image/jpeg"!==s||i?r.apply(null,arguments):(l=t.width,u=t.height,a=t.getContext("2d"),e.encode(a.getImageData(0,0,l,u),o))):r.apply(null,arguments)}}),e("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(t,e,n){var i="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return e.register("Image",{modified:!1,init:function(){var t=this,e=new Image;e.onload=function(){t._info={type:t.type,width:this.width,height:this.height},t._metas||"image/jpeg"!==t.type?t.owner.trigger("load"):n.parseMeta(t._blob,function(e,n){t._metas=n,t.owner.trigger("load")})},e.onerror=function(){t.owner.trigger("error")},t._img=e},loadFromBlob:function(t){var e=this,i=e._img;e._blob=t,e.type=t.type,i.src=n.createObjectURL(t.getSource()),e.owner.once("load",function(){n.revokeObjectURL(i.src)})},resize:function(t,e){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,t,e),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(t,e,n,i,r){var s=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,a=this._img,l=a.naturalWidth,u=a.naturalHeight,c=this.getOrientation();r=r||1,s.width=n,s.height=i,o.preserveHeaders||this._rotate2Orientaion(s,c),this._renderImageToCanvas(s,a,-t,-e,l*r,u*r),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(t){var e,i=this._blob,r=this.options;if(t=t||this.type,this.modified||this.type!==t){if(e=this._canvas,"image/jpeg"===t){if(i=n.canvasToDataUrl(e,t,r.quality),r.preserveHeaders&&this._metas&&this._metas.imageHead)return i=n.dataURL2ArrayBuffer(i),i=n.updateImageHead(i,this._metas.imageHead),i=n.arrayBufferToBlob(i,t)}else i=n.canvasToDataUrl(e,t);i=n.dataURL2Blob(i)}return i},getAsDataUrl:function(t){var e=this.options;return t=t||this.type,"image/jpeg"===t?n.canvasToDataUrl(this._canvas,t,e.quality):this._canvas.toDataURL(t)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(t){return t?(this._info=t,this):this._info},meta:function(t){return t?(this._metas=t,this):this._metas},destroy:function(){var t=this._canvas;this._img.onload=null,t&&(t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=t.height=0,this._canvas=null),this._img.src=i,this._img=this._blob=null},_resize:function(t,e,n,i){var r,s,o,a,l,u=this.options,c=t.width,d=t.height,h=this.getOrientation();~[5,6,7,8].indexOf(h)&&(n^=i,i^=n,n^=i),r=Math[u.crop?"max":"min"](n/c,i/d),u.allowMagnify||(r=Math.min(1,r)),s=c*r,o=d*r,u.crop?(e.width=n,e.height=i):(e.width=s,e.height=o),a=(e.width-s)/2,l=(e.height-o)/2,u.preserveHeaders||this._rotate2Orientaion(e,h),this._renderImageToCanvas(e,t,a,l,s,o)},_rotate2Orientaion:function(t,e){var n=t.width,i=t.height,r=t.getContext("2d");switch(e){case 5:case 6:case 7:case 8:t.width=i,t.height=n}switch(e){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},_renderImageToCanvas:function(){function e(t,e,n){var i,r,s,o=document.createElement("canvas"),a=o.getContext("2d"),l=0,u=n,c=n;for(o.width=1,o.height=n,a.drawImage(t,0,0),i=a.getImageData(0,0,1,n).data;c>l;)r=i[4*(c-1)+3],0===r?u=c:l=c,c=u+l>>1;return s=c/n,0===s?1:s}function n(t){var e,n,i=t.naturalWidth,r=t.naturalHeight;return i*r>1048576?(e=document.createElement("canvas"),e.width=e.height=1,n=e.getContext("2d"),n.drawImage(t,-i+1,0),0===n.getImageData(0,0,1,1).data[3]):!1}return t.os.ios?t.os.ios>=7?function(t,n,i,r,s,o){var a=n.naturalWidth,l=n.naturalHeight,u=e(n,a,l);return t.getContext("2d").drawImage(n,0,0,a*u,l*u,i,r,s,o)}:function(t,i,r,s,o,a){var l,u,c,d,h,f,p,g=i.naturalWidth,m=i.naturalHeight,v=t.getContext("2d"),y=n(i),b="image/jpeg"===this.type,w=1024,_=0,D=0;for(y&&(g/=2,m/=2),v.save(),l=document.createElement("canvas"),l.width=l.height=w,u=l.getContext("2d"),c=b?e(i,g,m):1,d=Math.ceil(w*o/g),h=Math.ceil(w*a/m/c);m>_;){for(f=0,p=0;g>f;)u.clearRect(0,0,w,w),u.drawImage(i,-f,-_),v.drawImage(l,0,0,w,w,r+p,s+D,d,h),f+=w,p+=d;_+=w,D+=h}v.restore(),l=u=null}:function(e){var n=t.slice(arguments,1),i=e.getContext("2d");i.drawImage.apply(i,n)}}()})}),e("runtime/html5/transport",["base","runtime/html5/runtime"],function(t,e){var n=t.noop,i=t.$;return e.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var e,n,r,s=this.owner,o=this.options,a=this._initAjax(),l=s._blob,u=o.server;o.sendAsBinary?(u+=(/\?/.test(u)?"&":"?")+i.param(s._formData),n=l.getSource()):(e=new FormData,i.each(s._formData,function(t,n){e.append(t,n)}),e.append(o.fileVal,l.getSource(),o.filename||s._formData.name||"")),o.withCredentials&&"withCredentials"in a?(a.open(o.method,u,!0),a.withCredentials=!0):a.open(o.method,u),this._setRequestHeader(a,o.headers),n?(a.overrideMimeType&&a.overrideMimeType("application/octet-stream"),t.os.android?(r=new FileReader,r.onload=function(){a.send(this.result),r=r.onload=null},r.readAsArrayBuffer(n)):a.send(n)):a.send(e)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var t=this._xhr;t&&(t.upload.onprogress=n,t.onreadystatechange=n,t.abort(),this._xhr=t=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,e=new XMLHttpRequest,i=this.options;return!i.withCredentials||"withCredentials"in e||"undefined"==typeof XDomainRequest||(e=new XDomainRequest),e.upload.onprogress=function(e){var n=0;return e.lengthComputable&&(n=e.loaded/e.total),t.trigger("progress",n)},e.onreadystatechange=function(){return 4===e.readyState?(e.upload.onprogress=n,e.onreadystatechange=n,t._xhr=null,t._status=e.status,e.status>=200&&e.status<300?(t._response=e.responseText,t.trigger("load")):e.status>=500&&e.status<600?(t._response=e.responseText,t.trigger("error","server")):t.trigger("error",t._status?"http":"abort")):void 0},t._xhr=e,e},_setRequestHeader:function(t,e){i.each(e,function(e,n){t.setRequestHeader(e,n)})},_parseJson:function(t){var e;try{e=JSON.parse(t)}catch(n){e={}}return e}})}),e("runtime/html5/md5",["runtime/html5/runtime"],function(t){var e=function(t,e){return t+e&4294967295},n=function(t,n,i,r,s,o){return n=e(e(n,t),e(r,o)),e(n<<s|n>>>32-s,i)},i=function(t,e,i,r,s,o,a){return n(e&i|~e&r,t,e,s,o,a)},r=function(t,e,i,r,s,o,a){return n(e&r|i&~r,t,e,s,o,a)},s=function(t,e,i,r,s,o,a){return n(e^i^r,t,e,s,o,a)},o=function(t,e,i,r,s,o,a){return n(i^(e|~r),t,e,s,o,a)},a=function(t,n){var a=t[0],l=t[1],u=t[2],c=t[3];a=i(a,l,u,c,n[0],7,-680876936),c=i(c,a,l,u,n[1],12,-389564586),u=i(u,c,a,l,n[2],17,606105819),l=i(l,u,c,a,n[3],22,-1044525330),a=i(a,l,u,c,n[4],7,-176418897),c=i(c,a,l,u,n[5],12,1200080426),u=i(u,c,a,l,n[6],17,-1473231341),l=i(l,u,c,a,n[7],22,-45705983),a=i(a,l,u,c,n[8],7,1770035416),c=i(c,a,l,u,n[9],12,-1958414417),u=i(u,c,a,l,n[10],17,-42063),l=i(l,u,c,a,n[11],22,-1990404162),a=i(a,l,u,c,n[12],7,1804603682),c=i(c,a,l,u,n[13],12,-40341101),u=i(u,c,a,l,n[14],17,-1502002290),l=i(l,u,c,a,n[15],22,1236535329),a=r(a,l,u,c,n[1],5,-165796510),c=r(c,a,l,u,n[6],9,-1069501632),u=r(u,c,a,l,n[11],14,643717713),l=r(l,u,c,a,n[0],20,-373897302),a=r(a,l,u,c,n[5],5,-701558691),c=r(c,a,l,u,n[10],9,38016083),u=r(u,c,a,l,n[15],14,-660478335),l=r(l,u,c,a,n[4],20,-405537848),a=r(a,l,u,c,n[9],5,568446438),c=r(c,a,l,u,n[14],9,-1019803690),u=r(u,c,a,l,n[3],14,-187363961),l=r(l,u,c,a,n[8],20,1163531501),a=r(a,l,u,c,n[13],5,-1444681467),c=r(c,a,l,u,n[2],9,-51403784),u=r(u,c,a,l,n[7],14,1735328473),l=r(l,u,c,a,n[12],20,-1926607734),a=s(a,l,u,c,n[5],4,-378558),c=s(c,a,l,u,n[8],11,-2022574463),u=s(u,c,a,l,n[11],16,1839030562),l=s(l,u,c,a,n[14],23,-35309556),a=s(a,l,u,c,n[1],4,-1530992060),c=s(c,a,l,u,n[4],11,1272893353),u=s(u,c,a,l,n[7],16,-155497632),l=s(l,u,c,a,n[10],23,-1094730640),a=s(a,l,u,c,n[13],4,681279174),c=s(c,a,l,u,n[0],11,-358537222),u=s(u,c,a,l,n[3],16,-722521979),l=s(l,u,c,a,n[6],23,76029189),a=s(a,l,u,c,n[9],4,-640364487),c=s(c,a,l,u,n[12],11,-421815835),u=s(u,c,a,l,n[15],16,530742520),l=s(l,u,c,a,n[2],23,-995338651),a=o(a,l,u,c,n[0],6,-198630844),c=o(c,a,l,u,n[7],10,1126891415),u=o(u,c,a,l,n[14],15,-1416354905),l=o(l,u,c,a,n[5],21,-57434055),a=o(a,l,u,c,n[12],6,1700485571),c=o(c,a,l,u,n[3],10,-1894986606),u=o(u,c,a,l,n[10],15,-1051523),l=o(l,u,c,a,n[1],21,-2054922799),a=o(a,l,u,c,n[8],6,1873313359),c=o(c,a,l,u,n[15],10,-30611744),u=o(u,c,a,l,n[6],15,-1560198380),l=o(l,u,c,a,n[13],21,1309151649),a=o(a,l,u,c,n[4],6,-145523070),c=o(c,a,l,u,n[11],10,-1120210379),u=o(u,c,a,l,n[2],15,718787259),l=o(l,u,c,a,n[9],21,-343485551),t[0]=e(a,t[0]),t[1]=e(l,t[1]),t[2]=e(u,t[2]),t[3]=e(c,t[3])},l=function(t){var e,n=[];for(e=0;64>e;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n},u=function(t){var e,n=[];for(e=0;64>e;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n},c=function(t){var e,n,i,r,s,o,u=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;u>=e;e+=64)a(c,l(t.substring(e-64,e)));for(t=t.substring(e-64),n=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;n>e;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(a(c,i),e=0;16>e;e+=1)i[e]=0;return r=8*u,r=r.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),o=parseInt(r[1],16)||0,i[14]=s,i[15]=o,a(c,i),c},d=function(t){var e,n,i,r,s,o,l=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;l>=e;e+=64)a(c,u(t.subarray(e-64,e)));for(t=l>e-64?t.subarray(e-64):new Uint8Array(0),n=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;n>e;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(a(c,i),e=0;16>e;e+=1)i[e]=0;return r=8*l,r=r.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(r[2],16),o=parseInt(r[1],16)||0,i[14]=s,i[15]=o,a(c,i),c},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f=function(t){var e,n="";for(e=0;4>e;e+=1)n+=h[t>>8*e+4&15]+h[t>>8*e&15];return n},p=function(t){var e;for(e=0;e<t.length;e+=1)t[e]=f(t[e]);return t.join("")},g=function(t){return p(c(t))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==g("hello")&&(e=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}),m.prototype.append=function(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),this.appendBinary(t),this},m.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,n=this._buff.length;for(e=64;n>=e;e+=64)a(this._state,l(this._buff.substring(e-64,e)));return this._buff=this._buff.substr(e-64),this},m.prototype.end=function(t){var e,n,i=this._buff,r=i.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;r>e;e+=1)s[e>>2]|=i.charCodeAt(e)<<(e%4<<3);return this._finish(s,r),n=t?this._state:p(this._state),this.reset(),n},m.prototype._finish=function(t,e){var n,i,r,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(a(this._state,t),s=0;16>s;s+=1)t[s]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),r=parseInt(n[1],16)||0,t[14]=i,t[15]=r,a(this._state,t)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(t,e){/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t)));var n=c(t);return e?n:p(n)},m.hashBinary=function(t,e){var n=c(t);return e?n:p(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(t){var e,n=this._concatArrayBuffer(this._buff,t),i=n.length;for(this._length+=t.byteLength,e=64;i>=e;e+=64)a(this._state,u(n.subarray(e-64,e)));return this._buff=i>e-64?n.subarray(e-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(t){var e,n,i=this._buff,r=i.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;r>e;e+=1)s[e>>2]|=i[e]<<(e%4<<3);return this._finish(s,r),n=t?this._state:p(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(t,e){var n=t.length,i=new Uint8Array(n+e.byteLength);return i.set(t),i.set(new Uint8Array(e),n),i},m.ArrayBuffer.hash=function(t,e){var n=d(new Uint8Array(t));return e?n:p(n)},t.register("Md5",{init:function(){},loadFromBlob:function(t){var e,n,i=t.getSource(),r=2097152,s=Math.ceil(i.size/r),o=0,a=this.owner,l=new m.ArrayBuffer,u=this,c=i.mozSlice||i.webkitSlice||i.slice;n=new FileReader,(e=function(){var d,h;d=o*r,h=Math.min(d+r,i.size),n.onload=function(e){l.append(e.target.result),a.trigger("progress",{total:t.size,loaded:h})},n.onloadend=function(){n.onloadend=n.onload=null,++o<s?setTimeout(e,1):setTimeout(function(){a.trigger("load"),u.result=l.end(),e=t=i=l=null,a.trigger("complete")},50)},n.readAsArrayBuffer(c.call(i,d,h))})()},getResult:function(){return this.result}})}),e("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(e,n,i){function r(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1],10)}function s(){function i(t,e){var n,i,r=t.type||t;n=r.split("::"),i=n[0],r=n[1],"Ready"===r&&i===u.uid?u.trigger("ready"):s[i]&&s[i].trigger(r.toLowerCase(),t,e)}var r={},s={},o=this.destroy,u=this,c=e.guid("webuploader_");n.apply(u,arguments),u.type=a,u.exec=function(t,n){var i,o=this,a=o.uid,c=e.slice(arguments,2);return s[a]=o,l[t]&&(r[a]||(r[a]=new l[t](o,u)),i=r[a],i[n])?i[n].apply(i,c):u.flashExec.apply(o,arguments)},t[c]=function(){var t=arguments;setTimeout(function(){i.apply(null,t)},1)},this.jsreciver=c,this.destroy=function(){return o&&o.apply(this,arguments)},this.flashExec=function(t,n){var i=u.getFlash(),r=e.slice(arguments,2);return i.exec(this.uid,t,n,r)}}var o=e.$,a="flash",l={};return e.inherits(n,{constructor:s,init:function(){var t,n=this.getContainer(),i=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),t='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf+'" ',e.browser.ie&&(t+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),t+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(t)},getFlash:function(){return this._flash?this._flash:(this._flash=o("#"+this.uid).get(0),this._flash)}}),s.register=function(t,n){return n=l[t]=e.inherits(i,o.extend({flashExec:function(){var t=this.owner,e=this.getRuntime();return e.flashExec.apply(t,arguments)}},n))},r()>=11.4&&n.addRuntime(a,s),s}),e("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(t,e){var n=t.$;return e.register("FilePicker",{init:function(t){var e,i,r=n.extend({},t);for(e=r.accept&&r.accept.length,i=0;e>i;i++)r.accept[i].title||(r.accept[i].title="Files");delete r.button,delete r.id,delete r.container,this.flashExec("FilePicker","init",r)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),e("runtime/flash/image",["runtime/flash/runtime"],function(t){return t.register("Image",{loadFromBlob:function(t){var e=this.owner;e.info()&&this.flashExec("Image","info",e.info()),e.meta()&&this.flashExec("Image","meta",e.meta()),this.flashExec("Image","loadFromBlob",t.uid)}})}),e("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(e,n,i){var r=e.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var t,e=this.owner,n=this.options,i=this._initAjax(),s=e._blob,o=n.server;i.connectRuntime(s.ruid),n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+r.param(e._formData),t=s.uid):(r.each(e._formData,function(t,e){i.exec("append",t,e)}),i.exec("appendBlob",n.fileVal,s.uid,n.filename||e._formData.name||"")),this._setRequestHeader(i,n.headers),i.exec("send",{method:n.method,url:o,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},t)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var t=this._xhr;t&&(t.exec("abort"),t.destroy(),this._xhr=t=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,n=new i("XMLHttpRequest");return n.on("uploadprogress progress",function(t){var n=t.loaded/t.total;return n=Math.min(1,Math.max(0,n)),e.trigger("progress",n)}),n.on("load",function(){var i,r=n.exec("getStatus"),s=!1,o="";return n.off(),e._xhr=null,r>=200&&300>r?s=!0:r>=500&&600>r?(s=!0,o="server"):o="http",s&&(e._response=n.exec("getResponse"),e._response=decodeURIComponent(e._response),i=function(e){try{return t.JSON&&t.JSON.parse?JSON.parse(e):new Function("return "+e).call()}catch(n){return{}}},e._responseJson=e._response?i(e._response):{}),n.destroy(),n=null,o?e.trigger("error",o):e.trigger("load")}),n.on("error",function(){n.off(),e._xhr=null,e.trigger("error","http")}),e._xhr=n,n},_setRequestHeader:function(t,e){r.each(e,function(e,n){t.exec("setRequestHeader",e,n)})}})}),e("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(t,e){return t.register("Blob",{slice:function(t,n){var i=this.flashExec("Blob","slice",t,n);return new e(i.uid,i)}})}),e("runtime/flash/md5",["runtime/flash/runtime"],function(t){return t.register("Md5",{init:function(){},loadFromBlob:function(t){return this.flashExec("Md5","loadFromBlob",t.uid)}})}),e("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(t){return t}),e("widgets/log",["base","uploader","widgets/widget"],function(t,e){function n(t){var e=r.extend({},i,t),n=s.replace(/^(.*)\?/,"$1"+r.param(e)),o=new Image;o.src=n}var i,r=t.$,s=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",o=(location.hostname||location.host||"protected").toLowerCase(),a=o&&/baidu/i.exec(o);if(a)return i={dv:3,master:"webuploader",online:/test/.exec(o)?0:1,module:"",product:o,type:0},e.register({name:"log",init:function(){var t=this.owner,e=0,i=0;t.on("error",function(t){n({type:2,c_error_code:t})}).on("uploadError",function(t,e){n({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+e})}).on("uploadComplete",function(t){e++,i+=t.size}).on("uploadFinished",function(){n({c_count:e,c_size:i}),e=i=0}),n({c_usage:1})}})}),e("webuploader",["preset/all","widgets/log"],function(t){return t}),n("webuploader")});